/**
jsonrpc-bidirectional v8.9.1
Bidirectional JSONRPC over web sockets or HTTP with extensive plugin support.
https://github.com/bigstepinc/jsonrpc-bidirectional


MIT License

Copyright (c) 2017 Bigstep Cloud SRL

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("null"),require(""),require("fetch"),require("forge"));else if("function"==typeof define&&define.amd)define(["null","","fetch","forge"],t);else{var r="object"==typeof exports?t(require("null"),require(""),require("fetch"),require("forge")):t(e.null,e[""],e.fetch,e.forge);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(e,t,r,n){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=96)}([function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){b&&p&&(b=!1,p.length?d=p.concat(d):y=-1,d.length&&a())}function a(){if(!b){var e=o(s);b=!0;for(var t=d.length;t;){for(p=d,d=[];++y<t;)p&&p[y].run();y=-1,t=d.length}p=null,b=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(e){f=n}}();var p,d=[],b=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new u(e,t)),1!==d.length||b||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,r){"use strict";(function(t){function n(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0}function o(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function i(e){return Object.prototype.toString.call(e)}function s(e){return!o(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function a(e){if(_.isFunction(e)){if(R)return e.name;var t=e.toString(),r=t.match(S);return r&&r[1]}}function u(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function c(e){if(R||!_.isFunction(e))return _.inspect(e);var t=a(e);return"[Function"+(t?": "+t:"")+"]"}function l(e){return u(c(e.actual),128)+" "+e.operator+" "+u(c(e.expected),128)}function f(e,t,r,n,o){throw new E.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:o})}function h(e,t){e||f(e,!0,t,"==",E.ok)}function p(e,t,r,a){if(e===t)return!0;if(o(e)&&o(t))return 0===n(e,t);if(_.isDate(e)&&_.isDate(t))return e.getTime()===t.getTime();if(_.isRegExp(e)&&_.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(s(e)&&s(t)&&i(e)===i(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;a=a||{actual:[],expected:[]};var u=a.actual.indexOf(e);return-1!==u&&u===a.expected.indexOf(t)||(a.actual.push(e),a.expected.push(t),b(e,t,r,a))}return r?e===t:e==t}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function b(e,t,r,n){if(null===e||void 0===e||null===t||void 0===t)return!1;if(_.isPrimitive(e)||_.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=d(e),i=d(t);if(o&&!i||!o&&i)return!1;if(o)return e=k.call(e),t=k.call(t),p(e,t,r);var s,a,u=O(e),c=O(t);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),a=u.length-1;a>=0;a--)if(u[a]!==c[a])return!1;for(a=u.length-1;a>=0;a--)if(s=u[a],!p(e[s],t[s],r,n))return!1;return!0}function y(e,t,r){p(e,t,!0)&&f(e,t,r,"notDeepStrictEqual",y)}function g(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function m(e){var t;try{e()}catch(e){t=e}return t}function v(e,t,r,n){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),o=m(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!o&&f(o,r,"Missing expected exception"+n);var i="string"==typeof n,s=!e&&_.isError(o),a=!e&&o&&!r;if((s&&i&&g(o,r)||a)&&f(o,r,"Got unwanted exception"+n),e&&o&&r&&!g(o,r)||!e&&o)throw o}var _=r(34),w=Object.prototype.hasOwnProperty,k=Array.prototype.slice,R=function(){return"foo"===function(){}.name}(),E=e.exports=h,S=/\s*function\s+([^\(\s]*)\s*/;E.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var t=e.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,o=a(t),i=n.indexOf("\n"+o);if(i>=0){var s=n.indexOf("\n",i+1);n=n.substring(s+1)}this.stack=n}}},_.inherits(E.AssertionError,Error),E.fail=f,E.ok=h,E.equal=function(e,t,r){e!=t&&f(e,t,r,"==",E.equal)},E.notEqual=function(e,t,r){e==t&&f(e,t,r,"!=",E.notEqual)},E.deepEqual=function(e,t,r){p(e,t,!1)||f(e,t,r,"deepEqual",E.deepEqual)},E.deepStrictEqual=function(e,t,r){p(e,t,!0)||f(e,t,r,"deepStrictEqual",E.deepStrictEqual)},E.notDeepEqual=function(e,t,r){p(e,t,!1)&&f(e,t,r,"notDeepEqual",E.notDeepEqual)},E.notDeepStrictEqual=y,E.strictEqual=function(e,t,r){e!==t&&f(e,t,r,"===",E.strictEqual)},E.notStrictEqual=function(e,t,r){e===t&&f(e,t,r,"!==",E.notStrictEqual)},E.throws=function(e,t,r){v(!0,e,t,r)},E.doesNotThrow=function(e,t,r){v(!1,e,t,r)},E.ifError=function(e){if(e)throw e};var O=Object.keys||function(e){var t=[];for(var r in e)w.call(e,r)&&t.push(r);return t}}).call(t,r(7))},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.Exception=r(3),e.exports=function(){function Utils(){n(this,Utils),Object.seal(this)}return o(Utils,null,[{key:"jsonDecodeSafe",value:function(e){try{return JSON.parse(e)}catch(t){throw new JSONRPC.Exception(t.message+"; RAW JSON string: "+JSON.stringify(e),JSONRPC.Exception.PARSE_ERROR)}}}]),Utils}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),c=r(62);e.exports=function(e){function Exception(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,Exception);var i=o(this,(Exception.__proto__||Object.getPrototypeOf(Exception)).call(this,e));return i.strMessage=e,i.code=void 0===t||null===t?0:t,i.objData=r,i}return i(Exception,e),a(Exception,[{key:"code",get:function(){return this.nCode},set:function(e){u("number"==typeof e||String(parseInt(e))===e,"The JSONRPC.Exception error code must be of type number."),this.nCode=parseInt(e)}},{key:"data",get:function(){return this.objData},set:function(e){u("object"===(void 0===e?"undefined":s(e))&&null!==e,"The JSONRPC.Exception data property must be an Object."),this.objData=e}}],[{key:"NOT_AUTHENTICATED",get:function(){return-1}},{key:"NOT_AUTHORIZED",get:function(){return-2}},{key:"REQUEST_EXPIRED",get:function(){return-3}},{key:"NETWORK_ERROR",get:function(){return-4}},{key:"PARSE_ERROR",get:function(){return-32700}},{key:"INVALID_REQUEST",get:function(){return-32600}},{key:"METHOD_NOT_FOUND",get:function(){return-32601}},{key:"INVALID_PARAMS",get:function(){return-32602}},{key:"INTERNAL_ERROR",get:function(){return-32603}}]),Exception}(c)},function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();e.exports=function(){function ClientPluginBase(){o(this,ClientPluginBase)}return i(ClientPluginBase,[{key:"beforeJSONEncode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"afterJSONEncode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"makeRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"beforeJSONDecode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"afterJSONDecode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"exceptionCatch",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()}]),ClientPluginBase}()},function(e,t,r){"use strict";(function(e){function n(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=i.prototype):(null===e&&(e=new i(t)),e.length=t),e}function i(e,t,r){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return s(this,e,t,r)}function s(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,r,n):"string"==typeof t?l(e,t,r):p(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r,n){return a(t),t<=0?o(e,t):void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t)}function c(e,t){if(a(t),e=o(e,t<0?0:0|d(t)),!i.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function l(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!i.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(t,r);e=o(e,n);var s=e.write(t,r);return s!==n&&(e=e.slice(0,s)),e}function f(e,t){var r=t.length<0?0:0|d(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),i.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=i.prototype):e=f(e,t),e}function p(e,t){if(i.isBuffer(t)){var r=0|d(t.length);return e=o(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?o(e,0):f(e,t);if("Buffer"===t.type&&Q(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),i.alloc(+e)}function y(e,t){if(i.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return J(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(e).length;default:if(n)return J(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return P(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return C(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:_(e,t,r,n,o);if("number"==typeof t)return t&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):_(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function _(e,t,r,n,o){function i(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}var c;if(o){var l=-1;for(c=r;c<a;c++)if(i(e,c)===i(t,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*s}else-1!==l&&(c-=c-l),l=-1}else for(r+u>a&&(r=a-u),c=r;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(i(e,c+h)!==i(t,h)){f=!1;break}if(f)return c}return-1}function w(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function k(e,t,r,n){return K(J(t,e.length-r),e,r,n)}function R(e,t,r,n){return K(H(t),e,r,n)}function E(e,t,r,n){return R(e,t,r,n)}function S(e,t,r,n){return K(Y(t),e,r,n)}function O(e,t,r,n){return K(Z(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?V.fromByteArray(e):V.fromByteArray(e.slice(t,r))}function P(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i=e[o],s=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=r){var u,c,l,f;switch(a){case 1:i<128&&(s=i);break;case 2:u=e[o+1],128==(192&u)&&(f=(31&i)<<6|63&u)>127&&(s=f);break;case 3:u=e[o+1],c=e[o+2],128==(192&u)&&128==(192&c)&&(f=(15&i)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(s=f);break;case 4:u=e[o+1],c=e[o+2],l=e[o+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&i)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(s=f)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),o+=a}return j(n)}function j(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=$));return r}function T(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function C(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function A(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=z(e[i]);return o}function N(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,r,n,o,s){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function q(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function M(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function B(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,n,o){return o||B(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),G.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,o){return o||B(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),G.write(e,t,r,n,52,8),r+8}function W(e){if(e=F(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function J(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function H(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function Z(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function Y(e){return V.toByteArray(W(e))}function K(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function X(e){return e!==e}var V=r(58),G=r(63),Q=r(61);t.Buffer=i,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),i.poolSize=8192,i._augment=function(e){return e.__proto__=i.prototype,e},i.from=function(e,t,r){return s(null,e,t,r)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(e,t,r){return u(null,e,t,r)},i.allocUnsafe=function(e){return c(null,e)},i.allocUnsafeSlow=function(e){return c(null,e)},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,s=Math.min(r,n);o<s;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=i.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},i.byteLength=y,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):g.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,r,n,o){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var s=o-n,a=r-t,u=Math.min(s,a),c=this.slice(n,o),l=e.slice(t,r),f=0;f<u;++f)if(c[f]!==l[f]){s=c[f],a=l[f];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},i.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return k(this,e,t,r);case"ascii":return R(this,e,t,r);case"latin1":case"binary":return E(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;i.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(i.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=i.prototype;else{var o=t-e;n=new i(o,void 0);for(var s=0;s<o;++s)n[s]=this[s+e]}return n},i.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},i.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},i.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},i.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),G.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),G.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),G.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),G.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){L(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},i.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){L(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},i.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):q(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):q(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);L(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);L(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):q(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):q(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,s=n-r;if(this===e&&r<t&&t<n)for(o=s-1;o>=0;--o)e[o+t]=this[o+r];else if(s<1e3||!i.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},i.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=i.isBuffer(e)?e:J(new i(e,n).toString()),u=a.length;for(s=0;s<r-t;++s)this[s+t]=a[s%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(7))},function(e,t,r){"use strict";function n(e){console&&console.warn&&console.warn(e)}function o(){o.init.call(this)}function i(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function s(e,t,r,o){var s,a,u;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(a=e._events,void 0===a?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),u=a[t]),void 0===u)u=a[t]=r,++e._eventsCount;else if("function"==typeof u?u=a[t]=o?[r,u]:[u,r]:o?u.unshift(r):u.push(r),(s=i(e))>0&&u.length>s&&!u.warned){u.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=u.length,n(c)}return e}function a(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,y(this.listener,this.target,e))}function u(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=a.bind(n);return o.listener=r,n.wrapFn=o,o}function c(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?p(o):f(o,o.length)}function l(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function h(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function p(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}var d,b="object"==typeof Reflect?Reflect:null,y=b&&"function"==typeof b.apply?b.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};d=b&&"function"==typeof b.ownKeys?b.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var g=Number.isNaN||function(e){return e!==e};e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var m=10;Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(e){if("number"!=typeof e||e<0||g(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");m=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||g(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return i(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var a=o[e];if(void 0===a)return!1;if("function"==typeof a)y(a,this,t);else for(var u=a.length,c=f(a,u),r=0;r<u;++r)y(c[r],this,t);return!0},o.prototype.addListener=function(e,t){return s(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return s(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,u(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,u(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,o,i,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():h(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return c(this,e,!0)},o.prototype.rawListeners=function(e){return c(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):l.call(e,t)},o.prototype.listenerCount=l,o.prototype.eventNames=function(){return this._eventsCount>0?d(this._events):[]}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(33),l=r(1),f=r(6),h=r(90),EndpointBase=function(e){function EndpointBase(e,t,r,n){o(this,EndpointBase);var s=i(this,(EndpointBase.__proto__||Object.getPrototypeOf(EndpointBase)).call(this));return l.strictEqual(void 0===e?"undefined":a(e),"string"),l.strictEqual(void 0===t?"undefined":a(t),"string"),l.strictEqual(void 0===r?"undefined":a(r),"object"),s._strName=e,s._strPath=EndpointBase.normalizePath(t),s._objReflection=r,s._classReverseCallsClient=n,s}return s(EndpointBase,e),u(EndpointBase,[{key:"_mixTraitIntoThis",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,i=Object.getOwnPropertyNames(e.constructor.prototype)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;"function"==typeof e.constructor.prototype[s]&&"constructor"!==s&&(this.constructor.prototype[s]=e[s])}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}},{key:"path",get:function(){return this._strPath}},{key:"name",get:function(){return this._strName}},{key:"reflection",get:function(){return this._objReflection}},{key:"ReverseCallsClientClass",get:function(){return this._classReverseCallsClient}}],[{key:"_buildAPIClientSourceCode",value:function(){function e(e,t){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r,n){var o,i,s,a,u,c,f,p,d,b,y,g,m,v,_,w,k,R,E,S,O,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l("string"==typeof n,"strClassName was suposed to be of type string."),o="",i=!0,s=!1,a=void 0,e.prev=5,u=r[Symbol.iterator]();case 7:if(i=(c=u.next()).done){e.next=63;break}return f=c.value,e.next=11,(new h.TypescriptParser).parseSource(f.constructor.toString());case 11:p=e.sent,d=!0,b=!1,y=void 0,e.prev=15,g=p.declarations[0].methods[Symbol.iterator]();case 17:if(d=(m=g.next()).done){e.next=46;break}if(v=m.value,v.name.startsWith("_")||"constructor"===v){e.next=43;break}for(_=[],"incomingRequest"!==v.parameters[0].name&&(console.error("Error. First parameter of "+f.constructor.name+"."+v.name+"() is not incomingRequest. That param is mandatory for API exported functions."),t.exit(1)),v.parameters.splice(0,1),w=!0,k=!1,R=void 0,e.prev=26,E=v.parameters[Symbol.iterator]();!(w=(S=E.next()).done);w=!0)O=S.value,"{"===O.startCharacter?_.push("objDestructuringParam_"+O.name.replace(/[^A-Za-z0-9_]+/g,"__")+"={}"):_.push(O.name);e.next=34;break;case 30:e.prev=30,e.t0=e.catch(26),k=!0,R=e.t0;case 34:e.prev=34,e.prev=35,!w&&E.return&&E.return();case 37:if(e.prev=37,!k){e.next=40;break}throw R;case 40:return e.finish(37);case 41:return e.finish(34);case 42:o+=("\n\t\t\t\t\t\tasync "+v.name+"("+_.join(", ")+')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.rpc("'+v.name+'", [...arguments]);\n\t\t\t\t\t\t}\n\t\t\t\t\t').replace(/^\t{5}/gm,"");case 43:d=!0,e.next=17;break;case 46:e.next=52;break;case 48:e.prev=48,e.t1=e.catch(15),b=!0,y=e.t1;case 52:e.prev=52,e.prev=53,!d&&g.return&&g.return();case 55:if(e.prev=55,!b){e.next=58;break}throw y;case 58:return e.finish(55);case 59:return e.finish(52);case 60:i=!0,e.next=7;break;case 63:e.next=69;break;case 65:e.prev=65,e.t2=e.catch(5),s=!0,a=e.t2;case 69:e.prev=69,e.prev=70,!i&&u.return&&u.return();case 72:if(e.prev=72,!s){e.next=75;break}throw a;case 75:return e.finish(72);case 76:return e.finish(69);case 77:return x=('\n\t\t\tconst JSONRPC = require("jsonrpc-bidirectional");\n\t\t\tclass '+n+" extends JSONRPC.Client\n\t\t\t{\n\t\t\t\t_INSERT_METHODS_HERE_\n\t\t\t};\n\t\t\tmodule.exports = "+n+";\n\t\t").replace(/^\t{3}/gm,"").replace("_INSERT_METHODS_HERE_",o),e.abrupt("return",x);case 79:case"end":return e.stop()}},e,this,[[5,65,69,77],[15,48,52,60],[26,30,34,42],[35,,37,41],[53,,55,59],[70,,72,76]])}));return e}()},{key:"normalizePath",value:function(e){var t=c.parse(e),r=t.pathname?t.pathname.trim():"/";return r.length&&"/"===r.substr(-1)||(r+="/"),"/"!==r.substr(0,1)&&(r="/"+r),r}}]),EndpointBase}(f);e.exports=EndpointBase}).call(t,r(0))},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);c.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||s.nextTick(i,this)}function i(e){e.end()}var s=r(19),a=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=n;var u=r(16);u.inherits=r(9);var c=r(29),l=r(24);u.inherits(n,c);for(var f=a(l.prototype),h=0;h<f.length;h++){var p=f[h];n.prototype[p]||(n.prototype[p]=l.prototype[p])}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),n.prototype._destroy=function(e,t){this.push(null),this.end(),s.nextTick(t,e)}},function(e,t,r){"use strict";(function(t){var n={};n.Cache=r(41),n.DebugLogger=r(42),n.PrettyBrowserConsoleErrors=r(44),n.SignatureAdd=r(46),n.WebSocketTransport=r(48),n.WorkerTransport=r(50),n.ProcessStdIOTransport=r(45),n.WebRTCTransport=r(47),n.ElectronIPCTransport=r(43),t&&parseInt(t.version.replace("v","").split(".",2)[0])>=10&&(n.WorkerThreadTransport=r(49)),e.exports=n}).call(t,r(0))},function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();e.exports=function(){function ServerPluginBase(){o(this,ServerPluginBase)}return i(ServerPluginBase,[{key:"beforeJSONDecode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"afterJSONDecode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"callFunction",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"result",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"exceptionCatch",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"response",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"afterSerialize",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()}]),ServerPluginBase}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(1),JSONRPC={};JSONRPC.EndpointBase=r(8),JSONRPC.Exception=r(3);var a=r(33),u=a.URL,c=r(23);e.exports=function(){function e(){n(this,e),this._bAuthenticated=!1,this._bAuthorized=!1,this._mxRequestBody=null,this._requestObject=null,this._endpoint=null,this._router=null,this._mxResult=null,this._objResponseToBeSerialized=null,this._mxResultSerialized=null,this._bMethodCalled=!1,this._nConnectionID=null,this._classClient=null,this._objHeaders={},this._strRemoteAddress="",this._strLocalAddress="",this._objHTTPIncomingMessage=null,this._objHTTPServerResponse=null,this._objSession={},this._bStackInErrorMessage=!1,this._nUnixTimeMilliseconds=0,Object.seal(this)}return i(e,[{key:"addHTTPResponseHeaders",value:function(e){if(void 0===this.httpServerResponse||null===this.httpServerResponse)throw new Error("Error when trying to add HTTP response headers. The httpServerResponse is not set on the IncomingRequest instance.");if("object"!==(void 0===e?"undefined":o(e)))throw new TypeError('Invalid type "'+(void 0===e?"undefined":o(e))+'" for extraResponseHeaders set on incomingRequest. Expected "object".');for(var t in e){if(t!==t.toLowerCase())throw new TypeError("Invalid extra response header key "+t+". Keys must be lowercased.");var r=e[t];if("string"!=typeof r)throw new TypeError("Invalid extra response header value "+JSON.stringify(r)+" for key "+t+". Only string values are allowed.");if(r=c.unescape(r),r.includes("\n")||r.includes("\r"))throw new Error("Invalid extra response header value "+JSON.stringify(r)+".")}for(var n in e)this.httpServerResponse.setHeader(n,e[n])}},{key:"setRedirectURL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:307;if(e.includes("\n\t\r"))throw new TypeError("Invalid redirect URL "+JSON.stringify(e));s(Number.isInteger(t)&&t>=300&&t<=399,"Invalid redirect HTTP status code. Expected a number between 300 and 399, but got "+JSON.stringify(t)+".");var r=new u(e);this.addHTTPResponseHeaders({location:r.toString()}),this.httpServerResponse.statusCode=t}},{key:"toResponseObject",value:function(){var e={id:null,jsonrpc:"2.0"};if(this.callResult instanceof Error){var t=void 0;this.callResult.data?(this.callResult instanceof JSONRPC.Exception||"object"===o(this.callResult.data))&&(t=this.callResult.data,t.stack||Object.isSealed(this.callResult.data)&&(t=JSON.parse(JSON.stringify(this.callResult.data)))):t={},t.stack||(t.stack=this.callResult.stack.split(/[\r\n]+/gm)),e.error={message:this.callResult.message+(this.stackInErrorMessage?" "+this.callResult.stack:""),code:this.callResult instanceof JSONRPC.Exception?this.callResult.code:0,data:t}}else e.result=void 0===this.callResult?null:this.callResult,"function"==typeof e.result&&(delete e.result,e.error={message:"Disallowed attempt to return a function definition through JSONRPC as a return value for this request: "+this._mxRequestBody+". The original function succeeded, however this error is returned.",code:JSONRPC.Exception.INTERNAL_ERROR,data:{stack:(new Error).stack.split(/[\r\n]+/gm)}});return null!==this._requestObject&&"object"===o(this._requestObject)&&this._requestObject.hasOwnProperty("id")&&(e.id=this._requestObject.id),e}},{key:"startDurationTimer",value:function(){this._nUnixTimeMilliseconds=(new Date).getTime()}},{key:"isAuthenticated",get:function(){return this._bAuthenticated},set:function(e){s("boolean"==typeof e,"bAuthenticated must be of type boolean."),this._bAuthenticated=e}},{key:"connectionID",get:function(){return this._nConnectionID},set:function(e){s("number"==typeof e&&parseInt(e,10)===e,"Connection ID must be an integer."),this._nConnectionID=e}},{key:"isAuthorized",get:function(){return this._bAuthorized},set:function(e){s("boolean"==typeof e,"bAuthorized must be of type boolean."),this._bAuthorized=e}},{key:"requestBody",get:function(){return this._mxRequestBody},set:function(e){this._mxRequestBody=e}},{key:"requestHTTPGetQuery",get:function(){if(void 0===this.httpIncomingMessage||null===this.httpIncomingMessage)return null;var e=this.httpIncomingMessage.url;return e.includes("?")&&(e=e.split("?")[1]),c.parse(e)}},{key:"requestHTTPMethod",get:function(){return void 0===this.httpIncomingMessage||null===this.httpIncomingMessage?null:this.httpIncomingMessage.method}},{key:"requestObject",get:function(){return this._requestObject},set:function(e){s("object"===(void 0===e?"undefined":o(e))||Array.isArray(e),"objRequest must be of type Array or Object."),this._requestObject=e}},{key:"isNotification",get:function(){return null!==this._requestObject&&"object"===o(this._requestObject)&&!this.requestObject.hasOwnProperty("id")}},{key:"endpoint",get:function(){return this._endpoint},set:function(e){s(e instanceof JSONRPC.EndpointBase,"endpoint must extend JSONRPC.EndpointBase"),this._endpoint=e}},{key:"router",set:function(e){this._router=e}},{key:"reverseCallsClient",get:function(){return null===this._classClient&&null!==this.connectionID&&this.endpoint&&this.endpoint.ReverseCallsClientClass&&(this._classClient=this._router.connectionIDToSingletonClient(this.connectionID,this.endpoint.ReverseCallsClientClass)),this._classClient}},{key:"isMethodCalled",get:function(){return this._bMethodCalled},set:function(e){s("boolean"==typeof e,"bMethodCalled must be of type boolean."),this._bMethodCalled=e}},{key:"callResult",get:function(){return this._mxResult},set:function(e){this.isMethodCalled=!0,this._mxResult=e}},{key:"callResultToBeSerialized",get:function(){return this._objResponseToBeSerialized},set:function(e){this._objResponseToBeSerialized=e}},{key:"callResultSerialized",get:function(){return this._mxResultSerialized},set:function(e){this._mxResultSerialized=e}},{key:"stackInErrorMessage",get:function(){return this._bStackInErrorMessage},set:function(e){this._bStackInErrorMessage=e}},{key:"httpServerResponse",get:function(){return this._objHTTPServerResponse||null},set:function(e){if("object"!==(void 0===e?"undefined":o(e)))throw new TypeError("Invalid type "+(void 0===e?"undefined":o(e))+" for httpServerResponse property in "+this.constructor.name+'. Expected "object".');this._objHTTPServerResponse=e}},{key:"httpIncomingMessage",get:function(){return this._objHTTPIncomingMessage||null},set:function(e){if("object"!==(void 0===e?"undefined":o(e)))throw new TypeError("Invalid type "+(void 0===e?"undefined":o(e))+" for httpServerResponse property in "+this.constructor.name+'. Expected "object".');this._objHTTPIncomingMessage=e}},{key:"headers",get:function(){return this._objHeaders},set:function(e){this._objHeaders=e}},{key:"session",get:function(){return this._objSession},set:function(e){if("object"!==(void 0===e?"undefined":o(e)))throw new TypeError('Invalid set value of type "'+(void 0===e?"undefined":o(e))+'" for session. Expected "object"');this._objSession=e}},{key:"remoteAddress",get:function(){return!this.httpIncomingMessage||void 0!==this._strRemoteAddress&&null!==this._strRemoteAddress||(this._strRemoteAddress=this.httpIncomingMessage.socket.remoteAddress),this._strRemoteAddress},set:function(e){this._strRemoteAddress=e}},{key:"localAddress",get:function(){return!this.httpIncomingMessage||void 0!==this._strLocalAddress&&null!==this._strLocalAddress||(this._strLocalAddress=this.httpIncomingMessage.socket.localAddress),this._strLocalAddress},set:function(e){this._strLocalAddress=e}},{key:"durationMilliseconds",get:function(){return this._nUnixTimeMilliseconds?(new Date).getTime()-this._nUnixTimeMilliseconds:0}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),JSONRPC={Server:r(15)},c=r(6);e.exports=function(e){function RouterBase(e){n(this,RouterBase);var t=o(this,(RouterBase.__proto__||Object.getPrototypeOf(RouterBase)).call(this));return u(null===e||e instanceof JSONRPC.Server,"jsonrpcServer must be either null or an instance or subclass of JSONRPC.Server."),t._jsonrpcServer=e,t._nConnectionIDCounter=0,t._objSessions={},t}return i(RouterBase,e),a(RouterBase,[{key:"connectionIDToSingletonClient",value:function(e,t){if(u("number"==typeof e,"nConnectionID must be a number. Received this: "+JSON.stringify(e)),u("function"==typeof t,"Invalid ClientClass value: "+(void 0===t?"undefined":s(t))),!this._objSessions.hasOwnProperty(e))throw new Error("Connection "+JSON.stringify(e)+" not found in router.");return null===this._objSessions[e].clientReverseCalls?this._objSessions[e].clientReverseCalls=this._makeReverseCallsClient(t,this._objSessions[e]):u(this._objSessions[e].clientReverseCalls instanceof t,"clientReverseCalls already initialized with a different JSONRPC.Client subclass."),this._objSessions[e].clientReverseCalls}},{key:"onConnectionEnded",value:function(e){delete this._objSessions[e]}},{key:"_makeReverseCallsClient",value:function(e,t){throw new Error("Must implement.")}}]),RouterBase}(c)},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.Exception=r(3),JSONRPC.IncomingRequest=r(13),JSONRPC.Utils=r(2),JSONRPC.EndpointBase=r(8);var c=r(6),l=r(1);e.exports=function(e){function Server(){o(this,Server);var e=i(this,(Server.__proto__||Object.getPrototypeOf(Server)).call(this));return e._arrPlugins=[],e._objEndpoints={},Object.seal(e),e}return s(Server,e),u(Server,[{key:"attachToHTTPServer",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t,r,o){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=!!o,l("string"==typeof r,"strRootPath must be of type string, received "+(void 0===r?"undefined":a(r))),r=JSONRPC.EndpointBase.normalizePath(r),t.on("request",function(){var e=n(regeneratorRuntime.mark(function e(t,n){var s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=JSONRPC.EndpointBase.normalizePath(t.url),s.substr(0,r.length)===r){e.next=3;break}return e.abrupt("return");case 3:if("OPTIONS"!==t.method){e.next=7;break}return n.status=204,n.end(),e.abrupt("return");case 7:if(!t.headers["sec-websocket-version"]){e.next=14;break}if(!o){e.next=10;break}return e.abrupt("return");case 10:return console.error("Received websocket upgrade request, yet not sharing the HTTP connection with a WebSocket."),n.statusCode=403,n.end(),e.abrupt("return");case 14:return e.prev=14,e.next=17,i.processHTTPRequest(t,n);case 17:return u=e.sent,e.next=20,i.processRequest(u);case 20:u.callResult instanceof Error?("number"!=typeof n.statusCode||n.statusCode<500||n.statusCode>599)&&(n.statusCode=500):u.isNotification?n.statusCode=204:n.statusCode=n.statusCode||200,u.isNotification||(n.setHeader("Content-Type","application/json"),"object"===a(u.callResultSerialized)?n.write(JSON.stringify(u.callResultSerialized,void 0,"\t")):n.write(u.callResultSerialized)),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(14),n.statusCode=500,console.error(e.t0);case 28:n.end();case 29:case"end":return e.stop()}},e,i,[[14,24]])}));return function(t,r){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"registerEndpoint",value:function(e){if(this._objEndpoints.hasOwnProperty(e.path)){if(this._objEndpoints[e.path]!==e)throw new Error("Another JSONRPC endpoint is registered at the same path: "+e.path)}else this._objEndpoints[e.path]=e}},{key:"unregisterEndpoint",value:function(e){if(this._objEndpoints.hasOwnProperty(e))return delete this._objEndpoints[e],!0}},{key:"addPlugin",value:function(e){this._arrPlugins.includes(e)||this._arrPlugins.push(e)}},{key:"removePlugin",value:function(e){this._arrPlugins.includes(e)&&this._arrPlugins.splice(this._arrPlugins.findIndex(function(t){return e===t}),1)}},{key:"processHTTPRequest",value:function(){function e(e,t){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r,n){var o,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=new JSONRPC.IncomingRequest,e.prev=1,"POST"!==r.method){e.next=9;break}return i=[],e.next=6,new Promise(function(e,o){r.on("error",o),n.on("error",o),r.on("end",function(){e(t.concat(i).toString())}),r.on("data",function(e){i.push(e)})});case 6:o.requestBody=e.sent,e.next=11;break;case 9:if("GET"===r.method){e.next=11;break}throw new Error("JSONRPC does not handle HTTP "+r.method+" requests.");case 11:if(o.httpIncomingMessage=r,o.httpServerResponse=n,o.headers=r.headers,o.remoteAddress=r.socket.remoteAddress,o.localAddress=r.socket.localAddress,s=JSONRPC.EndpointBase.normalizePath(r.url),this._objEndpoints.hasOwnProperty(s)){e.next=19;break}throw new JSONRPC.Exception("Unknown JSONRPC endpoint "+s+".",JSONRPC.Exception.METHOD_NOT_FOUND);case 19:o.endpoint=this._objEndpoints[s],e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),o.callResult=e.t0;case 25:return e.abrupt("return",o);case 26:case"end":return e.stop()}},e,this,[[1,22]])}));return e}()},{key:"processRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r,n,o,i,s,u,c,l,f,h,p,d,b,y,g,m,v,_,w,k,R,E,S,O,x,P,j,T,C,A,N,I,L,q,M,B,U,D,W,F,z,J;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.isMethodCalled){e.next=112;break}this.emit("beforeJSONDecode",t),r=!0,n=!1,o=void 0,e.prev=6,i=this._arrPlugins[Symbol.iterator]();case 8:if(r=(s=i.next()).done){e.next=15;break}return u=s.value,e.next=12,u.beforeJSONDecode(t);case 12:r=!0,e.next=8;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),n=!0,o=e.t0;case 21:e.prev=21,e.prev=22,!r&&i.return&&i.return();case 24:if(e.prev=24,!n){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:t.requestObject||(t.requestObject=JSONRPC.Utils.jsonDecodeSafe(t.requestBody)),this.emit("afterJSONDecode",t),c=!0,l=!1,f=void 0,e.prev=34,h=this._arrPlugins[Symbol.iterator]();case 36:if(c=(p=h.next()).done){e.next=43;break}return d=p.value,e.next=40,d.afterJSONDecode(t);case 40:c=!0,e.next=36;break;case 43:e.next=49;break;case 45:e.prev=45,e.t1=e.catch(34),l=!0,f=e.t1;case 49:e.prev=49,e.prev=50,!c&&h.return&&h.return();case 52:if(e.prev=52,!l){e.next=55;break}throw f;case 55:return e.finish(52);case 56:return e.finish(49);case 57:if(t.requestObject&&"object"===a(t.requestObject)){e.next=59;break}throw new JSONRPC.Exception("Missing JSONRPC 2.0 request object, and no plugins have provided one in the beforeJSONDecode or afterJSONDecode methods.",JSONRPC.Exception.PARSE_ERROR);case 59:if(!Array.isArray(t.requestObject)){e.next=61;break}throw new JSONRPC.Exception("Batch requests are not supported by this JSON-RPC server.",JSONRPC.Exception.INTERNAL_ERROR);case 61:if(t.requestObject.hasOwnProperty("params")){e.next=65;break}t.requestObject.params=[],e.next=71;break;case 65:if(Array.isArray(t.requestObject.params)){e.next=71;break}if("object"!==a(t.requestObject.params)){e.next=70;break}throw new JSONRPC.Exception("Named params are not supported by this server.",JSONRPC.Exception.INTERNAL_ERROR);case 70:throw new JSONRPC.Exception("The params property has invalid data type, per JSON-RPC 2.0 specification. Unexpected type: "+a(t.requestObject.params)+".",JSONRPC.Exception.INVALID_REQUEST);case 71:if(t.isAuthenticated){e.next=73;break}throw new JSONRPC.Exception("Not authenticated; calling method name: "+t.requestObject.method,JSONRPC.Exception.NOT_AUTHENTICATED);case 73:if(t.isAuthorized){e.next=75;break}throw new JSONRPC.Exception("Not authorized; calling method name: "+t.requestObject.method,JSONRPC.Exception.NOT_AUTHORIZED);case 75:if(!t.requestObject.method.startsWith("_")){e.next=77;break}throw new JSONRPC.Exception("Method "+JSON.stringify(t.requestObject.method)+" not found on endpoint "+JSON.stringify(t.endpoint.path)+".",JSONRPC.Exception.METHOD_NOT_FOUND);case 77:t.isMethodCalled||this.emit("callFunction",t),b=!0,y=!1,g=void 0,e.prev=81,m=this._arrPlugins[Symbol.iterator]();case 83:if(b=(v=m.next()).done){e.next=92;break}if(_=v.value,!t.isMethodCalled){e.next=87;break}return e.abrupt("break",92);case 87:return e.next=89,_.callFunction(t);case 89:b=!0,e.next=83;break;case 92:e.next=98;break;case 94:e.prev=94,e.t2=e.catch(81),y=!0,g=e.t2;case 98:e.prev=98,e.prev=99,!b&&m.return&&m.return();case 101:if(e.prev=101,!y){e.next=104;break}throw g;case 104:return e.finish(101);case 105:return e.finish(98);case 106:if(t.isMethodCalled){e.next=112;break}if("function"==typeof t.endpoint[t.requestObject.method]){e.next=109;break}throw new JSONRPC.Exception("Method "+JSON.stringify(t.requestObject.method)+" not found on endpoint "+JSON.stringify(t.endpoint.path)+".",JSONRPC.Exception.METHOD_NOT_FOUND);case 109:return e.next=111,t.endpoint[t.requestObject.method].apply(t.endpoint,[t].concat(t.requestObject.params));case 111:t.callResult=e.sent;case 112:e.next=117;break;case 114:e.prev=114,e.t3=e.catch(0),t.callResult=e.t3;case 117:if(!(t.callResult instanceof Error)){e.next=147;break}this.emit("exceptionCatch",t),w=!0,k=!1,R=void 0,e.prev=122,E=this._arrPlugins[Symbol.iterator]();case 124:if(w=(S=E.next()).done){e.next=131;break}return O=S.value,e.next=128,O.exceptionCatch(t);case 128:w=!0,e.next=124;break;case 131:e.next=137;break;case 133:e.prev=133,e.t4=e.catch(122),k=!0,R=e.t4;case 137:e.prev=137,e.prev=138,!w&&E.return&&E.return();case 140:if(e.prev=140,!k){e.next=143;break}throw R;case 143:return e.finish(140);case 144:return e.finish(137);case 145:e.next=174;break;case 147:this.emit("result",t),x=!0,P=!1,j=void 0,e.prev=151,T=this._arrPlugins[Symbol.iterator]();case 153:if(x=(C=T.next()).done){e.next=160;break}return A=C.value,e.next=157,A.result(t);case 157:x=!0,e.next=153;break;case 160:e.next=166;break;case 162:e.prev=162,e.t5=e.catch(151),P=!0,j=e.t5;case 166:e.prev=166,e.prev=167,!x&&T.return&&T.return();case 169:if(e.prev=169,!P){e.next=172;break}throw j;case 172:return e.finish(169);case 173:return e.finish(166);case 174:t.callResultToBeSerialized=t.toResponseObject(),this.emit("response",t),N=!0,I=!1,L=void 0,e.prev=179,q=this._arrPlugins[Symbol.iterator]();case 181:if(N=(M=q.next()).done){e.next=188;break}return B=M.value,e.next=185,B.response(t);case 185:N=!0,e.next=181;break;case 188:e.next=194;break;case 190:e.prev=190,e.t6=e.catch(179),I=!0,L=e.t6;case 194:e.prev=194,e.prev=195,!N&&q.return&&q.return();case 197:if(e.prev=197,!I){e.next=200;break}throw L;case 200:return e.finish(197);case 201:return e.finish(194);case 202:null===t.callResultSerialized&&(t.callResultSerialized=JSON.stringify(t.callResultToBeSerialized,void 0,"\t")),this.emit("afterSerialize",t),U=!0,D=!1,W=void 0,e.prev=207,F=this._arrPlugins[Symbol.iterator]();case 209:if(U=(z=F.next()).done){e.next=216;break}return J=z.value,e.next=213,J.afterSerialize(t);case 213:U=!0,e.next=209;break;case 216:e.next=222;break;case 218:e.prev=218,e.t7=e.catch(207),D=!0,W=e.t7;case 222:e.prev=222,e.prev=223,!U&&F.return&&F.return();case 225:if(e.prev=225,!D){e.next=228;break}throw W;case 228:return e.finish(225);case 229:return e.finish(222);case 230:case"end":return e.stop()}},e,this,[[0,114],[6,17,21,29],[22,,24,28],[34,45,49,57],[50,,52,56],[81,94,98,106],[99,,101,105],[122,133,137,145],[138,,140,144],[151,162,166,174],[167,,169,173],[179,190,194,202],[195,,197,201],[207,218,222,230],[223,,225,229]])}));return e}()},{key:"endpoints",get:function(){return this._objEndpoints}}]),Server}(c)}).call(t,r(5).Buffer)},function(e,t,r){(function(e){function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===y(e)}function n(e){return"boolean"==typeof e}function o(e){return null===e}function i(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return"[object RegExp]"===y(e)}function f(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===y(e)}function p(e){return"[object Error]"===y(e)||e instanceof Error}function d(e){return"function"==typeof e}function b(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function y(e){return Object.prototype.toString.call(e)}t.isArray=r,t.isBoolean=n,t.isNull=o,t.isNullOrUndefined=i,t.isNumber=s,t.isString=a,t.isSymbol=u,t.isUndefined=c,t.isRegExp=l,t.isObject=f,t.isDate=h,t.isError=p,t.isFunction=d,t.isPrimitive=b,t.isBuffer=e.isBuffer}).call(t,r(5).Buffer)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(n)},u=r(6);e.exports=function(e){function WebSocketWrapperBase(e,t){n(this,WebSocketWrapperBase);var r=o(this,(WebSocketWrapperBase.__proto__||Object.getPrototypeOf(WebSocketWrapperBase)).call(this));return r._webSocket=e,r}return i(WebSocketWrapperBase,e),s(WebSocketWrapperBase,[{key:"on",value:function(e,t){return this._webSocket.on(e,t)}},{key:"superOn",value:function(e,t){return a(WebSocketWrapperBase.prototype.__proto__||Object.getPrototypeOf(WebSocketWrapperBase.prototype),"on",this).call(this,e,t)}},{key:"send",value:function(e){for(var t,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return(t=this._webSocket).send.apply(t,[e].concat(n))}},{key:"close",value:function(e,t){return this._webSocket.close(e,t)}},{key:"terminate",value:function(){return this._webSocket.terminate()}},{key:"ping",value:function(){var e;return(e=this._webSocket).ping.apply(e,arguments)}},{key:"pong",value:function(){var e;return(e=this._webSocket).pong.apply(e,arguments)}},{key:"url",get:function(){return this._webSocket.url}},{key:"socket",get:function(){return this._webSocket.socket}},{key:"readyState",get:function(){return this._webSocket.readyState}},{key:"protocol",get:function(){return this._webSocket.protocol}},{key:"protocolVersion",get:function(){return this._webSocket.protocolVersion}}],[{key:"CONNECTING",get:function(){return 0}},{key:"OPEN",get:function(){return 1}},{key:"CLOSING",get:function(){return 2}},{key:"CLOSED",get:function(){return 3}}]),WebSocketWrapperBase}(u)},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var o in r)n(r,o)&&(e[o]=r[o])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,o){if(t.subarray&&e.subarray)return void e.set(t.subarray(r,r+n),o);for(var i=0;i<n;i++)e[o+i]=t[r+i]},flattenChunks:function(e){var t,r,n,o,i,s;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(s=new Uint8Array(n),o=0,t=0,r=e.length;t<r;t++)i=e[t],s.set(i,o),o+=i.length;return s}},s={arraySet:function(e,t,r,n,o){for(var i=0;i<n;i++)e[o+i]=t[r+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(o)},function(e,t,r){"use strict";(function(t){function r(e,r,n,o){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r)});case 3:return t.nextTick(function(){e.call(null,r,n)});case 4:return t.nextTick(function(){e.call(null,r,n,o)});default:for(i=new Array(a-1),s=0;s<i.length;)i[s++]=arguments[s];return t.nextTick(function(){e.apply(null,i)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:r}:e.exports=t}).call(t,r(0))},function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return s(e,t,r)}var i=r(5),s=i.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=i:(n(i,t),t.Buffer=o),n(s,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=s(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(t,r){t.exports=e},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.Exception=r(3),JSONRPC.Plugins={},JSONRPC.Plugins.Client=r(11),JSONRPC.Utils=r(2),JSONRPC.OutgoingRequest=r(40);var u=r(6),c=r(91),l=r(1);e.exports=function(e){function Client(e,t){o(this,Client);var r=i(this,(Client.__proto__||Object.getPrototypeOf(Client)).call(this));return r._arrPlugins=[],r._strJSONRPCEndpointURL=e,r._nCallID=1,r._strHTTPUser=null,r._strHTTPPassword=null,r._strBase64BasicAuthentication=null,r._objFetchOptions=t,r}return s(Client,e),a(Client,[{key:"setHTTPCredentials",value:function(e,r){this._strHTTPUser=e,this._strHTTPPassword=r,this._strBase64BasicAuthentication=new t(e+":"+r).toString("base64")}},{key:"rpc",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r,n,o,i,s,a,u,f,h,p,d,b,y,g,m,v,_,w,k,R,E,S,O,x,P,j,T,C,A,N,I,L,q,M,B,U,D,W,F,z,J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],H=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l("boolean"==typeof H,"bNotification must be of type boolean."),l(Array.isArray(J),"arrParams must be an Array."),l(Array.isArray(Z),"arrTransferList must be an Array."),r=new JSONRPC.OutgoingRequest(t,J,H?void 0:this._nCallID,Z),this._nCallID++,e.prev=5,r.endpointURL=this.endpointURL,r.headers["Content-Type"]="application/json",null!==this.httpUser&&null!==this.httpPassword&&(r.headers.Authorization="Basic "+this._strBase64BasicAuthentication),r.requestObject=r.toRequestObject(),this.emit("beforeJSONEncode",r),n=!0,o=!1,i=void 0,e.prev=14,s=this._arrPlugins[Symbol.iterator]();case 16:if(n=(a=s.next()).done){e.next=23;break}return u=a.value,e.next=20,u.beforeJSONEncode(r);case 20:n=!0,e.next=16;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(14),o=!0,i=e.t0;case 29:e.prev=29,e.prev=30,!n&&s.return&&s.return();case 32:if(e.prev=32,!o){e.next=35;break}throw i;case 35:return e.finish(32);case 36:return e.finish(29);case 37:null===r.requestBody&&(r.requestBody=JSON.stringify(r.requestObject,null,"\t")),this.emit("afterJSONEncode",r),f=!0,h=!1,p=void 0,e.prev=42,d=this._arrPlugins[Symbol.iterator]();case 44:if(f=(b=d.next()).done){e.next=51;break}return y=b.value,e.next=48,y.afterJSONEncode(r);case 48:f=!0,e.next=44;break;case 51:e.next=57;break;case 53:e.prev=53,e.t1=e.catch(42),h=!0,p=e.t1;case 57:e.prev=57,e.prev=58,!f&&d.return&&d.return();case 60:if(e.prev=60,!h){e.next=63;break}throw p;case 63:return e.finish(60);case 64:return e.finish(57);case 65:r.isMethodCalled||this.emit("makeRequest",r),g=!0,m=!1,v=void 0,e.prev=69,_=this._arrPlugins[Symbol.iterator]();case 71:if(g=(w=_.next()).done){e.next=80;break}if(k=w.value,!r.isMethodCalled){e.next=75;break}return e.abrupt("break",80);case 75:return e.next=77,k.makeRequest(r);case 77:g=!0,e.next=71;break;case 80:e.next=86;break;case 82:e.prev=82,e.t2=e.catch(69),m=!0,v=e.t2;case 86:e.prev=86,e.prev=87,!g&&_.return&&_.return();case 89:if(e.prev=89,!m){e.next=92;break}throw v;case 92:return e.finish(89);case 93:return e.finish(86);case 94:if(R=null,E=!1,r.isMethodCalled){e.next=110;break}return S=new(c.Request?c.Request:Request)(r.endpointURL,{method:"POST",mode:"cors",headers:new(c.Headers?c.Headers:Headers)(r.headers),body:r.requestBody,cache:"no-cache",credentials:"include"}),e.next=100,c(S,this._objFetchOptions);case 100:if(R=e.sent,E=!R.ok,R.ok||0!==parseInt(R.status,10)){e.next=107;break}r.responseObject={jsonrpc:Client.JSONRPC_VERSION,error:{code:JSONRPC.Exception.NETWORK_ERROR,message:"Network error. The internet connection may have failed."},id:r.callID},r.responseBody=JSON.stringify(r.responseObject,void 0,"\t"),e.next=110;break;case 107:return e.next=109,R.text();case 109:r.responseBody=e.sent;case 110:H&&(r.responseObject={jsonrpc:Client.JSONRPC_VERSION,result:null},r.responseBody=JSON.stringify(r.responseObject,void 0,"\t")),this.emit("beforeJSONDecode",r),O=!0,x=!1,P=void 0,e.prev=115,j=this._arrPlugins[Symbol.iterator]();case 117:if(O=(T=j.next()).done){e.next=124;break}return C=T.value,e.next=121,C.beforeJSONDecode(r);case 121:O=!0,e.next=117;break;case 124:e.next=130;break;case 126:e.prev=126,e.t3=e.catch(115),x=!0,P=e.t3;case 130:e.prev=130,e.prev=131,!O&&j.return&&j.return();case 133:if(e.prev=133,!x){e.next=136;break}throw P;case 136:return e.finish(133);case 137:return e.finish(130);case 138:null!==r.responseObject&&void 0!==r.responseObject||(r.responseObject=JSONRPC.Utils.jsonDecodeSafe(r.responseBody)),this.emit("afterJSONDecode",r),A=!0,N=!1,I=void 0,e.prev=143,L=this._arrPlugins[Symbol.iterator]();case 145:if(A=(q=L.next()).done){e.next=152;break}return M=q.value,e.next=149,M.afterJSONDecode(r);case 149:A=!0,e.next=145;break;case 152:e.next=158;break;case 154:e.prev=154,e.t4=e.catch(143),N=!0,I=e.t4;case 158:e.prev=158,e.prev=159,!A&&L.return&&L.return();case 161:if(e.prev=161,!N){e.next=164;break}throw I;case 164:return e.finish(161);case 165:return e.finish(158);case 166:r.responseObject.hasOwnProperty("error")?r.responseObject.error.hasOwnProperty("message")&&"string"==typeof r.responseObject.error.message&&r.responseObject.error.hasOwnProperty("code")&&"number"==typeof r.responseObject.error.code?r.callResult=new JSONRPC.Exception(r.responseObject.error.message,r.responseObject.error.code,r.responseObject.error.data?r.responseObject.error.data:{}):r.callResult=new JSONRPC.Exception("Invalid error object on JSONRPC protocol response. Response: "+JSON.stringify(r.responseObject),JSONRPC.Exception.INTERNAL_ERROR):r.responseObject.hasOwnProperty("result")?r.callResult=r.responseObject.result:E=!0,!E||r.callResult instanceof Error||(r.callResult=new JSONRPC.Exception("Invalid error object on JSONRPC protocol response. Response object: "+JSON.stringify(r.responseObject)+". HTTP response class instance: "+JSON.stringify(R)+".",JSONRPC.Exception.INTERNAL_ERROR)),e.next=173;break;case 170:e.prev=170,e.t5=e.catch(5),r.callResult=e.t5;case 173:if(!(r.callResult instanceof Error)){e.next=202;break}this.emit("exceptionCatch",r),B=!0,U=!1,D=void 0,e.prev=178,W=this._arrPlugins[Symbol.iterator]();case 180:if(B=(F=W.next()).done){e.next=187;break}return z=F.value,e.next=184,z.exceptionCatch(r);case 184:B=!0,e.next=180;break;case 187:e.next=193;break;case 189:e.prev=189,e.t6=e.catch(178),U=!0,D=e.t6;case 193:e.prev=193,e.prev=194,!B&&W.return&&W.return();case 196:if(e.prev=196,!U){e.next=199;break}throw D;case 199:return e.finish(196);case 200:return e.finish(193);case 201:throw r.callResult;case 202:return e.abrupt("return",r.callResult);case 203:case"end":return e.stop()}},e,this,[[5,170],[14,25,29,37],[30,,32,36],[42,53,57,65],[58,,60,64],[69,82,86,94],[87,,89,93],[115,126,130,138],[131,,133,137],[143,154,158,166],[159,,161,165],[178,189,193,201],[194,,196,200]])}));return e}()},{key:"addPlugin",value:function(e){this._arrPlugins.includes(e)||this._arrPlugins.push(e)}},{key:"removePlugin",value:function(e){this._arrPlugins.includes(e)&&this._arrPlugins.splice(this._arrPlugins.findIndex(function(t){return e===t}),1)}},{key:"rpcFunctions",value:function(){return this.rpc("rpc.functions",[].slice.call(arguments))}},{key:"rpcReflectionFunction",value:function(e){return this.rpc("rpc.reflectionFunction",[e])}},{key:"rpcReflectionFunctions",value:function(e){return this.rpc("rpc.reflectionFunctions",[e])}},{key:"rpcAllowedCrossSiteXHRSubdomains",value:function(){return this.rpc("rpc.allowedCrossSiteXHRSubdomains",[])}},{key:"enableLogging",value:function(){this._consoleLoggerPlugin||(this._consoleLoggerPlugin=new JSONRPC.Plugins.Client.DebugLogger),this.addPlugin(this._consoleLoggerPlugin)}},{key:"disableLogging",value:function(){this._consoleLoggerPlugin&&this.removePlugin(this._consoleLoggerPlugin)}},{key:"endpointURL",get:function(){return this._strJSONRPCEndpointURL}},{key:"plugins",get:function(){return this._arrPlugins}},{key:"callID",get:function(){return this._nCallID}},{key:"httpUser",get:function(){return this._strHTTPUser}},{key:"httpPassword",get:function(){return this._strHTTPPassword}}],[{key:"JSONRPC_VERSION",get:function(){return"2.0"}}]),Client}(u)}).call(t,r(5).Buffer)},function(e,t,r){"use strict";t.decode=t.parse=r(74),t.encode=t.stringify=r(75)},function(e,t,r){"use strict";(function(t,n,o){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){x(t,e)}}function s(e){return I.from(e)}function a(e){return I.isBuffer(e)||e instanceof L}function u(){}function c(e,t){j=j||r(10),e=e||{};var n=t instanceof j;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var o=e.highWaterMark,s=e.writableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){m(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function l(e){if(j=j||r(10),!(M.call(l,this)||this instanceof j))return new l(e);this._writableState=new c(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),N.call(this)}function f(e,t){var r=new Error("write after end");e.emit("error",r),P.nextTick(t,r)}function h(e,t,r,n){var o=!0,i=!1;return null===r?i=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),P.nextTick(n,i),o=!1),o}function p(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=I.from(t,r)),t}function d(e,t,r,n,o,i){if(!r){var s=p(t,n,o);n!==s&&(r=!0,o="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,a,n,o,i);return u}function b(e,t,r,n,o,i,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function y(e,t,r,n,o){--t.pendingcb,r?(P.nextTick(o,n),P.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),S(e,t))}function g(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function m(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(g(r),t)y(e,r,n,t,o);else{var i=k(r);i||r.corked||r.bufferProcessing||!r.bufferedRequest||w(e,r),n?T(v,e,r,i,o):v(e,r,i,o)}}function v(e,t,r,n){r||_(e,t),t.pendingcb--,n(),S(e,t)}function _(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function w(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)o[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;o.allBuffers=u,b(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(b(e,t,!1,t.objectMode?1:c.length,c,l,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function R(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),S(e,t)})}function E(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,P.nextTick(R,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function S(e,t){var r=k(t);return r&&(E(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function O(e,t,r){t.ending=!0,S(e,t),r&&(t.finished?P.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function x(e,t,r){var n=e.entry;for(e.entry=null;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var P=r(19);e.exports=l;var j,T=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:P.nextTick;l.WritableState=c;var C=r(16);C.inherits=r(9);var A={deprecate:r(87)},N=r(32),I=r(20).Buffer,L=o.Uint8Array||function(){},q=r(31);C.inherits(l,N),c.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(c.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var M;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(M=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(e){return!!M.call(this,e)||this===l&&(e&&e._writableState instanceof c)}})):M=function(e){return e instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(e,t,r){var n=this._writableState,o=!1,i=!n.objectMode&&a(e);return i&&!I.isBuffer(e)&&(e=s(e)),"function"==typeof t&&(r=t,t=null),i?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=u),n.ended?f(this,r):(i||h(this,n,e,r))&&(n.pendingcb++,o=d(this,n,i,e,t,r)),o},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},l.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),l.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||O(this,n,r)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),l.prototype.destroy=q.destroy,l.prototype._undestroy=q.undestroy,l.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,r(0),r(85).setImmediate,r(7))},function(e,t,r){t=e.exports=r(29),t.Stream=t,t.Readable=t,t.Writable=r(24),t.Duplex=r(10),t.Transform=r(30),t.PassThrough=r(80)},function(e,t,r){"use strict";function n(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function o(e){var t=n(e);if("string"!=typeof t&&(m.isEncoding===v||!v(e)))throw new Error("Unknown encoding: "+e);return t||e}function i(e){this.encoding=o(e);var t;switch(this.encoding){case"utf16le":this.text=h,this.end=p,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=d,this.end=b,t=3;break;default:return this.write=y,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e,t,r){var n=t.length-1;if(n<r)return 0;var o=s(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r||-2===o?0:(o=s(t[n]))>=0?(o>0&&(e.lastNeed=o-2),o):--n<r||-2===o?0:(o=s(t[n]),o>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0)}function u(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}function c(e){var t=this.lastTotal-this.lastNeed,r=u(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){var r=a(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function h(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function d(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function b(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function y(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}var m=r(20).Buffer,v=m.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=f,i.prototype.text=l,i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";function n(e,t,r,n){for(var o=65535&e|0,i=e>>>16&65535|0,s=0;0!==r;){s=r>2e3?2e3:r,r-=s;do{o=o+t[n++]|0,i=i+o|0}while(--s);o%=65521,i%=65521}return o|i<<16|0}e.exports=n},function(e,t,r){"use strict";function n(e,t,r,n){var i=o,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}var o=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=n},function(e,t,r){"use strict";(function(t,n){function o(e){return M.from(e)}function i(e){return M.isBuffer(e)||e instanceof B}function s(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?I(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function a(e,t){N=N||r(10),e=e||{};var n=t instanceof N;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var o=e.highWaterMark,i=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:n&&(i||0===i)?i:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new z,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(F||(F=r(26).StringDecoder),this.decoder=new F(e.encoding),this.encoding=e.encoding)}function u(e){if(N=N||r(10),!(this instanceof u))return new u(e);this._readableState=new a(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),q.call(this)}function c(e,t,r,n,i){var s=e._readableState;if(null===t)s.reading=!1,b(e,s);else{var a;i||(a=f(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===M.prototype||(t=o(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):l(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?l(e,s,t,!1):m(e,s)):l(e,s,t,!1))):n||(s.reading=!1)}return h(s)}function l(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&y(e)),m(e,t)}function f(e,t){var r;return i(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function h(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function p(e){return e>=Z?e=Z:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function d(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=p(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function b(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,y(e)}}function y(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(W("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?A.nextTick(g,e):g(e))}function g(e){W("emit readable"),e.emit("readable"),E(e)}function m(e,t){t.readingMore||(t.readingMore=!0,A.nextTick(v,e,t))}function v(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(W("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function _(e){return function(){var t=e._readableState;W("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&L(e,"data")&&(t.flowing=!0,E(e))}}function w(e){W("readable nexttick read 0"),e.read(0)}function k(e,t){t.resumeScheduled||(t.resumeScheduled=!0,A.nextTick(R,e,t))}function R(e,t){t.reading||(W("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),E(e),t.flowing&&!t.reading&&e.read(0)}function E(e){var t=e._readableState;for(W("flow",t.flowing);t.flowing&&null!==e.read(););}function S(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=O(e,t.buffer,t.decoder),r}function O(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?x(e,t):P(e,t),n}function x(e,t){var r=t.head,n=1,o=r.data;for(e-=o.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(s===i.length?o+=i:o+=i.slice(0,e),0===(e-=s)){s===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(s));break}++n}return t.length-=n,o}function P(e,t){var r=M.allocUnsafe(e),n=t.head,o=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,s),0===(e-=s)){s===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(s));break}++o}return t.length-=o,r}function j(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,A.nextTick(T,t,e))}function T(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}var A=r(19);e.exports=u;var N,I=r(78);u.ReadableState=a;var L=(r(6).EventEmitter,function(e,t){return e.listeners(t).length}),q=r(32),M=r(20).Buffer,B=t.Uint8Array||function(){},U=r(16);U.inherits=r(9);var D=r(93),W=void 0;W=D&&D.debuglog?D.debuglog("stream"):function(){};var F,z=r(81),J=r(31);U.inherits(u,q);var H=["error","close","destroy","pause","resume"];Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),u.prototype.destroy=J.destroy,u.prototype._undestroy=J.undestroy,u.prototype._destroy=function(e,t){this.push(null),t(e)},u.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=M.from(e,t),t=""),r=!0),c(this,e,t,!1,r)},u.prototype.unshift=function(e){return c(this,e,null,!0,!1)},u.prototype.isPaused=function(){return!1===this._readableState.flowing},u.prototype.setEncoding=function(e){return F||(F=r(26).StringDecoder),this._readableState.decoder=new F(e),this._readableState.encoding=e,this};var Z=8388608;u.prototype.read=function(e){W("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return W("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?j(this):y(this),null;if(0===(e=d(e,t))&&t.ended)return 0===t.length&&j(this),null;var n=t.needReadable;W("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,W("length less than watermark",n)),t.ended||t.reading?(n=!1,W("reading or ended",n)):n&&(W("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=d(r,t)));var o;return o=e>0?S(e,t):null,null===o?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&j(this)),null!==o&&this.emit("data",o),o},u.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(e,t){function r(e,t){W("onunpipe"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,i())}function o(){W("onend"),e.end()}function i(){W("cleanup"),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("drain",y),e.removeListener("error",u),e.removeListener("unpipe",r),h.removeListener("end",o),h.removeListener("end",f),h.removeListener("data",a),g=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||y()}function a(t){W("ondata"),m=!1,!1!==e.write(t)||m||((1===p.pipesCount&&p.pipes===e||p.pipesCount>1&&-1!==C(p.pipes,e))&&!g&&(W("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,m=!0),h.pause())}function u(t){W("onerror",t),f(),e.removeListener("error",u),0===L(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",l),f()}function l(){W("onfinish"),e.removeListener("close",c),f()}function f(){W("unpipe"),h.unpipe(e)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,W("pipe count=%d opts=%j",p.pipesCount,t);var d=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr,b=d?o:f;p.endEmitted?A.nextTick(b):h.once("end",b),e.on("unpipe",r);var y=_(h);e.on("drain",y);var g=!1,m=!1;return h.on("data",a),s(e,"error",u),e.once("close",c),e.once("finish",l),e.emit("pipe",h),p.flowing||(W("pipe resume"),h.resume()),e},u.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,r);return this}var s=C(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},u.prototype.on=function(e,t){var r=q.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&y(this):A.nextTick(w,this))}return r},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var e=this._readableState;return e.flowing||(W("resume"),e.flowing=!0,k(this,e)),this},u.prototype.pause=function(){return W("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(W("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(W("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(o){if(W("wrapped data"),r.decoder&&(o=r.decoder.write(o)),(!r.objectMode||null!==o&&void 0!==o)&&(r.objectMode||o&&o.length)){t.push(o)||(n=!0,e.pause())}});for(var o in e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<H.length;i++)e.on(H[i],this.emit.bind(this,H[i]));return this._read=function(t){W("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(u.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),u._fromList=S}).call(t,r(7),r(0))},function(e,t,r){"use strict";function n(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",i)}function i(){var e=this;"function"==typeof this._flush?this._flush(function(t,r){s(e,t,r)}):s(this,null,null)}function s(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=o;var a=r(10),u=r(16);u.inherits=r(9),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;a.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},function(e,t,r){"use strict";function n(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||s.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(s.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)}),this)}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(e,t){e.emit("error",t)}var s=r(19);e.exports={destroy:n,undestroy:o}},function(e,t,r){e.exports=r(6).EventEmitter},function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,r){if(e&&c.isObject(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,r),o}function i(e){return c.isString(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)}function s(e,t){return o(e,!1,!0).resolve(t)}function a(e,t){return e?o(e,!1,!0).resolveObject(t):t}var u=r(65),c=r(86);t.parse=o,t.resolve=s,t.resolveObject=a,t.format=i,t.Url=n;var l=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(p),b=["'"].concat(d),y=["%","/","?",";","#"].concat(b),g=["/","?","#"],m=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},R=r(23);n.prototype.parse=function(e,t,r){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),o=-1!==n&&n<e.indexOf("#")?"?":"#",i=e.split(o),s=/\\/g;i[0]=i[0].replace(s,"/"),e=i.join(o);var a=e;if(a=a.trim(),!r&&1===e.split("#").length){var f=h.exec(a);if(f)return this.path=a,this.href=a,this.pathname=f[1],f[2]?(this.search=f[2],this.query=t?R.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=l.exec(a);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,a=a.substr(p.length)}if(r||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===a.substr(0,2);!E||p&&w[p]||(a=a.substr(2),this.slashes=!0)}if(!w[p]&&(E||p&&!k[p])){for(var S=-1,O=0;O<g.length;O++){var x=a.indexOf(g[O]);-1!==x&&(-1===S||x<S)&&(S=x)}var P,j;j=-1===S?a.lastIndexOf("@"):a.lastIndexOf("@",S),-1!==j&&(P=a.slice(0,j),a=a.slice(j+1),this.auth=decodeURIComponent(P)),S=-1;for(var O=0;O<y.length;O++){var x=a.indexOf(y[O]);-1!==x&&(-1===S||x<S)&&(S=x)}-1===S&&(S=a.length),this.host=a.slice(0,S),a=a.slice(S),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var C=this.hostname.split(/\./),O=0,A=C.length;O<A;O++){var N=C[O];if(N&&!N.match(m)){for(var I="",L=0,q=N.length;L<q;L++)N.charCodeAt(L)>127?I+="x":I+=N[L];if(!I.match(m)){var M=C.slice(0,O),B=C.slice(O+1),U=N.match(v);U&&(M.push(U[1]),B.unshift(U[2])),B.length&&(a="/"+B.join(".")+a),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=u.toASCII(this.hostname));var D=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+D,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!_[d])for(var O=0,A=b.length;O<A;O++){var F=b[O];if(-1!==a.indexOf(F)){var z=encodeURIComponent(F);z===F&&(z=escape(F)),a=a.split(F).join(z)}}var J=a.indexOf("#");-1!==J&&(this.hash=a.substr(J),a=a.slice(0,J));var H=a.indexOf("?");if(-1!==H?(this.search=a.substr(H),this.query=a.substr(H+1),t&&(this.query=R.parse(this.query)),a=a.slice(0,H)):t&&(this.search="",this.query={}),a&&(this.pathname=a),k[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",Z=this.search||"";this.path=D+Z}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(i=R.stringify(this.query));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+o+r+s+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(c.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,o=Object.keys(this),i=0;i<o.length;i++){var s=o[i];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),u=0;u<a.length;u++){var l=a[u];"protocol"!==l&&(r[l]=e[l])}return k[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!k[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var p=f[h];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||w[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var b=r.pathname||"",y=r.search||"";r.path=b+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=m||g||r.host&&e.pathname,_=v,R=r.pathname&&r.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],E=r.protocol&&!k[r.protocol];if(E&&(r.hostname="",r.port=null,r.host&&(""===R[0]?R[0]=r.host:R.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),v=v&&(""===d[0]||""===R[0])),m)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,R=d;else if(d.length)R||(R=[]),R.pop(),R=R.concat(d),r.search=e.search,r.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(E){r.hostname=r.host=R.shift();var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return r.search=e.search,r.query=e.query,c.isNull(r.pathname)&&c.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!R.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var O=R.slice(-1)[0],x=(r.host||e.host||R.length>1)&&("."===O||".."===O)||""===O,P=0,j=R.length;j>=0;j--)O=R[j],"."===O?R.splice(j,1):".."===O?(R.splice(j,1),P++):P&&(R.splice(j,1),P--);if(!v&&!_)for(;P--;P)R.unshift("..");!v||""===R[0]||R[0]&&"/"===R[0].charAt(0)||R.unshift(""),x&&"/"!==R.join("/").substr(-1)&&R.push("");var T=""===R[0]||R[0]&&"/"===R[0].charAt(0);if(E){r.hostname=r.host=T?"":R.length?R.shift():"";var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return v=v||r.host&&R.length,v&&!T&&R.unshift(""),R.length?r.pathname=R.join("/"):(r.pathname=null,r.path=null),c.isNull(r.pathname)&&c.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){(function(e){function n(e,r){var n={seen:[],stylize:i};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&t._extend(n,r),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),a(n,e,n.depth)}function o(e,t){var r=n.styles[t];return r?"["+n.colors[r][0]+"m"+e+"["+n.colors[r][1]+"m":e}function i(e,t){return e}function s(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function a(e,r,n){if(e.customInspect&&r&&S(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return m(o)||(o=a(e,o,n)),o}var i=u(e,r);if(i)return i;var d=Object.keys(r),b=s(d);if(e.showHidden&&(d=Object.getOwnPropertyNames(r)),E(r)&&(d.indexOf("message")>=0||d.indexOf("description")>=0))return c(r);if(0===d.length){if(S(r)){var y=r.name?": "+r.name:"";return e.stylize("[Function"+y+"]","special")}if(w(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(R(r))return e.stylize(Date.prototype.toString.call(r),"date");if(E(r))return c(r)}var g="",v=!1,_=["{","}"];if(p(r)&&(v=!0,_=["[","]"]),S(r)){g=" [Function"+(r.name?": "+r.name:"")+"]"}if(w(r)&&(g=" "+RegExp.prototype.toString.call(r)),R(r)&&(g=" "+Date.prototype.toUTCString.call(r)),E(r)&&(g=" "+c(r)),0===d.length&&(!v||0==r.length))return _[0]+g+_[1];if(n<0)return w(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var k;return k=v?l(e,r,n,b,d):d.map(function(t){return f(e,r,n,b,t,v)}),e.seen.pop(),h(k,g,_)}function u(e,t){if(_(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return g(t)?e.stylize(""+t,"number"):d(t)?e.stylize(""+t,"boolean"):b(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)T(t,String(s))?i.push(f(e,t,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(f(e,t,r,n,o,!0))}),i}function f(e,t,r,n,o,i){var s,u,c;if(c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},c.get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),T(n,o)||(s="["+o+"]"),u||(e.seen.indexOf(c.value)<0?(u=b(r)?a(e,c.value,null):a(e,c.value,r-1),u.indexOf("\n")>-1&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),_(s)){if(i&&o.match(/^\d+$/))return u;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function h(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function p(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function b(e){return null===e}function y(e){return null==e}function g(e){return"number"==typeof e}function m(e){return"string"==typeof e}function v(e){return"symbol"==typeof e}function _(e){return void 0===e}function w(e){return k(e)&&"[object RegExp]"===x(e)}function k(e){return"object"==typeof e&&null!==e}function R(e){return k(e)&&"[object Date]"===x(e)}function E(e){return k(e)&&("[object Error]"===x(e)||e instanceof Error)}function S(e){return"function"==typeof e}function O(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function x(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}function j(){var e=new Date,t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function C(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function A(t){function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};t.apply(this,r).then(function(t){e.nextTick(s,null,t)},function(t){e.nextTick(C,t,s)})}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,N(t)),r}var N=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},I=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(n(arguments[r]));return t.join(" ")}for(var r=1,o=arguments,i=o.length,s=String(e).replace(I,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(o[r++]);case"%d":return Number(o[r++]);case"%j":try{return JSON.stringify(o[r++])}catch(e){return"[Circular]"}default:return e}}),a=o[r];r<i;a=o[++r])b(a)||!k(a)?s+=" "+a:s+=" "+n(a);return s},t.deprecate=function(r,n){function o(){if(!i){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var i=!1;return o};var L,q={};t.debuglog=function(n){if(_(L)&&(L=r.i({NODE_ENV:"production"}).NODE_DEBUG||""),n=n.toUpperCase(),!q[n])if(new RegExp("\\b"+n+"\\b","i").test(L)){var o=e.pid;q[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,o,e)}}else q[n]=function(){};return q[n]},t.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=d,t.isNull=b,t.isNullOrUndefined=y,t.isNumber=g,t.isString=m,t.isSymbol=v,t.isUndefined=_,t.isRegExp=w,t.isObject=k,t.isDate=R,t.isError=E,t.isFunction=S,t.isPrimitive=O,t.isBuffer=r(88);var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",j(),t.format.apply(t,arguments))},t.inherits=r(9),t._extend=function(e,t){if(!t||!k(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var B="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;t.promisify=function(e){function t(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(e,n){e?r(e):t(n)});try{e.apply(this,o)}catch(e){r(e)}return n}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(B&&e[B]){var t=e[B];if("function"!=typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,B,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),B&&Object.defineProperty(t,B,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,N(e))},t.promisify.custom=B,t.callbackify=A}).call(t,r(0))},function(e,t,r){var n={Client:r(22),ClientPluginBase:r(4),Server:r(15),ServerPluginBase:r(12),EndpointBase:r(8),BidirectionalWebsocketRouter:r(38),BidirectionalWorkerRouter:r(39),BidirectionalWebRTCRouter:r(37),BidirectionalElectronIPC:r(36),RouterBase:r(14),Exception:r(3),Utils:r(2),Plugins:{Client:r(11),Server:r(56)},WebSocketAdapters:{WebSocketWrapperBase:r(17),uws:{WebSocketWrapper:r(57)}}};e.exports={JSONRPC:n}},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(n)},l=r(1),f=null;t&&t.versions.electron&&((f=r(21))||!window&&!self||"function"!=typeof(window||self).require||(f=(window||self).require("electron")));var JSONRPC={};JSONRPC.Exception=r(3),JSONRPC.Client=r(22),JSONRPC.IncomingRequest=r(13),JSONRPC.EndpointBase=r(8),JSONRPC.RouterBase=r(14),JSONRPC.Plugins={},JSONRPC.Plugins.Client=r(11),JSONRPC.Utils=r(2),e.exports=function(e){function r(e){o(this,r);var t=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return e.on("response",function(e){e.callResultSerialized=e.callResultToBeSerialized}),t._objWaitForBrowserWindowReadyPromises={},t}return s(r,e),u(r,[{key:"addBrowserWindow",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r,o,i,s,a,u=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e4;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null!==c&&(c=JSONRPC.EndpointBase.normalizePath(c)),r=++this._nConnectionIDCounter,this._objWaitForBrowserWindowReadyPromises[r]={fnResolve:null,fnReject:null},o=new Promise(function(e,t){u._objWaitForBrowserWindowReadyPromises[r].fnResolve=e,u._objWaitForBrowserWindowReadyPromises[r].fnReject=t}),i="jsonrpc_winid_"+t.id,s={browserWindow:t,nConnectionID:r,clientReverseCalls:null,clientElectronIPCTransportPlugin:null,strEndpointPath:c,strChannel:i},this._objSessions[r]=s,f.ipcMain.on(i,function(){var e=n(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("rpc.connectToEndpoint"!==n.method){e.next=2;break}return e.abrupt("return",u._onRPCConnectToEndpoint(n,r,i));case 2:return e.next=4,u._routeMessage(n,s,i);case 4:case"end":return e.stop()}},e,u)}));return function(t,r){return e.apply(this,arguments)}}()),t.on("closed",function(){u.onConnectionEnded(r)}),a=setTimeout(function(e){u._objWaitForBrowserWindowReadyPromises[r].fnReject(new Error("Timed out waiting for BrowserWindow to be ready for JSONRPC."))},l),e.next=12,o;case 12:return clearTimeout(a),e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this)}));return e}()},{key:"addMainProcess",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r,o,i,s,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSONRPC.EndpointBase.normalizePath(t),r=++this._nConnectionIDCounter,o="jsonrpc_winid_"+(window||self).require("electron").remote.getCurrentWindow().id,i={browserWindow:null,nConnectionID:r,clientReverseCalls:null,clientElectronIPCTransportPlugin:null,strEndpointPath:t,strChannel:o},this._objSessions[r]=i,(window||self).require("electron").ipcRenderer.on(o,function(){var e=n(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._routeMessage(r,i,o);case 2:case"end":return e.stop()}},e,a)}));return function(t,r){return e.apply(this,arguments)}}()),s=this._makeReverseCallsClient(JSONRPC.Client,i),e.next=9,s.rpc("rpc.connectToEndpoint",[t]);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"_onRPCConnectToEndpoint",value:function(e,t,r){var n=e.params[0];if(l("number"==typeof t,"nConnectionID must be of type number."),!this._objSessions.hasOwnProperty(t))return void console.error(new Error("[rpc.connectToEndpoint] BrowserWindow with connection ID "+t+" doesn't exist. Maybe it was closed."));try{l("string"==typeof n,"strEndpointPath must be of type string."),this._objSessions[t].strEndpointPath=JSONRPC.EndpointBase.normalizePath(n),this._objWaitForBrowserWindowReadyPromises[t].fnResolve(this._objSessions[t].strEndpointPath);var o=this._objSessions[t].browserWindow,i={id:e.id,result:null,jsonrpc:"2.0"};o.webContents.send(r,i)}catch(n){var s=this._objSessions[t].browserWindow,a={id:e.id,error:{message:n.message+"\n"+n.stack,code:0},jsonrpc:"2.0"};s.webContents.send(r,a),this._objWaitForBrowserWindowReadyPromises[t].fnReject(n)}}},{key:"_makeReverseCallsClient",value:function(e,t){var r=new e(t.strEndpointPath);return t.clientElectronIPCTransportPlugin=new JSONRPC.Plugins.Client.ElectronIPCTransport(!0,t.browserWindow,t.strChannel),r.addPlugin(t.clientElectronIPCTransportPlugin),this.emit("madeReverseCallsClient",r),r}},{key:"_routeMessage",value:function(){function e(e,t,n){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r,n,o){var i,s,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.browserWindow,s=n.nConnectionID,"object"===(void 0===r?"undefined":a(r))){e.next=5;break}return console.error("["+t.pid+"] BidirectionalElectronIPC: Received "+(void 0===r?"undefined":a(r))+" instead of object. Ignoring. RAW message: "+JSON.stringify(r)),e.abrupt("return");case 5:if(u=!r.hasOwnProperty("id"),e.prev=6,!r.hasOwnProperty("method")){e.next=31;break}if(this._jsonrpcServer){e.next=10;break}throw new Error("JSONRPC.Server not initialized.");case 10:if(c=new JSONRPC.IncomingRequest,c.connectionID=s,c.router=this,c.stackInErrorMessage=!0,e.prev=14,l=this._objSessions[s].strEndpointPath,this._jsonrpcServer.endpoints.hasOwnProperty(l)){e.next=18;break}throw new JSONRPC.Exception("Unknown JSONRPC endpoint "+l+".",JSONRPC.Exception.METHOD_NOT_FOUND);case 18:c.endpoint=this._jsonrpcServer.endpoints[l],c.requestBody=r,c.requestObject=r,e.next=26;break;case 23:e.prev=23,e.t0=e.catch(14),c.callResult=e.t0;case 26:return e.next=28,this._jsonrpcServer.processRequest(c);case 28:u||(i?i.webContents.send(o,c.callResultToBeSerialized):(window||self).require("electron").ipcRenderer.send(o,c.callResultToBeSerialized)),e.next=44;break;case 31:if(!r.hasOwnProperty("result")&&!r.hasOwnProperty("error")){e.next=42;break}if(!this._objSessions.hasOwnProperty(s)||null!==this._objSessions[s].clientElectronIPCTransportPlugin){e.next=34;break}throw new Error("How can the client be not initialized, and yet getting responses from phantom requests?");case 34:if(!this._objSessions.hasOwnProperty(s)){e.next=39;break}return e.next=37,this._objSessions[s].clientElectronIPCTransportPlugin.processResponse(r);case 37:e.next=40;break;case 39:console.error("Connection ID "+s+" is closed and session is missing. Ignoring response: "+JSON.stringify(r));case 40:e.next=44;break;case 42:throw u=!1,new Error("Unable to qualify the message as a JSONRPC request or response.");case 44:e.next=52;break;case 46:e.prev=46,e.t1=e.catch(6),console.error(e.t1),console.error("Uncaught error. RAW remote message: "+JSON.stringify(r)),console.error("["+t.pid+"] Unclean state."),this.onConnectionEnded(s);case 52:case"end":return e.stop()}},e,this,[[6,46],[14,23]])}));return e}()},{key:"onConnectionEnded",value:function(e){c(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"onConnectionEnded",this).call(this,e),delete this._objWaitForBrowserWindowReadyPromises[e]}}]),r}(JSONRPC.RouterBase)}).call(t,r(0))},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={Exception:r(3),Server:r(15),IncomingRequest:r(13),EndpointBase:r(8),RouterBase:r(14),Plugins:{Client:r(11)},Utils:r(2)};e.exports=function(e){function BidirectionalWebRTCRouter(){return o(this,BidirectionalWebRTCRouter),i(this,(BidirectionalWebRTCRouter.__proto__||Object.getPrototypeOf(BidirectionalWebRTCRouter)).apply(this,arguments))}return s(BidirectionalWebRTCRouter,e),a(BidirectionalWebRTCRouter,[{key:"addRTCDataChannelSync",value:function(e){var r=this;if("closed"===e.readyState)return void console.log("["+t.pid+"] addRTCDataChannelSync ignoring closed dataChannel.");var o=++this._nConnectionIDCounter,i=JSONRPC.EndpointBase.normalizePath(e.label),s={dataChannel:e,nConnectionID:o,clientReverseCalls:null,clientWebRTCTransportPlugin:null,strEndpointPath:i};this._objSessions[o]=s;var a=function(){var e=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._routeMessage(t.data,s);case 2:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),u=function(t){console.error(t),r.onConnectionEnded(o),"open"===e.readyState&&e.close()},c=function t(n){r.onConnectionEnded(o),e.removeEventListener("message",a),e.removeEventListener("close",t),e.removeEventListener("error",u)};return e.addEventListener("message",a),e.addEventListener("close",c),e.addEventListener("error",u),o}},{key:"_makeReverseCallsClient",value:function(e,t){var r=new e(t.strEndpointPath);return t.clientWebRTCTransportPlugin=new JSONRPC.Plugins.Client.WebRTCTransport(t.dataChannel,!0),r.addPlugin(t.clientWebRTCTransportPlugin),this.emit("madeReverseCallsClient",r),r}},{key:"_routeMessage",value:function(){function e(e,t){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r,n){var o,i,s,a,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.dataChannel,i=n.nConnectionID,r.trim().length){e.next=5;break}return console.log("["+t.pid+"] WebRTCBidirectionalRouter: Received empty message. Ignoring."),e.abrupt("return");case 5:s=void 0,e.prev=6,s=JSONRPC.Utils.jsonDecodeSafe(r),e.next=18;break;case 10:return e.prev=10,e.t0=e.catch(6),console.error(e.t0),console.error("Unable to parse JSON. RAW remote message: "+r),this._jsonrpcServer&&this._objSessions.hasOwnProperty(i)&&null===this._objSessions[i].clientWebRTCTransportPlugin&&"open"===o.readyState&&o.send(JSON.stringify({id:null,jsonrpc:"2.0",error:{message:"Invalid JSON: "+JSON.stringify(r)+".",code:JSONRPC.Exception.PARSE_ERROR}},void 0,"\t")),console.log("["+t.pid+"] Unclean state. Unable to match RTCDataChannel message to an existing Promise or qualify it as a request or response."),"open"===o.readyState&&o.close(),e.abrupt("return");case 18:if(a=!s.hasOwnProperty("id"),e.prev=19,!s.hasOwnProperty("method")){e.next=45;break}if(this._jsonrpcServer){e.next=24;break}throw a||"open"!==o.readyState||o.send(JSON.stringify({id:null,jsonrpc:"2.0",error:{message:"JSONRPC.Server not initialized on this RTCDataChannel. Raw request: "+r+".",code:JSONRPC.Exception.PARSE_ERROR}},void 0,"\t")),new Error("JSONRPC.Server not initialized on this RTCDataChannel.");case 24:if(u=new JSONRPC.IncomingRequest,u.connectionID=i,u.router=this,e.prev=27,c=this._objSessions[i].strEndpointPath,this._jsonrpcServer.endpoints.hasOwnProperty(c)){e.next=31;break}throw new JSONRPC.Exception("Unknown JSONRPC endpoint "+c+".",JSONRPC.Exception.METHOD_NOT_FOUND);case 31:u.endpoint=this._jsonrpcServer.endpoints[c],u.requestBody=r,u.requestObject=s,e.next=39;break;case 36:e.prev=36,e.t1=e.catch(27),u.callResult=e.t1;case 39:return e.next=41,this._jsonrpcServer.processRequest(u);case 41:"open"!==o.readyState&&console.error("dataChannel.readyState: "+JSON.stringify(o.readyState)+". Request was "+r+". Attempted responding with "+JSON.stringify(u.callResultToBeSerialized,void 0,"\t")+"."),a||o.send(u.callResultSerialized),e.next=60;break;case 45:if(!s.hasOwnProperty("result")&&!s.hasOwnProperty("error")){e.next=58;break}if(!this._objSessions.hasOwnProperty(i)||null!==this._objSessions[i].clientWebRTCTransportPlugin){e.next=50;break}throw this._jsonrpcServer||a||"open"!==o.readyState||o.send(JSON.stringify({id:null,jsonrpc:"2.0",error:{message:"JSONRPC.Client not initialized on this RTCConnection. Raw message: "+r+".",code:JSONRPC.Exception.PARSE_ERROR}},void 0,"\t")),"open"===o.readyState&&o.close(),new Error("How can the client be not initialized, and yet getting responses from phantom requests?");case 50:if(!this._objSessions.hasOwnProperty(i)){e.next=55;break}return e.next=53,this._objSessions[i].clientWebRTCTransportPlugin.processResponse(r,s);case 53:e.next=56;break;case 55:console.error("Connection ID "+i+" is closed and session is missing. Ignoring response: "+r);case 56:e.next=60;break;case 58:throw a=!1,new Error("Unable to qualify the message as a JSONRPC request or response.");case 60:e.next=69;break;case 62:return e.prev=62,e.t2=e.catch(19),console.error(e.t2),console.error("Uncaught error. RAW remote message: "+r),this._jsonrpcServer&&this._objSessions.hasOwnProperty(i)&&null===this._objSessions[i].clientWebRTCTransportPlugin&&(a||"open"!==o.readyState||o.send(JSON.stringify({id:null,jsonrpc:"2.0",error:{message:"Internal error: "+e.t2.message+".",code:JSONRPC.Exception.INTERNAL_ERROR}},void 0,"\t"))),"open"===o.readyState&&(console.log("["+t.pid+"] Unclean state. Closing data channel."),o.close()),e.abrupt("return");case 69:case"end":return e.stop()}},e,this,[[6,10],[19,62],[27,36]])}));return e}()}]),BidirectionalWebRTCRouter}(JSONRPC.RouterBase)}).call(t,r(0))},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={Exception:r(3),Server:r(15),IncomingRequest:r(13),EndpointBase:r(8),RouterBase:r(14),Plugins:{Client:r(11)},Utils:r(2),WebSocketAdapters:{WebSocketWrapperBase:r(17)}};e.exports=function(e){function BidirectionalWebsocketRouter(){return o(this,BidirectionalWebsocketRouter),i(this,(BidirectionalWebsocketRouter.__proto__||Object.getPrototypeOf(BidirectionalWebsocketRouter)).apply(this,arguments))}return s(BidirectionalWebsocketRouter,e),a(BidirectionalWebsocketRouter,[{key:"addWebSocketSync",value:function(e,r){var n=this;if(e.readyState===JSONRPC.WebSocketAdapters.WebSocketWrapperBase.CLOSED)return void console.log("["+t.pid+"] addWebSocketSync ignoring closed webSocket.");var o=++this._nConnectionIDCounter,i=JSONRPC.EndpointBase.normalizePath(e.url?e.url:e.upgradeReq?e.upgradeReq.url:r.url),s={webSocket:e,upgradeRequest:e.upgradeReq?e.upgradeReq:r,nConnectionID:o,clientReverseCalls:null,clientWebSocketTransportPlugin:null,strEndpointPath:i};this._objSessions[o]=s;var a=function(t){n.onConnectionEnded(o),e.readyState===JSONRPC.WebSocketAdapters.WebSocketWrapperBase.OPEN&&e.close(1e3,t.message)};if(e.on&&e.removeListener&&t&&t.release){var u=function(e,t){n._routeMessage(e,s)},c=function t(r,i){n.onConnectionEnded(o),e.removeListener("message",u),e.removeListener("close",t),e.removeListener("error",a)};e.on("message",u),e.on("close",c),e.on("error",a)}else{if(!e.addEventListener)throw new Error("Failed to detect runtime or websocket interface not support (browser, nodejs, websockets/ws npm package compatible interface, etc.");var l=function(e){n._routeMessage(e.data,s)},f=function t(r){n.onConnectionEnded(o),e.removeEventListener("message",l),e.removeEventListener("close",t),e.removeEventListener("error",a)};e.addEventListener("message",l),e.addEventListener("close",f),e.addEventListener("error",a)}return o}},{key:"_makeReverseCallsClient",value:function(e,t){var r=new e(t.strEndpointPath);return t.clientWebSocketTransportPlugin=new JSONRPC.Plugins.Client.WebSocketTransport(t.webSocket,!0),r.addPlugin(t.clientWebSocketTransportPlugin),this.emit("madeReverseCallsClient",r),r}},{key:"_routeMessage",value:function(){function e(e,t){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r,n){var o,i,s,a,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.webSocket,i=n.nConnectionID,r.trim().length){e.next=5;break}return console.log("["+t.pid+"] WebSocketBidirectionalRouter: Received empty message. Ignoring."),e.abrupt("return");case 5:s=void 0,e.prev=6,s=JSONRPC.Utils.jsonDecodeSafe(r),e.next=18;break;case 10:return e.prev=10,e.t0=e.catch(6),console.error(e.t0),console.error("Unable to parse JSON. RAW remote message: "+r),this._jsonrpcServer&&this._objSessions.hasOwnProperty(i)&&null===this._objSessions[i].clientWebSocketTransportPlugin&&o.readyState===JSONRPC.WebSocketAdapters.WebSocketWrapperBase.OPEN&&o.send(JSON.stringify({id:null,jsonrpc:"2.0",error:{message:"Invalid JSON: "+JSON.stringify(r)+".",code:JSONRPC.Exception.PARSE_ERROR}},void 0,"\t")),console.log("["+t.pid+"] Unclean state. Unable to match WebSocket message to an existing Promise or qualify it as a request or response."),o.readyState===JSONRPC.WebSocketAdapters.WebSocketWrapperBase.OPEN&&o.close(1e3,"Unclean state. Unable to match WebSocket message to an existing Promise or qualify it as a request or response."),e.abrupt("return");case 18:if(a=!s.hasOwnProperty("id"),e.prev=19,!s.hasOwnProperty("method")){e.next=46;break}if(this._jsonrpcServer){e.next=24;break}throw a||o.readyState!==JSONRPC.WebSocketAdapters.WebSocketWrapperBase.OPEN||o.send(JSON.stringify({id:null,jsonrpc:"2.0",error:{message:"JSONRPC.Server not initialized on this WebSocket. Raw request: "+r+".",code:JSONRPC.Exception.PARSE_ERROR}},void 0,"\t")),new Error("JSONRPC.Server not initialized on this WebSocket");case 24:if(u=new JSONRPC.IncomingRequest,u.connectionID=i,u.router=this,n.upgradeRequest&&(u.headers=n.upgradeRequest.headers,u.remoteAddress=n.upgradeRequest.socket.remoteAddress,u.localAddress=n.upgradeRequest.socket.localAddress),e.prev=28,c=this._objSessions[i].strEndpointPath,this._jsonrpcServer.endpoints.hasOwnProperty(c)){e.next=32;break}throw new JSONRPC.Exception("Unknown JSONRPC endpoint "+c+".",JSONRPC.Exception.METHOD_NOT_FOUND);case 32:u.endpoint=this._jsonrpcServer.endpoints[c],u.requestBody=r,u.requestObject=s,e.next=40;break;case 37:e.prev=37,e.t1=e.catch(28),u.callResult=e.t1;case 40:return e.next=42,this._jsonrpcServer.processRequest(u);case 42:o.readyState!==JSONRPC.WebSocketAdapters.WebSocketWrapperBase.OPEN&&(l=JSON.stringify(u.callResultToBeSerialized),l.length>200&&(l=l.substr(0,100)+" <... truncated "+(l.length-200)+" characters ...> "+l.substr(-100)),console.error("webSocket.readyState: "+JSON.stringify(o.readyState)+". Request was "+r+". Attempted responding with "+l+".")),a||o.send(u.callResultSerialized),e.next=61;break;case 46:if(!s.hasOwnProperty("result")&&!s.hasOwnProperty("error")){e.next=59;break}if(!this._objSessions.hasOwnProperty(i)||null!==this._objSessions[i].clientWebSocketTransportPlugin){e.next=51;break}throw this._jsonrpcServer||a||o.readyState!==JSONRPC.WebSocketAdapters.WebSocketWrapperBase.OPEN||o.send(JSON.stringify({id:null,jsonrpc:"2.0",error:{message:"JSONRPC.Client not initialized on this WebSocket. Raw message: "+r+".",code:JSONRPC.Exception.PARSE_ERROR}},void 0,"\t")),o.readyState===JSONRPC.WebSocketAdapters.WebSocketWrapperBase.OPEN&&o.close(1e3,"How can the client be not initialized, and yet getting responses from phantom requests? Closing websocket."),new Error("How can the client be not initialized, and yet getting responses from phantom requests?");case 51:if(!this._objSessions.hasOwnProperty(i)){e.next=56;break}return e.next=54,this._objSessions[i].clientWebSocketTransportPlugin.processResponse(r,s);case 54:e.next=57;break;case 56:console.error("Connection ID "+i+" is closed and session is missing. Ignoring response: "+r);case 57:e.next=61;break;case 59:throw a=!1,new Error("Unable to qualify the message as a JSONRPC request or response.");case 61:e.next=70;break;case 63:return e.prev=63,e.t2=e.catch(19),console.error(e.t2),console.error("Uncaught error. RAW remote message: "+r),this._jsonrpcServer&&this._objSessions.hasOwnProperty(i)&&null===this._objSessions[i].clientWebSocketTransportPlugin&&(a||o.readyState!==JSONRPC.WebSocketAdapters.WebSocketWrapperBase.OPEN||o.send(JSON.stringify({id:null,jsonrpc:"2.0",error:{message:"Internal error: "+e.t2.message+".",code:JSONRPC.Exception.INTERNAL_ERROR}},void 0,"\t"))),o.readyState===JSONRPC.WebSocketAdapters.WebSocketWrapperBase.OPEN&&(console.log("["+t.pid+"] Unclean state. Closing websocket."),o.close(1e3,"Unclean state. Closing websocket.")),e.abrupt("return");case 70:case"end":return e.stop()}},e,this,[[6,10],[19,63],[28,37]])}));return e}()}]),BidirectionalWebsocketRouter}(JSONRPC.RouterBase)}).call(t,r(0))},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(n)},l=r(1),f=r(21);f||(f={isMaster:!(self&&void 0===self.document),isWorker:!(!self||void 0!==self.document)});var JSONRPC={};JSONRPC.Exception=r(3),JSONRPC.Server=r(15),JSONRPC.IncomingRequest=r(13),JSONRPC.EndpointBase=r(8),JSONRPC.RouterBase=r(14),JSONRPC.Plugins={},JSONRPC.Plugins.Client=r(11),JSONRPC.Utils=r(2),e.exports=function(e){function BidirectionalWorkerRouter(e){o(this,BidirectionalWorkerRouter);var t=i(this,(BidirectionalWorkerRouter.__proto__||Object.getPrototypeOf(BidirectionalWorkerRouter)).call(this,e));return e.on("response",function(e){e.callResultSerialized=e.callResultToBeSerialized}),t._objWaitForWorkerReadyPromises={},t}return s(BidirectionalWorkerRouter,e),u(BidirectionalWorkerRouter,[{key:"addWorker",value:function(){function e(e,t){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r,o){var i,s,u,c,h,p,d,b,y=this,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e4;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=6;break}if(!f.isWorker){e.next=3;break}throw new Error("The strEndpointPath param is mandatory inside workers.");case 3:o=null,e.next=7;break;case 6:o=JSONRPC.EndpointBase.normalizePath(o);case 7:if(l(f.isMaster||t===r||self===r,"Unknown worker type."),i=++this._nConnectionIDCounter,s=void 0,f.isMaster&&(this._objWaitForWorkerReadyPromises[i]={fnResolve:null,fnReject:null},s=new Promise(function(e,t){y._objWaitForWorkerReadyPromises[i].fnResolve=e,y._objWaitForWorkerReadyPromises[i].fnReject=t})),u={worker:r,workerID:r.id,nConnectionID:i,clientReverseCalls:null,clientWorkerTransportPlugin:null,strEndpointPath:o},this._objSessions[i]=u,c=function(){y.onConnectionEnded(i),r.terminate?r.terminate():r===t||r.isDead()||r.kill()},r.addEventListener?(h=function(){var e=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.isMaster||"object"!==a(t.data)||!t.data.jsonrpc||"rpc.connectToEndpoint"!==t.data.method){e.next=2;break}return e.abrupt("return",y._onRPCConnectToEndpoint(t.data,i));case 2:return e.next=4,y._routeMessage(t.data,u);case 4:case"end":return e.stop()}},e,y)}));return function(t){return e.apply(this,arguments)}}(),r.addEventListener("message",h),r.addEventListener("error",c)):(p=function(){var e=n(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.isMaster||"object"!==(void 0===t?"undefined":a(t))||!t.jsonrpc||"rpc.connectToEndpoint"!==t.method){e.next=2;break}return e.abrupt("return",y._onRPCConnectToEndpoint(t,i));case 2:return e.next=4,y._routeMessage(t,u);case 4:case"end":return e.stop()}},e,y)}));return function(t,r){return e.apply(this,arguments)}}(),d=function e(t,n){console.log("Worker ID "+r.id+" exited with code "+t+"."),y.onConnectionEnded(i),r.removeListener("message",p),r.removeListener("exit",e),r.removeListener("error",c)},r.on("message",p),r.on("exit",d),r.on("error",c)),!f.isMaster){e.next=20;break}return b=setTimeout(function(e){y._objWaitForWorkerReadyPromises[i].fnReject(new Error("Timed out waiting for worker to be ready for JSONRPC."))},g),e.next=19,s;case 19:clearTimeout(b);case 20:return e.abrupt("return",i);case 21:case"end":return e.stop()}},e,this)}));return e}()},{key:"_onRPCConnectToEndpoint",value:function(e,t){var r=e.params[0];if(l("number"==typeof t,"nConnectionID must be of type number."),!this._objSessions.hasOwnProperty(t))return void console.error(new Error("[rpc.connectToEndpoint] Worker with connection ID "+t+" doesn't exist. Maybe it was closed."));try{l("string"==typeof r,"strEndpointPath must be of type string."),this._objSessions[t].strEndpointPath=JSONRPC.EndpointBase.normalizePath(r),this._objWaitForWorkerReadyPromises[t].fnResolve(this._objSessions[t].strEndpointPath);var n=this._objSessions[t].worker,o={id:e.id,result:null,jsonrpc:"2.0"};n.postMessage?n.postMessage(o):n.send(o)}catch(r){var i=this._objSessions[t].worker,s={id:e.id,error:{message:r.message+"\n"+r.stack,code:0},jsonrpc:"2.0"};i.postMessage?i.postMessage(s):i.send(s),this._objWaitForWorkerReadyPromises[t].fnReject(r)}}},{key:"_makeReverseCallsClient",value:function(e,t){var r=new e(t.strEndpointPath);return t.clientWorkerTransportPlugin=new JSONRPC.Plugins.Client.WorkerTransport(t.worker,!0),r.addPlugin(t.clientWorkerTransportPlugin),this.emit("madeReverseCallsClient",r),r}},{key:"_routeMessage",value:function(){function e(e,t){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r,n){var o,i,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.worker,i=n.nConnectionID,"object"===(void 0===r?"undefined":a(r))){e.next=5;break}return console.error("["+t.pid+"] WorkerBidirectionalRouter: Received "+(void 0===r?"undefined":a(r))+" instead of object. Ignoring. RAW message: "+JSON.stringify(r)),e.abrupt("return");case 5:if(s=!r.hasOwnProperty("id"),e.prev=6,!r.hasOwnProperty("method")){e.next=31;break}if(this._jsonrpcServer){e.next=10;break}throw new Error("JSONRPC.Server not initialized on this Worker.");case 10:if(u=new JSONRPC.IncomingRequest,u.connectionID=i,u.router=this,u.stackInErrorMessage=!0,e.prev=14,c=this._objSessions[i].strEndpointPath,this._jsonrpcServer.endpoints.hasOwnProperty(c)){e.next=18;break}throw new JSONRPC.Exception("Unknown JSONRPC endpoint "+c+".",JSONRPC.Exception.METHOD_NOT_FOUND);case 18:u.endpoint=this._jsonrpcServer.endpoints[c],u.requestBody=r,u.requestObject=r,e.next=26;break;case 23:e.prev=23,e.t0=e.catch(14),u.callResult=e.t0;case 26:return e.next=28,this._jsonrpcServer.processRequest(u);case 28:s||(o.postMessage?o.postMessage(u.callResultSerialized):o.send(u.callResultSerialized)),e.next=45;break;case 31:if(!r.hasOwnProperty("result")&&!r.hasOwnProperty("error")){e.next=43;break}if(!this._objSessions.hasOwnProperty(i)||null!==this._objSessions[i].clientWorkerTransportPlugin){e.next=35;break}throw o.terminate?o.terminate():o!==t&&o.kill(),new Error("How can the client be not initialized, and yet getting responses from phantom requests?");case 35:if(!this._objSessions.hasOwnProperty(i)){e.next=40;break}return e.next=38,this._objSessions[i].clientWorkerTransportPlugin.processResponse(r);case 38:e.next=41;break;case 40:console.error("Connection ID "+i+" is closed and session is missing. Ignoring response: "+JSON.stringify(r));case 41:e.next=45;break;case 43:throw s=!1,new Error("Unable to qualify the message as a JSONRPC request or response.");case 45:e.next=54;break;case 47:e.prev=47,e.t1=e.catch(6),console.error(e.t1),console.error("Uncaught error. RAW remote message: "+JSON.stringify(r)),console.log("["+t.pid+"] Unclean state. Closing worker."),this.onConnectionEnded(i),o.terminate?o.terminate():o!==t&&o.kill();case 54:case"end":return e.stop()}},e,this,[[6,47],[14,23]])}));return e}()},{key:"onConnectionEnded",value:function(e){c(BidirectionalWorkerRouter.prototype.__proto__||Object.getPrototypeOf(BidirectionalWorkerRouter.prototype),"onConnectionEnded",this).call(this,e),delete this._objWaitForWorkerReadyPromises[e]}}]),BidirectionalWorkerRouter}(JSONRPC.RouterBase)}).call(t,r(0))},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(1),JSONRPC={};JSONRPC.Client=r(22),JSONRPC.Exception=r(3),e.exports=function(){function e(t,r,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];n(this,e),this._strMethod=t,this._arrParams=r,this._requestObject=null,this._mxRequestBody=null,this._mxResponseBody=null,this._responseObject=null,this._mxResult=null,this._strEndpointURL=null,this._objHeaders={},this._bCalled=!1,this._mxCallID=o,this._arrTransferList=i,Object.seal(this)}return i(e,[{key:"toRequestObject",value:function(){return s(null!==this.methodName,"this.methodName cannot be null."),s(Array.isArray(this.params),"this.params must be an Array."),void 0!==this.callID?{method:this.methodName,params:this.params,id:this.callID,jsonrpc:"2.0"}:{method:this.methodName,params:this.params,jsonrpc:"2.0"}}},{key:"callID",get:function(){return s("number"==typeof this._mxCallID||"string"==typeof this._mxCallID||void 0===this._mxCallID,"this._mxCallID must be of type number."),this._mxCallID}},{key:"isNotification",get:function(){return void 0===this._mxCallID}},{key:"params",get:function(){return this._arrParams},set:function(e){s(Array.isArray(e),"arrParams must be of type Array."),this._arrParams=e}},{key:"methodName",get:function(){return this._strMethod},set:function(e){s("string"==typeof e,"strMethod must be of type string."),this._strMethod=e}},{key:"headers",get:function(){return this._objHeaders}},{key:"endpointURL",get:function(){return this._strEndpointURL},set:function(e){s("string"==typeof e,"strEndpointURL must be of type string."),this._strEndpointURL=e}},{key:"requestObject",get:function(){return this._requestObject},set:function(e){s("object"===(void 0===e?"undefined":o(e))||Array.isArray(e),"objRequest must be of type Object or Array."),s(e.hasOwnProperty("method")||e.hasOwnProperty("params"),JSON.stringify(e),"objRequest must have either a method or params property."),this._requestObject=e}},{key:"requestBody",get:function(){return this._mxRequestBody},set:function(e){this._mxRequestBody=e}},{key:"isMethodCalled",get:function(){return this._bCalled},set:function(e){this._bCalled=e}},{key:"responseBody",get:function(){return this._mxResponseBody},set:function(e){s("string"==typeof e||"object"===(void 0===e?"undefined":o(e)),"mxResponseBody must be of type string or Object."),this._mxResponseBody=e}},{key:"responseObject",get:function(){return this._responseObject},set:function(e){if("object"!==(void 0===e?"undefined":o(e))&&!e.hasOwnProperty("result")&&!e.hasOwnProperty("error"))throw new JSONRPC.Exception("Invalid response structure. RAW response: "+JSON.stringify(this._mxResponseBody,void 0,"\t"),JSONRPC.Exception.PARSE_ERROR);this._responseObject=e}},{key:"callResult",get:function(){return this.isMethodCalled=!0,this._mxResult},set:function(e){this.isMethodCalled=!0,this._mxResult=e}},{key:"transferList",get:function(){return this._arrTransferList}}]),e}()},function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ClientPluginBase=r(4),e.exports=function(e){function Cache(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;o(this,Cache);var s=i(this,(Cache.__proto__||Object.getPrototypeOf(Cache)).call(this));if("object"!==(void 0===e?"undefined":u(e))||Array.isArray(e))throw new Error("Invalid objFunctionNameToCacheSeconds parameter given.");return Object.entries(e).forEach(function(e){var t=a(e,2),r=t[0],n=t[1];if(n<=0)throw new Error("Invalid cache duration "+n+" given for function "+r+". It must be a number of seconds greater than 0.")}),s._mapFunctionNameToCacheSeconds=new Map(Object.entries(e)),s._bDeepFreeze=t,s._bReturnDeepCopy=r,s._nMaxEntries=n,s.mapCache=new Map,s}return s(Cache,e),c(Cache,[{key:"clear",value:function(){this.mapCache.clear()}},{key:"deleteKeys",value:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t){return e.mapCache.delete(t)})}},{key:"afterJSONEncode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isNotification){e.next=2;break}return e.abrupt("return");case 2:this._mapFunctionNameToCacheSeconds.has(t.methodName)&&(r=this.constructor.getCacheKey(t.methodName,t.params),(this.mapCache.has(r)&&this.mapCache.size>this._nMaxEntries||!this.mapCache.has(r)&&this.mapCache.size>=this._nMaxEntries)&&this.clear(),this.mapCache.has(r)&&(this._isCacheEntryExpired(r)?this.mapCache.delete(r):(t.responseObject={jsonrpc:this.constructor.DEFAULT_JSONRPC_VERSION,result:null,id:t.callID},t.responseBody=JSON.stringify(t.responseObject,void 0,"\t"),t.isMethodCalled=!0)));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"afterJSONDecode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r,n,o,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isNotification){e.next=2;break}return e.abrupt("return");case 2:t.methodName&&this._mapFunctionNameToCacheSeconds.has(t.methodName)&&(r=this.constructor.getCacheKey(t.methodName,t.params),this.mapCache.has(r)?(n=this.mapCache.get(r).value,this._bReturnDeepCopy?(t.responseObject.result=this.constructor._deepCopy(n),this._bDeepFreeze&&this.constructor._deepFreeze(t.responseObject.result)):t.responseObject.result=n):(o=this._mapFunctionNameToCacheSeconds.get(t.methodName),i=1e3*o+Date.now(),this._bDeepFreeze&&!this._bReturnDeepCopy?(this.constructor._deepFreeze(t.responseObject.result),this.mapCache.set(r,{expiresAt:i,value:t.responseObject.result})):(s=this.constructor._deepCopy(t.responseObject.result),this.mapCache.set(r,{expiresAt:i,value:s}),this.bDeepFreeze&&(this.constructor._deepFreeze(s),this.constructor._deepFreeze(t.responseObject.result)))));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"_isCacheEntryExpired",value:function(e){return!this.mapCache.has(e)||Date.now()>this.mapCache.get(e).expiresAt}}],[{key:"getCacheKey",value:function(e,t){return e+"__"+JSON.stringify(t)}},{key:"_deepFreeze",value:function(e){if("object"===(void 0===e?"undefined":u(e)))return Object.getOwnPropertyNames(e).forEach(function(t){var r=e[t];"object"===(void 0===r?"undefined":u(r))&&null!=r&&Cache._deepFreeze(r)}),Object.freeze(e)}},{key:"_deepCopy",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"DEFAULT_JSONRPC_VERSION",get:function(){return"2.0"}}]),Cache}(JSONRPC.ClientPluginBase)},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ClientPluginBase=r(4),e.exports=function(e){function DebugLogger(){return o(this,DebugLogger),i(this,(DebugLogger.__proto__||Object.getPrototypeOf(DebugLogger)).apply(this,arguments))}return s(DebugLogger,e),a(DebugLogger,[{key:"afterJSONEncode",value:function(){function e(e){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="string"==typeof r.requestBody?r.requestBody:JSON.stringify(r.requestBody),n.length>1048576?console.log("["+t.pid+"] ["+(new Date).toISOString()+"] Sent JSONRPC request, "+r.requestObject.method+"(). Larger than 1 MB, not logging. \n"):console.log("["+t.pid+"] ["+(new Date).toISOString()+"] Sent JSONRPC request: "+n+"\n");case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"beforeJSONDecode",value:function(){function e(e){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="string"==typeof r.responseBody?r.responseBody:JSON.stringify(r.responseBody),n.length>1048576?console.log("["+t.pid+"] ["+(new Date).toISOString()+"] Received JSONRPC response, "+r.requestObject.method+"(). Larger than 1 MB, not logging. \n"):console.log("["+t.pid+"] ["+(new Date).toISOString()+"] Received JSONRPC response: "+n+"\n");case 2:case"end":return e.stop()}},e,this)}));return e}()}]),DebugLogger}(JSONRPC.ClientPluginBase)}).call(t,r(0))},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=null;t&&t.versions.electron&&((u=r(21))||!window&&!self||"function"!=typeof(window||self).require||(u=(window||self).require("electron")));var JSONRPC={};JSONRPC.ClientPluginBase=r(4),JSONRPC.Utils=r(2);var c=r(1);e.exports=function(e){function ElectronIPCTransport(e,t){o(this,ElectronIPCTransport);var r=i(this,(ElectronIPCTransport.__proto__||Object.getPrototypeOf(ElectronIPCTransport)).call(this));return r._objBrowserWindowRequestsPromises={},r._bBidirectionalMode=!!e,r._browserWindow=t,r._strChannel="jsonrpc_winid_"+(t?t.id:(window||self).require("electron").remote.getCurrentWindow().id),r._setupIPCTransport(),r}return s(ElectronIPCTransport,e),a(ElectronIPCTransport,[{key:"beforeJSONEncode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.requestBody=t.requestObject;case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"processResponse",value:function(){function e(e){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(("number"==typeof r.id||"string"==typeof r.id)&&this._objBrowserWindowRequestsPromises[r.id]){e.next=5;break}return console.error(new Error("Couldn't find JSONRPC response call ID in this._objWorkerRequestsPromises. RAW response: "+JSON.stringify(r))),console.error(new Error("RAW remote message: "+JSON.stringify(r))),console.error("["+t.pid+"] Unclean state. Unable to match message to an existing Promise or qualify it as a request."),e.abrupt("return");case 5:this._objBrowserWindowRequestsPromises[r.id].outgoingRequest.responseBody=r,this._objBrowserWindowRequestsPromises[r.id].outgoingRequest.responseObject=r,this._objBrowserWindowRequestsPromises[r.id].fnResolve(null),delete this._objBrowserWindowRequestsPromises[r.id];case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"makeRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isMethodCalled){e.next=2;break}return e.abrupt("return");case 2:if(t.isMethodCalled=!0,t.isNotification||(c("number"==typeof t.requestObject.id||"string"==typeof t.requestObject.id,"outgoingRequest.requestObject.id must be of type number or string."),this._objBrowserWindowRequestsPromises[t.requestObject.id]={outgoingRequest:t,promise:null},this._objBrowserWindowRequestsPromises[t.requestObject.id].promise=new Promise(function(e,n){r._objBrowserWindowRequestsPromises[t.requestObject.id].fnResolve=e,r._objBrowserWindowRequestsPromises[t.requestObject.id].fnReject=n})),this.browserWindow?this.browserWindow.webContents.send(this.channel,t.requestObject):(window||self).require("electron").ipcRenderer.send(this.channel,t.requestObject),!t.isNotification){e.next=8;break}e.next=9;break;case 8:return e.abrupt("return",this._objBrowserWindowRequestsPromises[t.requestObject.id].promise);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"beforeJSONDecode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"rejectAllPromises",value:function(e){console.log("["+t.pid+"] Rejecting all Promise instances in ElectronIPCTransport.");var r=0;for(var n in this._objBrowserWindowRequestsPromises)this._objBrowserWindowRequestsPromises[n].fnReject(e),delete this._objBrowserWindowRequestsPromises[n],r++;r&&console.error("["+t.pid+"] Rejected "+r+" Promise instances in ElectronIPCTransport.")}},{key:"_setupIPCTransport",value:function(){var e=this;this.browserWindow?(this._browserWindow.on("closed",function(){e.rejectAllPromises(new Error("BrowserWindow "+e.browserWindow.id+" closed"))}),this._bBidirectionalMode||u.ipcMain.on(this.channel,function(){var t=n(regeneratorRuntime.mark(function t(r,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.processResponse(n);case 2:case"end":return t.stop()}},t,e)}));return function(e,r){return t.apply(this,arguments)}}())):this._bBidirectionalMode||(window||self).require("electron").ipcRenderer.on(this._strChannel,function(){var t=n(regeneratorRuntime.mark(function t(r,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.processResponse(n);case 2:case"end":return t.stop()}},t,e)}));return function(e,r){return t.apply(this,arguments)}}())}},{key:"browserWindow",get:function(){return this._browserWindow}},{key:"channel",get:function(){return this._strChannel}}]),ElectronIPCTransport}(JSONRPC.ClientPluginBase)}).call(t,r(0))},function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ClientPluginBase=r(4),JSONRPC.Exception=r(3),e.exports=function(e){function PrettyBrowserConsoleErrors(){return o(this,PrettyBrowserConsoleErrors),i(this,(PrettyBrowserConsoleErrors.__proto__||Object.getPrototypeOf(PrettyBrowserConsoleErrors)).apply(this,arguments))}return s(PrettyBrowserConsoleErrors,e),a(PrettyBrowserConsoleErrors,[{key:"exceptionCatch",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.error(t.callResult);case 1:case"end":return e.stop()}},e,this)}));return e}()}]),PrettyBrowserConsoleErrors}(JSONRPC.ClientPluginBase)},function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ClientPluginBase=r(4),JSONRPC.Utils=r(2);var u=r(95);e.exports=function(e){function ProcessStdIOTransport(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];o(this,ProcessStdIOTransport);var n=i(this,(ProcessStdIOTransport.__proto__||Object.getPrototypeOf(ProcessStdIOTransport)).call(this));return n._strExePath=e,n._strWorkingDirectoryPath=t,n._arrArguments=r,n}return s(ProcessStdIOTransport,e),a(ProcessStdIOTransport,[{key:"makeRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isMethodCalled){e.next=2;break}return e.abrupt("return");case 2:return t.isMethodCalled=!0,r={cwd:this._strWorkingDirectoryPath,maxBuffer:10485760},n=u.spawn(this._strExePath,this._arrArguments,r),e.abrupt("return",new Promise(function(e,r){n.on("close",function(t){n.stdin.end(),e(null)}),t.responseBody="",n.stdout.on("data",function(e){t.responseBody+=e}),n.on("error",function(e){r(e)}),n.stdin.setEncoding("utf-8"),n.stdin.write(t.requestBody)}));case 6:case"end":return e.stop()}},e,this)}));return e}()}]),ProcessStdIOTransport}(JSONRPC.ClientPluginBase)},function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ClientPluginBase=r(4);var u=r(64);e.exports=function(e){function SignatureAdd(e,t){o(this,SignatureAdd);var r=i(this,(SignatureAdd.__proto__||Object.getPrototypeOf(SignatureAdd)).call(this));return r.strAPIKey=e,r._arrExtraURLVariables=t,r.strKeyMetaData=SignatureAdd.getKeyMetaData(e),r}return s(SignatureAdd,e),a(SignatureAdd,[{key:"beforeJSONEncode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.requestObject.expires=parseInt((new Date).getTime()/1e3+86400,10);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"afterJSONEncode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=new u("SHA-256","TEXT"),r.setHMACKey(this.strAPIKey,"TEXT"),r.update(t.requestBody),n=r.getHMAC("HEX"),null!==this.strKeyMetaData&&(n=this.strKeyMetaData+":"+n),t.endpointURL.indexOf("?")>-1?t.endpointURL+="&":t.endpointURL+="?",-1===t.endpointURL.indexOf("verify")&&(t.endpointURL+="verify="+n),"&"===t.endpointURL.charAt(t.endpointURL.length-1)&&(t.endpointURL=t.endpointURL.slice(0,-1));for(o in this._arrExtraURLVariables)t.endpointURL+="&"+o+"="+this._arrExtraURLVariables[o];case 9:case"end":return e.stop()}},e,this)}));return e}()}],[{key:"getKeyMetaData",value:function(e){var t=null,r=e.split(":",2);return 1!==r.length&&(t=r[0]),t}}]),SignatureAdd}(JSONRPC.ClientPluginBase)},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ClientPluginBase=r(4),JSONRPC.Utils=r(2);var u=r(1);e.exports=function(e){function WebRTCTransport(e,t){o(this,WebRTCTransport);var r=i(this,(WebRTCTransport.__proto__||Object.getPrototypeOf(WebRTCTransport)).call(this));return r._objRTCDataChannelRequestsPromises={},r._bBidirectionalWebRTCMode=!!t,r._dataChannel=e,r._setupRTCDataChannel(),r}return s(WebRTCTransport,e),a(WebRTCTransport,[{key:"processResponse",value:function(){function e(e,t){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=11;break}e.prev=1,n=JSONRPC.Utils.jsonDecodeSafe(r),e.next=11;break;case 5:return e.prev=5,e.t0=e.catch(1),console.error(e.t0),console.error("Unable to parse JSON. RAW remote response: "+r),"open"===this._dataChannel.readyState&&this._dataChannel.close(),e.abrupt("return");case 11:if(("number"==typeof n.id||"string"==typeof n.id)&&this._objRTCDataChannelRequestsPromises[n.id]){e.next=17;break}return console.error(new Error("Couldn't find JSONRPC response call ID in this._objRTCDataChannelRequestsPromises. RAW response: "+r)),console.error(new Error("RAW remote message: "+r)),console.log("["+t.pid+"] Unclean state. Unable to match WebRTC message to an existing Promise or qualify it as a request."),"open"===this._dataChannel.readyState&&this.dataChannel.close(1e3,"Unclean state. Unable to match WebRTC message to an existing Promise or qualify it as a request."),e.abrupt("return");case 17:this._objRTCDataChannelRequestsPromises[n.id].outgoingRequest.responseBody=r,this._objRTCDataChannelRequestsPromises[n.id].outgoingRequest.responseObject=n,this._objRTCDataChannelRequestsPromises[n.id].fnResolve(null),delete this._objRTCDataChannelRequestsPromises[n.id];case 21:case"end":return e.stop()}},e,this,[[1,5]])}));return e}()},{key:"makeRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isMethodCalled){e.next=2;break}return e.abrupt("return");case 2:if("open"===this.dataChannel.readyState){e.next=4;break}throw new Error("RTCDataChannel not connected.");case 4:if(t.isMethodCalled=!0,t.isNotification||(u("number"==typeof t.requestObject.id||"string"==typeof t.requestObject.id,"outgoingRequest.requestObject.id must be of type number or string."),this._objRTCDataChannelRequestsPromises[t.requestObject.id]={outgoingRequest:t,promise:null},this._objRTCDataChannelRequestsPromises[t.requestObject.id].promise=new Promise(function(e,n){r._objRTCDataChannelRequestsPromises[t.requestObject.id].fnResolve=e,r._objRTCDataChannelRequestsPromises[t.requestObject.id].fnReject=n})),this.dataChannel.send(t.requestBody),!t.isNotification){e.next=10;break}e.next=11;break;case 10:return e.abrupt("return",this._objRTCDataChannelRequestsPromises[t.requestObject.id].promise);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"rejectAllPromises",value:function(e){console.log("["+t.pid+"] Rejecting all Promise instances in WebRTCTransport.");var r=0;for(var n in this._objRTCDataChannelRequestsPromises)this._objRTCDataChannelRequestsPromises[n].fnReject(e),delete this._objRTCDataChannelRequestsPromises[n],r++;r&&console.error("["+t.pid+"] Rejected "+r+" Promise instances in WebRTCTransport.")}},{key:"_setupRTCDataChannel",value:function(){var e=this,t=function(t){e.rejectAllPromises(t)},r=function(){var t=n(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.processResponse(r.data);case 2:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),o=function n(o){e.rejectAllPromises(new Error("RTCDataChannel closed.")),e._dataChannel.removeEventListener("close",n),e._dataChannel.removeEventListener("error",t),e._bBidirectionalWebRTCMode||e._dataChannel.removeEventListener("message",r)};this._dataChannel.addEventListener("close",o),this._dataChannel.addEventListener("error",t),this._bBidirectionalWebRTCMode||this._dataChannel.addEventListener("message",r)}},{key:"dataChannel",get:function(){return this._dataChannel}}]),WebRTCTransport}(JSONRPC.ClientPluginBase)}).call(t,r(0))},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ClientPluginBase=r(4),JSONRPC.Utils=r(2),JSONRPC.WebSocketAdapters={},JSONRPC.WebSocketAdapters.WebSocketWrapperBase=r(17);var u=r(1);e.exports=function(e){function WebSocketTransport(e,t){o(this,WebSocketTransport);var r=i(this,(WebSocketTransport.__proto__||Object.getPrototypeOf(WebSocketTransport)).call(this));return r._objWebSocketRequestsPromises={},r._bBidirectionalWebSocketMode=!!t,r._webSocket=e,r._setupWebSocket(),r}return s(WebSocketTransport,e),a(WebSocketTransport,[{key:"processResponse",value:function(){function e(e,t){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=11;break}e.prev=1,n=JSONRPC.Utils.jsonDecodeSafe(r),e.next=11;break;case 5:return e.prev=5,e.t0=e.catch(1),console.error(e.t0),console.error("Unable to parse JSON. RAW remote response: "+r),this._webSocket.readyState===JSONRPC.WebSocketAdapters.WebSocketWrapperBase.OPEN&&this._webSocket.close(1e3,"Unable to parse JSON. RAW remote response: "+r),e.abrupt("return");case 11:if(("number"==typeof n.id||"string"==typeof n.id)&&this._objWebSocketRequestsPromises[n.id]){e.next=18;break}return console.error(n),console.error(new Error("Couldn't find JSONRPC response call ID in this._objWebSocketRequestsPromises. RAW response: "+r)),console.error(new Error("RAW remote message: "+r)),console.log("["+t.pid+"] Unclean state. Unable to match WebSocket message to an existing Promise or qualify it as a request."),this._webSocket.readyState===JSONRPC.WebSocketAdapters.WebSocketWrapperBase.OPEN&&this.webSocket.close(1e3,"Unclean state. Unable to match WebSocket message to an existing Promise or qualify it as a request."),e.abrupt("return");case 18:this._objWebSocketRequestsPromises[n.id].outgoingRequest.responseBody=r,this._objWebSocketRequestsPromises[n.id].outgoingRequest.responseObject=n,this._objWebSocketRequestsPromises[n.id].fnResolve(null),delete this._objWebSocketRequestsPromises[n.id];case 22:case"end":return e.stop()}},e,this,[[1,5]])}));return e}()},{key:"makeRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isMethodCalled){e.next=2;break}return e.abrupt("return");case 2:if(this.webSocket.readyState===JSONRPC.WebSocketAdapters.WebSocketWrapperBase.OPEN){e.next=4;break}throw new Error("WebSocket not connected. Current WebSocket readyState: "+JSON.stringify(this.webSocket.readyState));case 4:if(t.isMethodCalled=!0,t.isNotification||(u("number"==typeof t.requestObject.id||"string"==typeof t.requestObject.id,"outgoingRequest.requestObject.id must be of type number or string."),this._objWebSocketRequestsPromises[t.requestObject.id]={outgoingRequest:t,promise:null},this._objWebSocketRequestsPromises[t.requestObject.id].promise=new Promise(function(e,n){r._objWebSocketRequestsPromises[t.requestObject.id].fnResolve=e,r._objWebSocketRequestsPromises[t.requestObject.id].fnReject=n})),this.webSocket.send(t.requestBody),!t.isNotification){e.next=10;break}e.next=11;break;case 10:return e.abrupt("return",this._objWebSocketRequestsPromises[t.requestObject.id].promise);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"rejectAllPromises",value:function(e){Object.values(this._objWebSocketRequestsPromises).length&&console.log("["+t.pid+"] Rejecting all Promise instances in WebSocketTransport.");var r=0;for(var n in this._objWebSocketRequestsPromises)this._objWebSocketRequestsPromises[n].fnReject(e),delete this._objWebSocketRequestsPromises[n],r++;r&&console.error("["+t.pid+"] Rejected "+r+" Promise instances in WebSocketTransport.")}},{key:"_setupWebSocket",value:function(){var e=this;if(this._webSocket.on&&this._webSocket.removeListener&&t&&t.release){var r=function(t){e.rejectAllPromises(t)},o=function(){var t=n(regeneratorRuntime.mark(function t(r,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.processResponse(r);case 2:case"end":return t.stop()}},t,e)}));return function(e,r){return t.apply(this,arguments)}}(),i=function t(n,i,s){e.rejectAllPromises(new Error("WebSocket closed. Code: "+JSON.stringify(n)+". Message: "+JSON.stringify(i))),e._bBidirectionalWebSocketMode||e._webSocket.removeListener("message",o),e._webSocket.removeListener("close",t),e._webSocket.removeListener("error",r)};this._webSocket.on("error",r),this._webSocket.on("close",i),this._bBidirectionalWebSocketMode||this._webSocket.on("message",o)}else{if(!this._webSocket.addEventListener||!this._webSocket.removeEventListener)throw new Error("Failed to detect runtime or websocket interface not support (browser, nodejs, websockets/ws npm package compatible interface, etc.");var s=function(){var t=n(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.processResponse(r.data);case 2:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),a=function(t){e.rejectAllPromises(t)},u=function t(r){e.rejectAllPromises(new Error("WebSocket closed. Code: "+JSON.stringify(r.code)+". Message: "+JSON.stringify(r.reason)+". wasClean: "+JSON.stringify(r.wasClean))),e._bBidirectionalWebSocketMode||e._webSocket.removeEventListener("message",s),e._webSocket.removeEventListener("close",t),e._webSocket.removeEventListener("error",a)};this._bBidirectionalWebSocketMode||this._webSocket.addEventListener("message",s),this._webSocket.addEventListener("close",u),this._webSocket.addEventListener("error",a)}}},{key:"webSocket",get:function(){return this._webSocket}}]),WebSocketTransport}(JSONRPC.ClientPluginBase)}).call(t,r(0))},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ClientPluginBase=r(4),JSONRPC.Utils=r(2);var u=r(1),c=void 0;try{c=r(21)}catch(e){}var WorkerThreadTransport=function(e){function WorkerThreadTransport(e,t){o(this,WorkerThreadTransport);var r=i(this,(WorkerThreadTransport.__proto__||Object.getPrototypeOf(WorkerThreadTransport)).call(this));return u(e instanceof c.Worker||e===c),r._objWorkerRequestsPromises={},r._bBidirectionalMode=!!t,r._threadWorker=e,r._threadID=e.threadId,r._setupThreadWorker(),r}return s(WorkerThreadTransport,e),a(WorkerThreadTransport,[{key:"beforeJSONEncode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.requestBody=t.requestObject;case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"processResponse",value:function(){function e(e){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(("number"==typeof r.id||"string"==typeof r.id)&&this._objWorkerRequestsPromises[r.id]){e.next=6;break}return console.error(new Error("Couldn't find JSONRPC response call ID in this._objWorkerRequestsPromises from thread ID "+this._threadID+". RAW response: "+JSON.stringify(r))),console.error(new Error("RAW remote message from thread ID "+this._threadID+": "+JSON.stringify(r))),console.log("Unclean state in WorkerThreadTransport. Unable to match message from thread Worker thread ID "+this._threadID+" to an existing Promise or qualify it as a request."),c.isMainThread?this.threadWorker.terminate():t.exit(1),e.abrupt("return");case 6:this._objWorkerRequestsPromises[r.id].outgoingRequest.responseBody=r,this._objWorkerRequestsPromises[r.id].outgoingRequest.responseObject=r,this._objWorkerRequestsPromises[r.id].fnResolve(null),delete this._objWorkerRequestsPromises[r.id];case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"makeRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isMethodCalled){e.next=2;break}return e.abrupt("return");case 2:if(t.isMethodCalled=!0,t.isNotification||(u("number"==typeof t.requestObject.id||"string"==typeof t.requestObject.id,"outgoingRequest.requestObject.id must be of type number or string."),this._objWorkerRequestsPromises[t.requestObject.id]={outgoingRequest:t,promise:null},this._objWorkerRequestsPromises[t.requestObject.id].promise=new Promise(function(e,n){r._objWorkerRequestsPromises[t.requestObject.id].fnResolve=e,r._objWorkerRequestsPromises[t.requestObject.id].fnReject=n})),c.isMainThread?this.threadWorker.postMessage(t.requestObject,t.transferList):c.parentPort.postMessage(t.requestObject,t.transferList),!t.isNotification){e.next=8;break}e.next=9;break;case 8:return e.abrupt("return",this._objWorkerRequestsPromises[t.requestObject.id].promise);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"beforeJSONDecode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"rejectAllPromises",value:function(e){console.log("Rejecting all Promise instances for WorkerThreadTransport thread Id "+this._threadID+".");var t=0;for(var r in this._objWorkerRequestsPromises)this._objWorkerRequestsPromises[r].fnReject(e),delete this._objWorkerRequestsPromises[r],t++;t&&console.error("Rejected "+t+" Promise instances for WorkerThreadTransport thread Id "+this._threadID)}},{key:"_setupThreadWorker",value:function(){var e=this,t=function(t){e.rejectAllPromises(t)},r=function(){e.rejectAllPromises(new Error("Thread MessagePort closed."))},o=function(){var t=n(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.processResponse(r);case 2:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),i=function n(i){e.rejectAllPromises(new Error("Thread Worker with thread ID "+e._threadID+" closed. Code: "+JSON.stringify(i))),c.isMainThread?(e._threadWorker.removeListener("exit",n),e._threadWorker.removeListener("error",t),e._bBidirectionalMode||e._threadWorker.removeListener("message",o)):(c.parentPort.removeListener("close",r),e._bBidirectionalMode||c.parentPort.removeListener("message",o))};c.isMainThread?(this._threadWorker.on("exit",i),this._threadWorker.on("error",t),this._bBidirectionalMode||this._threadWorker.on("message",o)):(c.parentPort.on("close",r),this._bBidirectionalMode||c.parentPort.on("message",o))}},{key:"threadWorker",get:function(){return this._threadWorker}}]),WorkerThreadTransport}(JSONRPC.ClientPluginBase);e.exports=WorkerThreadTransport}).call(t,r(0))},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ClientPluginBase=r(4),JSONRPC.Utils=r(2);var u=r(1);e.exports=function(e){function WorkerTransport(e,t){o(this,WorkerTransport);var r=i(this,(WorkerTransport.__proto__||Object.getPrototypeOf(WorkerTransport)).call(this));return r._objWorkerRequestsPromises={},r._bBidirectionalWorkerMode=!!t,r._worker=e,r._setupWorker(),r}return s(WorkerTransport,e),a(WorkerTransport,[{key:"beforeJSONEncode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.requestBody=t.requestObject;case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"processResponse",value:function(){function e(e){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(("number"==typeof r.id||"string"==typeof r.id)&&this._objWorkerRequestsPromises[r.id]){e.next=6;break}return console.error(new Error("Couldn't find JSONRPC response call ID in this._objWorkerRequestsPromises. RAW response: "+JSON.stringify(r))),console.error(new Error("RAW remote message: "+JSON.stringify(r))),console.log("["+t.pid+"] Unclean state. Unable to match Worker message to an existing Promise or qualify it as a request."),this.worker.terminate?this.worker.terminate():this.worker!==t&&this.worker.kill(),e.abrupt("return");case 6:this._objWorkerRequestsPromises[r.id].outgoingRequest.responseBody=r,this._objWorkerRequestsPromises[r.id].outgoingRequest.responseObject=r,this._objWorkerRequestsPromises[r.id].fnResolve(null),delete this._objWorkerRequestsPromises[r.id];case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"makeRequest",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isMethodCalled){e.next=2;break}return e.abrupt("return");case 2:if(!this.worker.isDead||!this.worker.isDead()){e.next=4;break}throw new Error("Worker not connected.");case 4:if(t.isMethodCalled=!0,t.isNotification||(u("number"==typeof t.requestObject.id||"string"==typeof t.requestObject.id,"outgoingRequest.requestObject.id must be of type number or string."),this._objWorkerRequestsPromises[t.requestObject.id]={outgoingRequest:t,promise:null},this._objWorkerRequestsPromises[t.requestObject.id].promise=new Promise(function(e,n){r._objWorkerRequestsPromises[t.requestObject.id].fnResolve=e,r._objWorkerRequestsPromises[t.requestObject.id].fnReject=n})),this.worker.postMessage?t.transferList.length?this.worker.postMessage(t.requestObject,t.transferList):this.worker.postMessage(t.requestObject):this.worker.send(t.requestObject),!t.isNotification){e.next=10;break}e.next=11;break;case 10:return e.abrupt("return",this._objWorkerRequestsPromises[t.requestObject.id].promise);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"beforeJSONDecode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"rejectAllPromises",value:function(e){console.log("["+t.pid+"] Rejecting all Promise instances in WorkerTransport.");var r=0;for(var n in this._objWorkerRequestsPromises)this._objWorkerRequestsPromises[n].fnReject(e),delete this._objWorkerRequestsPromises[n],r++;r&&console.error("["+t.pid+"] Rejected "+r+" Promise instances in WorkerTransport.")}},{key:"_setupWorker",value:function(){var e=this;if(this._worker.addEventListener){var t=function(t){e.rejectAllPromises(t)},r=function(){var t=n(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.processResponse(r.data);case 2:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}();this._worker.addEventListener("error",t),this._bBidirectionalWorkerMode||this._worker.addEventListener("message",r)}else{var o=function(t){e.rejectAllPromises(t)},i=function(){var t=n(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.processResponse(r);case 2:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),s=function t(r,n){e.rejectAllPromises(new Error("Worker closed. Code: "+JSON.stringify(r)+". Signal: "+JSON.stringify(n))),e._worker.removeListener("exit",t),e._worker.removeListener("error",o),e._bBidirectionalWorkerMode||e._worker.removeListener("message",i)};this._worker.on("exit",s),this._worker.on("error",o),this._bBidirectionalWorkerMode||this._worker.on("message",i)}}},{key:"worker",get:function(){return this._worker}}]),WorkerTransport}(JSONRPC.ClientPluginBase)}).call(t,r(0))},function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ServerPluginBase=r(12),e.exports=function(e){function AuthenticationSkip(){return o(this,AuthenticationSkip),i(this,(AuthenticationSkip.__proto__||Object.getPrototypeOf(AuthenticationSkip)).apply(this,arguments))}return s(AuthenticationSkip,e),a(AuthenticationSkip,[{key:"beforeJSONDecode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.isAuthenticated=!0;case 1:case"end":return e.stop()}},e,this)}));return e}()}]),AuthenticationSkip}(JSONRPC.ServerPluginBase)},function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ServerPluginBase=r(12),e.exports=function(e){function AuthenticationSkip(){return o(this,AuthenticationSkip),i(this,(AuthenticationSkip.__proto__||Object.getPrototypeOf(AuthenticationSkip)).apply(this,arguments))}return s(AuthenticationSkip,e),a(AuthenticationSkip,[{key:"beforeJSONDecode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.isAuthorized=!0;case 1:case"end":return e.stop()}},e,this)}));return e}()}]),AuthenticationSkip}(JSONRPC.ServerPluginBase)},function(e,t,r){"use strict";(function(t){function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ServerPluginBase=r(12),e.exports=function(e){function DebugLogger(){return o(this,DebugLogger),i(this,(DebugLogger.__proto__||Object.getPrototypeOf(DebugLogger)).apply(this,arguments))}return s(DebugLogger,e),a(DebugLogger,[{key:"beforeJSONDecode",value:function(){function e(e){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.requestBody.length>1048576?console.log("["+t.pid+"] ["+(new Date).toISOString()+"] Received JSONRPC request at endpoint path "+r.endpoint.path+", "+r.requestObject.method+"(). Larger than 1 MB, not logging. \n"):console.log("["+t.pid+"] ["+(new Date).toISOString()+"] Received JSONRPC request at endpoint path "+r.endpoint.path+": "+("string"==typeof r.requestBody?r.requestBody:JSON.stringify(r.requestBody))+"\n");case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"afterSerialize",value:function(){function e(e){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.requestBody.length>1048576?console.log("["+t.pid+"] ["+(new Date).toISOString()+"] Sending JSONRPC response, "+r.requestObject.method+"(). Larger than 1 MB, not logging. \n"):console.log("["+t.pid+"] ["+(new Date).toISOString()+"] Sending JSONRPC response: "+("string"==typeof r.callResultSerialized?r.callResultSerialized:JSON.stringify(r.callResultSerialized))+"\n");case 1:case"end":return e.stop()}},e,this)}));return e}()}]),DebugLogger}(JSONRPC.ServerPluginBase)}).call(t,r(0))},function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ServerPluginBase=r(12),e.exports=function(e){function PerformanceCounters(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(this,PerformanceCounters);var n=i(this,(PerformanceCounters.__proto__||Object.getPrototypeOf(PerformanceCounters)).call(this));return n._mapFunctioNameToMetrics=new Map,n._nCurrentlyRunningFunctions=0,n._bExportMethodOnEndpoint=e,n._bFakeAuthenticatedExportedMethod=t,n._bFakeAuthorizedExportedMethod=r,n}return s(PerformanceCounters,e),a(PerformanceCounters,[{key:"afterJSONDecode",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._bExportMethodOnEndpoint&&["rpc.performanceCounters","rpc.performanceCountersClear"].includes(t.requestObject.method)&&(this._bFakeAuthenticatedExportedMethod&&(t.isAuthenticated=!0),this._bFakeAuthorizedExportedMethod&&(t.isAuthorized=!0)),t.startDurationTimer(),t.requestObject.method&&!t.isNotification&&this._nCurrentlyRunningFunctions++;case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"result",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.isNotification||--this._nCurrentlyRunningFunctions<0&&(this._nCurrentlyRunningFunctions=0),r=this._functionMappings(t.requestObject.method),r.successCount+=1,r.successMillisecondsTotal+=t.durationMilliseconds,r.successMillisecondsAverage=parseInt(r.successMillisecondsTotal/r.successCount);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"exceptionCatch",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.requestObject&&t.requestObject.method&&(t.isNotification||--this._nCurrentlyRunningFunctions<0&&(this._nCurrentlyRunningFunctions=0),r=this._functionMappings(t.requestObject.method),r.errorCount+=1,r.errorMillisecondsTotal+=t.durationMilliseconds,r.errorMillisecondsAverage=parseInt(r.errorMillisecondsTotal/r.errorCount));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"callFunction",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.requestObject&&t.requestObject.method&&this._bExportMethodOnEndpoint&&("rpc.performanceCounters"===t.requestObject.method?t.callResult={metrics:this.metricsAsObject,runningCallsCount:this.runningCallsCount}:"rpc.performanceCountersClear"===t.requestObject.method&&(t.callResult=!0,this._mapFunctioNameToMetrics.clear()));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"_functionMappings",value:function(e){var t=this._mapFunctioNameToMetrics.get(e);return t||(t={successCount:0,errorCount:0,successMillisecondsTotal:0,errorMillisecondsTotal:0,successMillisecondsAverage:0,errorMillisecondsAverage:0},this._mapFunctioNameToMetrics.set(e,t)),t}},{key:"metrics",get:function(){return this._mapFunctioNameToMetrics}},{key:"metricsAsObject",get:function(){var e={},t=!0,r=!1,n=void 0;try{for(var o,i=this._mapFunctioNameToMetrics.keys()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;e[s]=this._mapFunctioNameToMetrics.get(s)}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}return e}},{key:"runningCallsCount",get:function(){return this._nCurrentlyRunningFunctions}}]),PerformanceCounters}(JSONRPC.ServerPluginBase)},function(e,t,r){"use strict";(function(t){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var s=t[o](i),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),JSONRPC={};JSONRPC.ServerPluginBase=r(12),JSONRPC.Exception=r(3);var l=r(1),f=r(92),h=r(23),p=r(60),URLPublic=function(e){function URLPublic(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:URLPublic.COMPRESSION_TYPE_ZLIB;i(this,URLPublic);var r=s(this,(URLPublic.__proto__||Object.getPrototypeOf(URLPublic)).call(this));return URLPublic.validateEncryptionKeys(e),r._objKeys=e,r._strCompressionType=t,Object.seal(r),r}return a(URLPublic,e),c(URLPublic,[{key:"URLRequestGenerate",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r,o){var i,s,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:URLPublic.MODE_AES_128;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={},n(i,this.constructor.REQUEST_PARAM_NAME_METHOD,r),n(i,this.constructor.REQUEST_PARAM_NAME_PARAMS,o),s=i,null!==a&&(l(Number.isInteger(a),"Invalid nMaxAgeSeconds parameter for URLRequestGenerate. Expected Integer, but got "+JSON.stringify(a)+"."),s[this.constructor.REQUEST_PARAM_NAME_EXPIRE]=parseInt((new Date).getTime()/1e3,10)+a),e.abrupt("return",this.JSONRequestToPublicURL(t,JSON.stringify(s),u));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"JSONRequestToPublicURL",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:URLPublic.MODE_AES_128;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l("string"==typeof r,'Invalid parameter type for strJSONRequest. Expected "string", but got "'+(void 0===r?"undefined":u(r))+'" value '+JSON.stringify(r)+"."),n=null,e.t0=o,e.next=e.t0===this.constructor.MODE_AES_128?5:e.t0===this.constructor.MODE_BASE64?9:e.t0===this.constructor.MODE_PLAIN?13:17;break;case 5:return e.next=7,this.JSONRequestToURLEncryptedParams(r);case 7:return n=e.sent,e.abrupt("break",18);case 9:return e.next=11,this.JSONRequestToURLBase64Params(r);case 11:return n=e.sent,e.abrupt("break",18);case 13:return e.next=15,this.JSONRequestToURLPlainParams(r);case 15:return n=e.sent,e.abrupt("break",18);case 17:throw new JSONRPC.Exception("Unhandled encryption mode "+JSON.stringify(o)+".");case 18:return l(null!==n,"Invalid objPublicRequest: "+JSON.stringify(n)+"."),o!==this.constructor.MODE_DEFAULT&&(n[this.constructor.URL_PARAM_NAME_MODE]=o),t.includes("?")?t+="&":t+="?",t+=h.stringify(n),e.abrupt("return",t);case 23:case"end":return e.stop()}},e,this)}));return e}()},{key:"JSONRequestToURLEncryptedParams",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,o,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.JSONRequestSignatureAndIV(t,this._activeKeyIndex),e.next=3,this.URLParamEncrypt(t,o);case 3:return i=e.sent,r={},n(r,this._activeKeyIndex,this.constructor.base64URLEscape(i)),n(r,this.constructor.URL_PARAM_NAME_VERIFY,this.constructor.base64URLEscape(o.toString("base64"))),s=r,e.abrupt("return",s);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"JSONRequestToURLPlainParams",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.JSONRequestSignatureAndIV(t,this._activeKeyIndex),r={},n(r,this._activeKeyIndex,t),n(r,this.constructor.URL_PARAM_NAME_VERIFY,this.constructor.base64URLEscape(o.toString("base64"))),i=r,e.abrupt("return",i);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"JSONRequestToURLBase64Params",value:function(){function e(e){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function e(r){var o,i,s,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.JSONRequestSignatureAndIV(r,this._activeKeyIndex),s=void 0,e.next=4,this.constructor.compress(t.from(r),this.compressionType);case 4:return s=e.sent,l(void 0!==s,"Invalid type for bufferCompresedData after compress."),a=s.toString("base64"),o={},n(o,this._activeKeyIndex,this.constructor.base64URLEscape(a)),n(o,this.constructor.URL_PARAM_NAME_VERIFY,this.constructor.base64URLEscape(i.toString("base64"))),u=o,e.abrupt("return",u);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"beforeJSONDecode",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("GET"===t.requestHTTPMethod&&"object"===u(t.requestHTTPGetQuery)&&null!==t.requestHTTPGetQuery){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.PublicURLParamsToJSONRequest(t.requestHTTPGetQuery);case 4:r=e.sent,n=null,e.prev=6,n=JSON.parse(r),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(6),console.error(e.t0),new JSONRPC.Exception("Failed to decode URL request.");case 14:if(n.id=null,n.jsonrpc=this.constructor.DEFAULT_JSONRPC_VERSION,n.method=n[this.constructor.REQUEST_PARAM_NAME_METHOD],n.params=n[this.constructor.REQUEST_PARAM_NAME_PARAMS],delete n[this.constructor.REQUEST_PARAM_NAME_METHOD],delete n[this.constructor.REQUEST_PARAM_NAME_PARAMS],!n.hasOwnProperty(this.constructor.REQUEST_PARAM_NAME_EXPIRE)){e.next=25;break}if(n.expires=n[this.constructor.REQUEST_PARAM_NAME_EXPIRE],delete n[this.constructor.REQUEST_PARAM_NAME_EXPIRE],!(n.expires<parseInt((new Date).getTime()/1e3,10))){e.next=25;break}throw new JSONRPC.Exception('Replay attack prevention. Request is past "expires" timestamp.',JSONRPC.Exception.REQUEST_EXPIRED);case 25:t.isAuthenticated=!0,t.isAuthorized=!0,t.requestBody=JSON.stringify(n);case 28:case"end":return e.stop()}},e,this,[[6,10]])}));return e}()},{key:"URLParamDecrypt",value:function(){function e(e,t,n){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function e(r,n,o){var i,s,a,c,h,p,d,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l("string"==typeof o,"strEncryptionKeyIndex must be of type string."),l("string"==typeof r,'Invalid parameter type for strBase64Data in URLParamDecrypt. Expected "string" but got '+(void 0===r?"undefined":u(r))+"."),i=null,s=r.substr(0,this.constructor.BROTLI_PREFIX.length)===this.constructor.BROTLI_PREFIX,a=r.substr(0,this.constructor.NONE_PREFIX.length)===this.constructor.NONE_PREFIX,c=void 0,c=s?t.from(r.substr(this.constructor.BROTLI_PREFIX.length),"base64"):a?t.from(r.substr(this.constructor.NONE_PREFIX.length),"base64"):t.from(r,"base64"),h=f.cipher.createDecipher("AES-CBC",this._keys[o].aes_key),h.start({iv:f.util.createBuffer(n)}),h.update(f.util.createBuffer(c)),h.finish(),p=t.from(h.output.getBytes(),"binary"),d=this.constructor.COMPRESSION_TYPE_ZLIB,s?d=this.constructor.COMPRESSION_TYPE_BROTLI:a&&(d=this.constructor.NONE),e.next=16,this.constructor.decompress(p,d);case 16:return i=e.sent,l(i instanceof t,'Invalid decompress return type for URLParamDecrypt. Expected "buffer" but got '+(void 0===i?"undefined":u(i))+"."),b=i.toString(),l("string"==typeof b,'Invalid return type for URLParamDecrypt. Expected "string" but got '+(void 0===b?"undefined":u(b))+"."),e.abrupt("return",b);case 21:case"end":return e.stop()}},e,this)}));return e}()},{key:"URLParamDecode",value:function(){function e(e){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function e(r){var n,o,i,s,a,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l("string"==typeof r,'Invalid parameter type for strJSONRequest in URLParamDecode. Expected "string" but got '+(void 0===r?"undefined":u(r))+"."),n=r.substr(0,this.constructor.BROTLI_PREFIX.length)===this.constructor.BROTLI_PREFIX,o=r.substr(0,this.constructor.NONE_PREFIX.length)===this.constructor.NONE_PREFIX,i=void 0,s=null,i=n?t.from(r.substr(this.constructor.BROTLI_PREFIX.length),"base64"):o?t.from(r.substr(this.constructor.NONE_PREFIX.length),"base64"):t.from(r,"base64"),a=this.constructor.COMPRESSION_TYPE_ZLIB,n?a=this.constructor.COMPRESSION_TYPE_BROTLI:o&&(a=this.constructor.NONE),e.next=10,this.constructor.decompress(i,a);case 10:return s=e.sent,l(s instanceof t,'Invalid decompress return type for URLParamDecode. Expected "buffer" but got '+(void 0===s?"undefined":u(s))+"."),c=s.toString(),l("string"==typeof c,'Invalid return type for URLParamDecode. Expected "string" but got '+(void 0===c?"undefined":u(c))+"."),e.abrupt("return",c);case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"URLParamEncrypt",value:function(){function e(e,t){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function e(r,n){var o,i,s,a,c,h,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l("string"==typeof r,'Invalid parameter type for strJSONRequest in URLParamEncrypt. Expected "string" but got '+(void 0===r?"undefined":u(r))+"."),o=void 0,e.next=4,this.constructor.compress(r,this.compressionType);case 4:return i=e.sent,l(i instanceof t,"Failed to compress data before encryption."+JSON.stringify(i)),s=f.cipher.createCipher("AES-CBC",this._keys[this._activeKeyIndex].aes_key),s.start({iv:f.util.createBuffer(n)}),s.update(f.util.createBuffer(i)),s.finish(),o=t.from(s.output.getBytes(),"binary"),l(void 0!==o&&null!==o&&o instanceof t,"Failed to encrypt data."),a=o.toString("base64"),l("string"==typeof a,'Invalid return type for URLParamEncrypt. Expected "string" but got '+(void 0===a?"undefined":u(a))+"."),a=this.constructor.getPreffixForCompressionType(this.compressionType)+a,e.next=17,this.URLParamDecrypt(a,n,this._activeKeyIndex);case 17:if(c=e.sent,h=f.md.md5.create(),h.update(c),p=f.md.md5.create(),p.update(r),h.digest().toHex()===p.digest().toHex()){e.next=24;break}throw new Error("Encrypted data failed decryption test.");case 24:return e.abrupt("return",a);case 25:case"end":return e.stop()}},e,this)}));return e}()},{key:"PublicURLParamsToJSONRequest",value:function(){function e(e){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function e(r){var n,o,i,s,a,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=regeneratorRuntime.keys(this._keys);case 2:if((e.t1=e.t0()).done){e.next=36;break}if(n=e.t1.value,!this._keys[n].compromised){e.next=6;break}return e.abrupt("continue",2);case 6:if(!(n in r)){e.next=34;break}if(r[n]=r[n].replace(" ","+"),this.constructor.URL_PARAM_NAME_VERIFY in r){e.next=10;break}throw new JSONRPC.Exception('URLPublic: Missing "'+this.constructor.URL_PARAM_NAME_VERIFY+'" URL parameter required for verifying the URL.',JSONRPC.Exception.NOT_AUTHENTICATED);case 10:if(o=t.from(this.constructor.base64URLUnescape(r[this.constructor.URL_PARAM_NAME_VERIFY]),"base64"),i=this.constructor.URL_PARAM_NAME_MODE in r?parseInt(r[this.constructor.URL_PARAM_NAME_MODE],10):this.constructor.MODE_DEFAULT,this.allowedEncryptionModes.includes(i)){e.next=14;break}throw new JSONRPC.Exception("Encryption mode not allowed.");case 14:s=null,e.t2=i,e.next=e.t2===this.constructor.MODE_AES_128?18:e.t2===this.constructor.MODE_BASE64?22:e.t2===this.constructor.MODE_PLAIN?26:28;break;case 18:return e.next=20,this.URLParamDecrypt(this.constructor.base64URLUnescape(r[n]),o,n);case 20:return s=e.sent,e.abrupt("break",29);case 22:return e.next=24,this.URLParamDecode(this.constructor.base64URLUnescape(r[n]));case 24:return s=e.sent,e.abrupt("break",29);case 26:return s=r[n],e.abrupt("break",29);case 28:throw new JSONRPC.Exception("Unhandled encryption mode "+JSON.stringify(i)+".");case 29:if(l("string"==typeof s,"Invalid strJSONRequest after decoding."),a=this.JSONRequestSignatureAndIV(s,n),a.equals(o)){e.next=33;break}throw new JSONRPC.Exception("Authentication failure. Verify hash incorrect.",JSONRPC.Exception.NOT_AUTHENTICATED);case 33:return e.abrupt("return",s);case 34:e.next=2;break;case 36:throw new JSONRPC.Exception("Invalid params.");case 39:if(e.prev=39,e.t3=e.catch(0),!u){e.next=43;break}return e.abrupt("return",JSON.stringify({}));case 43:throw e.t3;case 44:case"end":return e.stop()}},e,this,[[0,39]])}));return e}()},{key:"JSONRequestSignatureAndIV",value:function(e,r){l("string"==typeof e,'Invalid parameter type for JSONRequestSignatureAndIV. Expecting "string", but got "'+(void 0===e?"undefined":u(e))+'".'),l("string"==typeof r,"strActiveKeyIndex needs to be of type string.");var n=f.hmac.create();return n.start(this.constructor.HMAC_ALGORITHM,this._keys[r].salt),n.update(e),t.from(n.digest().getBytes(),"binary")}},{key:"allowedEncryptionModes",get:function(){return[this.constructor.MODE_AES_128]}},{key:"compressionType",get:function(){return this._strCompressionType},set:function(e){l("string"==typeof e,'Invalid property type for compressionType in URLPublic. Expected "string", but got '+("undefined"==typeof strCompressionEnabled?"undefined":u(strCompressionEnabled))+"."),l(this.constructor.allowedCompressionTypes.includes(e),'Invalid compression type "'+e+'". Allowed ones are: '+JSON.stringify(this.constructor.allowedCompressionTypes)),this._strCompressionType=e}},{key:"_activeKeyIndex",get:function(){return this._objKeys.active_index}},{key:"_keys",get:function(){return this._objKeys.keys}}],[{key:"base64URLEscape",value:function(e){return l("string"==typeof e,'Invalid parameter type for base64URLEscape. Expecting "string", but got "'+(void 0===e?"undefined":u(e))+'".'),e.replace(/\+/g,"-").replace(/\//g,",").replace(/\=/g,"_")}},{key:"base64URLUnescape",value:function(e){return l("string"==typeof e,'Invalid parameter type for base64URLEscape. Expecting "string", but got "'+(void 0===e?"undefined":u(e))+'".'),e.replace(/\-/g,"+").replace(/_/g,"=").replace(/\,/g,"/")}},{key:"compress",value:function(){function e(e){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:URLPublic.COMPRESSION_TYPE_ZLIB;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next=e.t0===this.COMPRESSION_TYPE_BROTLI?3:e.t0===this.COMPRESSION_TYPE_ZLIB?4:e.t0===this.NONE?5:6;break;case 3:throw new Error("Brotli compression is not supported yet.");case 4:return e.abrupt("return",new Promise(function(e,t){p.deflate(r,function(r,n){if(r)return t(r);e(n)})}));case 5:return e.abrupt("return",t.from(r));case 6:throw new Error('Invalid compression type "'+n+'" for compress. Allowed ones are: '+JSON.stringify(this.allowedCompressionTypes));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"decompress",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:URLPublic.COMPRESSION_TYPE_ZLIB;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r,e.next=e.t0===this.COMPRESSION_TYPE_BROTLI?3:e.t0===this.COMPRESSION_TYPE_ZLIB?4:e.t0===this.NONE?5:6;break;case 3:throw new Error("Brotli decompression is not supported yet.");case 4:return e.abrupt("return",new Promise(function(e,r){p.inflate(t,function(t,n){if(t)return r(t);e(n)})}));case 5:return e.abrupt("return",t);case 6:throw new Error('Invalid compression type "'+r+'" for decompress. Allowed ones are: '+JSON.stringify(this.allowedCompressionTypes));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"getPreffixForCompressionType",value:function(e){switch(e){case this.COMPRESSION_TYPE_BROTLI:return this.BROTLI_PREFIX;case this.NONE:return this.NONE_PREFIX;default:return""}}},{key:"validateEncryptionKeys",value:function(e){l("object"===(void 0===e?"undefined":u(e))&&null!==e,"objKeys needs to be of type Object."),l("object"===u(e.keys)&&null!==e.keys,"objKeys.keys needs to be of type Object."),l("string"==typeof e.active_index,"objKeys.active_index needs to be of type string.");for(var t in e.keys)if(l("object"===u(e.keys[t]),"objKeys.keys[strIndex] needs to be of type Object."),l("string"==typeof e.keys[t].aes_key,"objKeys.keys[strIndex].aes_key needs to be of type string."),l("string"==typeof e.keys[t].salt,"objKeys.keys[strIndex].salt needs to be of type string."),l(e.keys[t].salt.length>=30,"objKeys.keys["+JSON.stringify(t)+"].salt needs to have at least 30 characters."),l("string"==typeof e.keys[t].created,"objKeys.keys[strIndex].created needs to be of type string."),![16,24,32].includes(e.keys[t].aes_key.length))throw new Error("(JSONRPC.Plugins.Server.URLPublic) Invalid AES key with index "+JSON.stringify(t)+". The AES key must have 16, 24 or 32 hex characters, but found "+e[t].aes_key.length+" characters.")}},{key:"allowedCompressionTypes",get:function(){return[this.COMPRESSION_TYPE_ZLIB,this.NONE]}},{key:"URL_PARAM_NAME_VERIFY",get:function(){return"v"}},{key:"URL_PARAM_NAME_MODE",get:function(){return"m"}},{key:"REQUEST_PARAM_NAME_METHOD",get:function(){return"m"}},{key:"REQUEST_PARAM_NAME_PARAMS",get:function(){return"p"}},{key:"REQUEST_PARAM_NAME_EXPIRE",get:function(){return"e"}},{key:"MODE_DEFAULT",get:function(){return this.MODE_AES_128}},{key:"MODE_AES_128",get:function(){return 0}},{key:"MODE_PLAIN",get:function(){return 1}},{key:"MODE_BASE64",get:function(){return 2}},{key:"HMAC_ALGORITHM",get:function(){return"md5"}},{key:"BROTLI_PREFIX",get:function(){return"br."}},{key:"NONE_PREFIX",get:function(){return"no."}},{key:"COMPRESSION_TYPE_ZLIB",get:function(){return"zlib"}},{key:"COMPRESSION_TYPE_BROTLI",get:function(){return"brotli"}},{key:"NONE",get:function(){return"none"}},{key:"DEFAULT_JSONRPC_VERSION",get:function(){return"2.0"}}]),URLPublic}(JSONRPC.ServerPluginBase);e.exports=URLPublic}).call(t,r(5).Buffer)},function(e,t,r){"use strict";var n={};n.DebugLogger=r(53),n.AuthenticationSkip=r(51),n.AuthorizeAll=r(52),n.PerformanceCounters=r(54),n.URLPublic=r(55),e.exports=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(n)},WebSocketWrapperBase=r(17);e.exports=function(e){function WebSocketWrapper(e,t){n(this,WebSocketWrapper);var r=o(this,(WebSocketWrapper.__proto__||Object.getPrototypeOf(WebSocketWrapper)).call(this,e));return r._strURL="string"==typeof t?t:e.url?e.url:e.upgradeReq.url,r.objListeningFor={},e.upgradeReq?r._objUpgradeReq=e.upgradeReq:r._objUpgradeReq=void 0,r}return i(WebSocketWrapper,e),s(WebSocketWrapper,[{key:"on",value:function(e,t){var r=this;if(a(WebSocketWrapper.prototype.__proto__||Object.getPrototypeOf(WebSocketWrapper.prototype),"superOn",this).call(this,e,t),!this.objListeningFor[e])return this.objListeningFor[e]=!0,this._webSocket.on(e,function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];r.emit.apply(r,[e].concat(n))})}},{key:"url",get:function(){return this._strURL}},{key:"upgradeReq",get:function(){return this._objUpgradeReq}}]),WebSocketWrapper}(WebSocketWrapperBase)},function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function o(e){var t=n(e),r=t[0],o=t[1];return 3*(r+o)/4-o}function i(e,t,r){return 3*(t+r)/4-r}function s(e){for(var t,r=n(e),o=r[0],s=r[1],a=new h(i(e,o,s)),u=0,c=s>0?o-4:o,l=0;l<c;l+=4)t=f[e.charCodeAt(l)]<<18|f[e.charCodeAt(l+1)]<<12|f[e.charCodeAt(l+2)]<<6|f[e.charCodeAt(l+3)],a[u++]=t>>16&255,a[u++]=t>>8&255,a[u++]=255&t;return 2===s&&(t=f[e.charCodeAt(l)]<<2|f[e.charCodeAt(l+1)]>>4,a[u++]=255&t),1===s&&(t=f[e.charCodeAt(l)]<<10|f[e.charCodeAt(l+1)]<<4|f[e.charCodeAt(l+2)]>>2,a[u++]=t>>8&255,a[u++]=255&t),a}function a(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function u(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(a(n));return o.join("")}function c(e){for(var t,r=e.length,n=r%3,o=[],i=0,s=r-n;i<s;i+=16383)o.push(u(e,i,i+16383>s?s:i+16383));return 1===n?(t=e[r-1],o.push(l[t>>2]+l[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")),o.join("")}t.byteLength=o,t.toByteArray=s,t.fromByteArray=c;for(var l=[],f=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,b=p.length;d<b;++d)l[d]=p[d],f[p.charCodeAt(d)]=d;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(e,t,r){"use strict";(function(e,n){function o(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}var i=r(1),s=r(73),a=r(67),u=r(69),c=r(66);for(var l in c)t[l]=c[l];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;o.prototype.close=function(){if(this.write_in_progress)return void(this.pending_close=!0);this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?a.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||u.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null},o.prototype.write=function(e,t,r,n,o,i,s){return this._write(!0,e,t,r,n,o,i,s)},o.prototype.writeSync=function(e,t,r,n,o,i,s){return this._write(!1,e,t,r,n,o,i,s)},o.prototype._write=function(r,o,s,a,u,c,l,f){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==t.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,void 0===o,"must provide flush value"),this.write_in_progress=!0,o!==t.Z_NO_FLUSH&&o!==t.Z_PARTIAL_FLUSH&&o!==t.Z_SYNC_FLUSH&&o!==t.Z_FULL_FLUSH&&o!==t.Z_FINISH&&o!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==s&&(s=e.alloc(0),u=0,a=0),this.strm.avail_in=u,this.strm.input=s,this.strm.next_in=a,this.strm.avail_out=f,this.strm.output=c,this.strm.next_out=l,this.flush=o,r){var h=this;return n.nextTick(function(){h._process(),h._after()}),this}if(this._process(),this._checkError())return this._afterSync()},o.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},o.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=a.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=u.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=u.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=u.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=u.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},o.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},o.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},o.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},o.prototype.init=function(e,r,n,o,s){i(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(e>=8&&e<=15,"invalid windowBits"),i(r>=-1&&r<=9,"invalid compression level"),i(n>=1&&n<=9,"invalid memlevel"),i(o===t.Z_FILTERED||o===t.Z_HUFFMAN_ONLY||o===t.Z_RLE||o===t.Z_FIXED||o===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(r,e,n,o,s),this._setDictionary()},o.prototype.params=function(){throw new Error("deflateParams Not supported")},o.prototype.reset=function(){this._reset(),this._setDictionary()},o.prototype._init=function(e,r,n,o,i){switch(this.level=e,this.windowBits=r,this.memLevel=n,this.strategy=o,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new s,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=a.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=u.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=i,this.write_in_progress=!1,this.init_done=!0},o.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=a.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},o.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=a.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=u.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=o}).call(t,r(5).Buffer,r(0))},function(e,t,r){"use strict";(function(e){function n(e,t,r){function n(){for(var t;null!==(t=e.read());)s.push(t),a+=t.length;e.once("readable",n)}function o(t){e.removeListener("end",i),e.removeListener("readable",n),r(t)}function i(){var t,n=null;a>=w?n=new RangeError(k):t=y.concat(s,a),s=[],e.close(),r(n,t)}var s=[],a=0;e.on("error",o),e.on("end",i),e.end(t),n()}function o(e,t){if("string"==typeof t&&(t=y.from(t)),!y.isBuffer(t))throw new TypeError("Not a string or buffer");var r=e._finishFlushFlag;return e._processChunk(t,r)}function i(e){if(!(this instanceof i))return new i(e);p.call(this,e,m.DEFLATE)}function s(e){if(!(this instanceof s))return new s(e);p.call(this,e,m.INFLATE)}function a(e){if(!(this instanceof a))return new a(e);p.call(this,e,m.GZIP)}function u(e){if(!(this instanceof u))return new u(e);p.call(this,e,m.GUNZIP)}function c(e){if(!(this instanceof c))return new c(e);p.call(this,e,m.DEFLATERAW)}function l(e){if(!(this instanceof l))return new l(e);p.call(this,e,m.INFLATERAW)}function f(e){if(!(this instanceof f))return new f(e);p.call(this,e,m.UNZIP)}function h(e){return e===m.Z_NO_FLUSH||e===m.Z_PARTIAL_FLUSH||e===m.Z_SYNC_FLUSH||e===m.Z_FULL_FLUSH||e===m.Z_FINISH||e===m.Z_BLOCK}function p(e,r){var n=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,g.call(this,e),e.flush&&!h(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!h(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||m.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:m.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!y.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new m.Zlib(r);var o=this;this._hadError=!1,this._handle.onerror=function(e,r){d(o),o._hadError=!0;var n=new Error(e);n.errno=r,n.code=t.codes[r],o.emit("error",n)};var i=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(i=e.level);var s=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(s=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,i,e.memLevel||t.Z_DEFAULT_MEMLEVEL,s,e.dictionary),this._buffer=y.allocUnsafe(this._chunkSize),this._offset=0,this._level=i,this._strategy=s,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!n._handle},configurable:!0,enumerable:!0})}function d(t,r){r&&e.nextTick(r),t._handle&&(t._handle.close(),t._handle=null)}function b(e){e.emit("close")}var y=r(5).Buffer,g=r(77).Transform,m=r(59),v=r(34),_=r(1).ok,w=r(5).kMaxLength,k="Cannot create final Buffer. It would be larger than 0x"+w.toString(16)+" bytes";m.Z_MIN_WINDOWBITS=8,m.Z_MAX_WINDOWBITS=15,m.Z_DEFAULT_WINDOWBITS=15,m.Z_MIN_CHUNK=64,m.Z_MAX_CHUNK=1/0,m.Z_DEFAULT_CHUNK=16384,m.Z_MIN_MEMLEVEL=1,m.Z_MAX_MEMLEVEL=9,m.Z_DEFAULT_MEMLEVEL=8,m.Z_MIN_LEVEL=-1,m.Z_MAX_LEVEL=9,m.Z_DEFAULT_LEVEL=m.Z_DEFAULT_COMPRESSION;for(var R=Object.keys(m),E=0;E<R.length;E++){var S=R[E];S.match(/^Z/)&&Object.defineProperty(t,S,{enumerable:!0,value:m[S],writable:!1})}for(var O={Z_OK:m.Z_OK,Z_STREAM_END:m.Z_STREAM_END,Z_NEED_DICT:m.Z_NEED_DICT,Z_ERRNO:m.Z_ERRNO,Z_STREAM_ERROR:m.Z_STREAM_ERROR,Z_DATA_ERROR:m.Z_DATA_ERROR,Z_MEM_ERROR:m.Z_MEM_ERROR,Z_BUF_ERROR:m.Z_BUF_ERROR,Z_VERSION_ERROR:m.Z_VERSION_ERROR},x=Object.keys(O),P=0;P<x.length;P++){var j=x[P];O[O[j]]=j}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(O),writable:!1}),t.Deflate=i,t.Inflate=s,t.Gzip=a,t.Gunzip=u,t.DeflateRaw=c,t.InflateRaw=l,t.Unzip=f,t.createDeflate=function(e){return new i(e)},t.createInflate=function(e){return new s(e)},t.createDeflateRaw=function(e){return new c(e)},t.createInflateRaw=function(e){return new l(e)},t.createGzip=function(e){return new a(e)},t.createGunzip=function(e){return new u(e)},t.createUnzip=function(e){return new f(e)},t.deflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new i(t),e,r)},t.deflateSync=function(e,t){return o(new i(t),e)},t.gzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new a(t),e,r)},t.gzipSync=function(e,t){return o(new a(t),e)},t.deflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new c(t),e,r)},t.deflateRawSync=function(e,t){return o(new c(t),e)},t.unzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new f(t),e,r)},t.unzipSync=function(e,t){return o(new f(t),e)},t.inflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new s(t),e,r)},t.inflateSync=function(e,t){return o(new s(t),e)},t.gunzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new u(t),e,r)},t.gunzipSync=function(e,t){return o(new u(t),e)},t.inflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new l(t),e,r)},t.inflateRawSync=function(e,t){return o(new l(t),e)},v.inherits(p,g),p.prototype.params=function(r,n,o){if(r<t.Z_MIN_LEVEL||r>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+r);if(n!=t.Z_FILTERED&&n!=t.Z_HUFFMAN_ONLY&&n!=t.Z_RLE&&n!=t.Z_FIXED&&n!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==r||this._strategy!==n){var i=this;this.flush(m.Z_SYNC_FLUSH,function(){_(i._handle,"zlib binding closed"),i._handle.params(r,n),i._hadError||(i._level=r,i._strategy=n,o&&o())})}else e.nextTick(o)},p.prototype.reset=function(){return _(this._handle,"zlib binding closed"),this._handle.reset()},p.prototype._flush=function(e){this._transform(y.alloc(0),"",e)},p.prototype.flush=function(t,r){var n=this,o=this._writableState;("function"==typeof t||void 0===t&&!r)&&(r=t,t=m.Z_FULL_FLUSH),o.ended?r&&e.nextTick(r):o.ending?r&&this.once("end",r):o.needDrain?r&&this.once("drain",function(){return n.flush(t,r)}):(this._flushFlag=t,this.write(y.alloc(0),"",r))},p.prototype.close=function(t){d(this,t),e.nextTick(b,this)},p.prototype._transform=function(e,t,r){var n,o=this._writableState,i=o.ending||o.ended,s=i&&(!e||o.length===e.length);return null===e||y.isBuffer(e)?this._handle?(s?n=this._finishFlushFlag:(n=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||m.Z_NO_FLUSH)),void this._processChunk(e,n,r)):r(new Error("zlib binding closed")):r(new Error("invalid input"))},p.prototype._processChunk=function(e,t,r){function n(c,h){if(this&&(this.buffer=null,this.callback=null),!a._hadError){var p=i-h;if(_(p>=0,"have should not go down"),p>0){var d=a._buffer.slice(a._offset,a._offset+p);a._offset+=p,u?a.push(d):(l.push(d),f+=d.length)}if((0===h||a._offset>=a._chunkSize)&&(i=a._chunkSize,a._offset=0,a._buffer=y.allocUnsafe(a._chunkSize)),0===h){if(s+=o-c,o=c,!u)return!0;var b=a._handle.write(t,e,s,o,a._buffer,a._offset,a._chunkSize);return b.callback=n,void(b.buffer=e)}if(!u)return!1;r()}}var o=e&&e.length,i=this._chunkSize-this._offset,s=0,a=this,u="function"==typeof r;if(!u){var c,l=[],f=0;this.on("error",function(e){c=e}),_(this._handle,"zlib binding closed");do{var h=this._handle.writeSync(t,e,s,o,this._buffer,this._offset,i)}while(!this._hadError&&n(h[0],h[1]));if(this._hadError)throw c;if(f>=w)throw d(this),new RangeError(k);var p=y.concat(l,f);return d(this),p}_(this._handle,"zlib binding closed");var b=this._handle.write(t,e,s,o,this._buffer,this._offset,i);b.buffer=e,b.callback=n},v.inherits(i,p),v.inherits(s,p),v.inherits(a,p),v.inherits(u,p),v.inherits(c,p),v.inherits(l,p),v.inherits(f,p)}).call(t,r(0))},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(e){function t(e){n(this,t);var r=o(this,Object.getPrototypeOf(t).call(this,e));return r.name=r.constructor.name,r.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(r,r.constructor):r.stack=new Error(e).stack,r}return i(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));e.exports=s},function(e,t){t.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?o-1:0,h=r?-1:1,p=e[t+f];for(f+=h,i=p&(1<<-l)-1,p>>=-l,l+=a;l>0;i=256*i+e[t+f],f+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),i-=c}return(p?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var s,a,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,b=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+f>=1?h/u:h*Math.pow(2,1-f),t*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[r+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;e[r+p]=255&s,p+=d,s/=256,c-=8);e[r+p-d]|=128*b}},function(e,t,r){"use strict";var n;!function(o){function i(e,t,r){var n,o,i,s,p,d,b,y,g,m=0,v=[],_=0,w=!1,k=[],R=[],E=!1,S=!1,O=-1;if(r=r||{},n=r.encoding||"UTF8",(g=r.numRounds||1)!==parseInt(g,10)||1>g)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)p=512,d=B,b=U,s=160,y=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(d=function(t,r){return D(t,r,e)},b=function(t,r,n,o){var i,s;if("SHA-224"===e||"SHA-256"===e)i=15+(r+65>>>9<<4),s=16;else{if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");i=31+(r+129>>>10<<5),s=32}for(;t.length<=i;)t.push(0);for(t[r>>>5]|=128<<24-r%32,r+=n,t[i]=4294967295&r,t[i-1]=r/4294967296|0,n=t.length,r=0;r<n;r+=s)o=D(t.slice(r,r+s),o,e);if("SHA-224"===e)t=[o[0],o[1],o[2],o[3],o[4],o[5],o[6]];else if("SHA-256"===e)t=o;else if("SHA-384"===e)t=[o[0].a,o[0].b,o[1].a,o[1].b,o[2].a,o[2].b,o[3].a,o[3].b,o[4].a,o[4].b,o[5].a,o[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");t=[o[0].a,o[0].b,o[1].a,o[1].b,o[2].a,o[2].b,o[3].a,o[3].b,o[4].a,o[4].b,o[5].a,o[5].b,o[6].a,o[6].b,o[7].a,o[7].b]}return t},y=function(e){return e.slice()},"SHA-224"===e)p=512,s=224;else if("SHA-256"===e)p=512,s=256;else if("SHA-384"===e)p=1024,s=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");p=1024,s=512}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var x=6;if(d=W,y=function(e){var t,r=[];for(t=0;5>t;t+=1)r[t]=e[t].slice();return r},O=1,"SHA3-224"===e)p=1152,s=224;else if("SHA3-256"===e)p=1088,s=256;else if("SHA3-384"===e)p=832,s=384;else if("SHA3-512"===e)p=576,s=512;else if("SHAKE128"===e)p=1344,s=-1,x=31,S=!0;else{if("SHAKE256"!==e)throw Error("Chosen SHA variant is not supported");p=1088,s=-1,x=31,S=!0}b=function(e,t,r,n,o){r=p;var i,s=x,a=[],u=r>>>5,c=0,l=t>>>5;for(i=0;i<l&&t>=r;i+=u)n=W(e.slice(i,i+u),n),t-=r;for(e=e.slice(i),t%=r;e.length<u;)e.push(0);for(i=t>>>3,e[i>>2]^=s<<i%4*8,e[u-1]^=2147483648,n=W(e,n);32*a.length<o&&(e=n[c%5][c/5|0],a.push(e.b),!(32*a.length>=o));)a.push(e.a),0==64*(c+=1)%r&&W(null,n);return a}}i=h(t,n,O),o=M(e),this.setHMACKey=function(t,r,i){var a;if(!0===w)throw Error("HMAC key already set");if(!0===E)throw Error("Cannot set HMAC key after calling update");if(!0===S)throw Error("SHAKE is not supported for HMAC");if(n=(i||{}).encoding||"UTF8",r=h(r,n,O)(t),t=r.binLen,r=r.value,a=p>>>3,i=a/4-1,a<t/8){for(r=b(r,t,0,M(e),s);r.length<=i;)r.push(0);r[i]&=4294967040}else if(a>t/8){for(;r.length<=i;)r.push(0);r[i]&=4294967040}for(t=0;t<=i;t+=1)k[t]=909522486^r[t],R[t]=1549556828^r[t];o=d(k,o),m=p,w=!0},this.update=function(e){var t,r,n,s=0,a=p>>>5;for(t=i(e,v,_),e=t.binLen,r=t.value,t=e>>>5,n=0;n<t;n+=a)s+p<=e&&(o=d(r.slice(n,n+a),o),s+=p);m+=s,v=r.slice(s>>>5),_=e%p,E=!0},this.getHash=function(t,r){var n,i,h,p;if(!0===w)throw Error("Cannot call getHash after setting HMAC key");if(h=f(r),!0===S){if(-1===h.shakeLen)throw Error("shakeLen must be specified in options");s=h.shakeLen}switch(t){case"HEX":n=function(e){return a(e,s,O,h)};break;case"B64":n=function(e){return u(e,s,O,h)};break;case"BYTES":n=function(e){return c(e,s,O)};break;case"ARRAYBUFFER":try{i=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}n=function(e){return l(e,s,O)};break;default:throw Error("format must be HEX, B64, BYTES, or ARRAYBUFFER")}for(p=b(v.slice(),_,m,y(o),s),i=1;i<g;i+=1)!0===S&&0!=s%32&&(p[p.length-1]&=16777215>>>24-s%32),p=b(p,s,0,M(e),s);return n(p)},this.getHMAC=function(t,r){var n,i,h,g;if(!1===w)throw Error("Cannot call getHMAC without first setting HMAC key");switch(h=f(r),t){case"HEX":n=function(e){return a(e,s,O,h)};break;case"B64":n=function(e){return u(e,s,O,h)};break;case"BYTES":n=function(e){return c(e,s,O)};break;case"ARRAYBUFFER":try{n=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}n=function(e){return l(e,s,O)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER")}return i=b(v.slice(),_,m,y(o),s),g=d(R,M(e)),g=b(i,s,p,g,s),n(g)}}function s(e,t){this.a=e,this.b=t}function a(e,t,r,n){var o="";t/=8;var i,s,a;for(a=-1===r?3:0,i=0;i<t;i+=1)s=e[i>>>2]>>>8*(a+i%4*r),o+="0123456789abcdef".charAt(s>>>4&15)+"0123456789abcdef".charAt(15&s);return n.outputUpper?o.toUpperCase():o}function u(e,t,r,n){var o,i,s,a,u="",c=t/8;for(a=-1===r?3:0,o=0;o<c;o+=3)for(i=o+1<c?e[o+1>>>2]:0,s=o+2<c?e[o+2>>>2]:0,s=(e[o>>>2]>>>8*(a+o%4*r)&255)<<16|(i>>>8*(a+(o+1)%4*r)&255)<<8|s>>>8*(a+(o+2)%4*r)&255,i=0;4>i;i+=1)u+=8*o+6*i<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>>6*(3-i)&63):n.b64Pad;return u}function c(e,t,r){var n="";t/=8;var o,i,s;for(s=-1===r?3:0,o=0;o<t;o+=1)i=e[o>>>2]>>>8*(s+o%4*r)&255,n+=String.fromCharCode(i);return n}function l(e,t,r){t/=8;var n,o,i,s=new ArrayBuffer(t);for(i=new Uint8Array(s),o=-1===r?3:0,n=0;n<t;n+=1)i[n]=e[n>>>2]>>>8*(o+n%4*r)&255;return s}function f(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function h(e,t,r){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,t,n){var o,i,s,a,u,c,l=e.length;if(0!=l%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],n=n||0,u=n>>>3,c=-1===r?3:0,o=0;o<l;o+=2){if(i=parseInt(e.substr(o,2),16),isNaN(i))throw Error("String of HEX type contains invalid characters");for(a=(o>>>1)+u,s=a>>>2;t.length<=s;)t.push(0);t[s]|=i<<8*(c+a%4*r)}return{value:t,binLen:4*l+n}};break;case"TEXT":e=function(e,n,o){var i,s,a,u,c,l,f,h,p=0;if(n=n||[0],o=o||0,c=o>>>3,"UTF8"===t)for(h=-1===r?3:0,a=0;a<e.length;a+=1)for(i=e.charCodeAt(a),s=[],128>i?s.push(i):2048>i?(s.push(192|i>>>6),s.push(128|63&i)):55296>i||57344<=i?s.push(224|i>>>12,128|i>>>6&63,128|63&i):(a+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(a)),s.push(240|i>>>18,128|i>>>12&63,128|i>>>6&63,128|63&i)),u=0;u<s.length;u+=1){for(f=p+c,l=f>>>2;n.length<=l;)n.push(0);n[l]|=s[u]<<8*(h+f%4*r),p+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(h=-1===r?2:0,s="UTF16LE"===t&&1!==r||"UTF16LE"!==t&&1===r,a=0;a<e.length;a+=1){for(i=e.charCodeAt(a),!0===s&&(u=255&i,i=u<<8|i>>>8),f=p+c,l=f>>>2;n.length<=l;)n.push(0);n[l]|=i<<8*(h+f%4*r),p+=2}return{value:n,binLen:8*p+o}};break;case"B64":e=function(e,t,n){var o,i,s,a,u,c,l,f,h=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(i=e.indexOf("="),e=e.replace(/\=/g,""),-1!==i&&i<e.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],n=n||0,c=n>>>3,f=-1===r?3:0,i=0;i<e.length;i+=4){for(u=e.substr(i,4),s=a=0;s<u.length;s+=1)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(u[s]),a|=o<<18-6*s;for(s=0;s<u.length-1;s+=1){for(l=h+c,o=l>>>2;t.length<=o;)t.push(0);t[o]|=(a>>>16-8*s&255)<<8*(f+l%4*r),h+=1}}return{value:t,binLen:8*h+n}};break;case"BYTES":e=function(e,t,n){var o,i,s,a,u,c;for(t=t||[0],n=n||0,s=n>>>3,c=-1===r?3:0,i=0;i<e.length;i+=1)o=e.charCodeAt(i),u=i+s,a=u>>>2,t.length<=a&&t.push(0),t[a]|=o<<8*(c+u%4*r);return{value:t,binLen:8*e.length+n}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,t,n){var o,i,s,a,u,c;for(t=t||[0],n=n||0,i=n>>>3,u=-1===r?3:0,c=new Uint8Array(e),o=0;o<e.byteLength;o+=1)a=o+i,s=a>>>2,t.length<=s&&t.push(0),t[s]|=c[o]<<8*(u+a%4*r);return{value:t,binLen:8*e.byteLength+n}};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER")}return e}function p(e,t){return e<<t|e>>>32-t}function d(e,t){return 32<t?(t-=32,new s(e.b<<t|e.a>>>32-t,e.a<<t|e.b>>>32-t)):0!==t?new s(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function b(e,t){return e>>>t|e<<32-t}function y(e,t){var r=null,r=new s(e.a,e.b);return r=32>=t?new s(r.a>>>t|r.b<<32-t&4294967295,r.b>>>t|r.a<<32-t&4294967295):new s(r.b>>>t-32|r.a<<64-t&4294967295,r.a>>>t-32|r.b<<64-t&4294967295)}function g(e,t){return 32>=t?new s(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new s(0,e.a>>>t-32)}function m(e,t,r){return e&t^~e&r}function v(e,t,r){return new s(e.a&t.a^~e.a&r.a,e.b&t.b^~e.b&r.b)}function _(e,t,r){return e&t^e&r^t&r}function w(e,t,r){return new s(e.a&t.a^e.a&r.a^t.a&r.a,e.b&t.b^e.b&r.b^t.b&r.b)}function k(e){return b(e,2)^b(e,13)^b(e,22)}function R(e){var t=y(e,28),r=y(e,34);return e=y(e,39),new s(t.a^r.a^e.a,t.b^r.b^e.b)}function E(e){return b(e,6)^b(e,11)^b(e,25)}function S(e){var t=y(e,14),r=y(e,18);return e=y(e,41),new s(t.a^r.a^e.a,t.b^r.b^e.b)}function O(e){return b(e,7)^b(e,18)^e>>>3}function x(e){var t=y(e,1),r=y(e,8);return e=g(e,7),new s(t.a^r.a^e.a,t.b^r.b^e.b)}function P(e){return b(e,17)^b(e,19)^e>>>10}function j(e){var t=y(e,19),r=y(e,61);return e=g(e,6),new s(t.a^r.a^e.a,t.b^r.b^e.b)}function T(e,t){var r=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(r>>>16)&65535)<<16|65535&r}function C(e,t,r,n){var o=(65535&e)+(65535&t)+(65535&r)+(65535&n);return((e>>>16)+(t>>>16)+(r>>>16)+(n>>>16)+(o>>>16)&65535)<<16|65535&o}function A(e,t,r,n,o){var i=(65535&e)+(65535&t)+(65535&r)+(65535&n)+(65535&o);return((e>>>16)+(t>>>16)+(r>>>16)+(n>>>16)+(o>>>16)+(i>>>16)&65535)<<16|65535&i}function N(e,t){var r,n,o;return r=(65535&e.b)+(65535&t.b),n=(e.b>>>16)+(t.b>>>16)+(r>>>16),o=(65535&n)<<16|65535&r,r=(65535&e.a)+(65535&t.a)+(n>>>16),n=(e.a>>>16)+(t.a>>>16)+(r>>>16),new s((65535&n)<<16|65535&r,o)}function I(e,t,r,n){var o,i,a;return o=(65535&e.b)+(65535&t.b)+(65535&r.b)+(65535&n.b),i=(e.b>>>16)+(t.b>>>16)+(r.b>>>16)+(n.b>>>16)+(o>>>16),a=(65535&i)<<16|65535&o,o=(65535&e.a)+(65535&t.a)+(65535&r.a)+(65535&n.a)+(i>>>16),i=(e.a>>>16)+(t.a>>>16)+(r.a>>>16)+(n.a>>>16)+(o>>>16),new s((65535&i)<<16|65535&o,a)}function L(e,t,r,n,o){var i,a,u;return i=(65535&e.b)+(65535&t.b)+(65535&r.b)+(65535&n.b)+(65535&o.b),a=(e.b>>>16)+(t.b>>>16)+(r.b>>>16)+(n.b>>>16)+(o.b>>>16)+(i>>>16),u=(65535&a)<<16|65535&i,i=(65535&e.a)+(65535&t.a)+(65535&r.a)+(65535&n.a)+(65535&o.a)+(a>>>16),a=(e.a>>>16)+(t.a>>>16)+(r.a>>>16)+(n.a>>>16)+(o.a>>>16)+(i>>>16),new s((65535&a)<<16|65535&i,u)}function q(e,t){return new s(e.a^t.a,e.b^t.b)}function M(e){var t,r=[];if("SHA-1"===e)r=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(r=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":r=t;break;case"SHA-384":r=[new s(3418070365,r[0]),new s(1654270250,r[1]),new s(2438529370,r[2]),new s(355462360,r[3]),new s(1731405415,r[4]),new s(41048885895,r[5]),new s(3675008525,r[6]),new s(1203062813,r[7])];break;case"SHA-512":r=[new s(t[0],4089235720),new s(t[1],2227873595),new s(t[2],4271175723),new s(t[3],1595750129),new s(t[4],2917565137),new s(t[5],725511199),new s(t[6],4215389547),new s(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;5>e;e+=1)r[e]=[new s(0,0),new s(0,0),new s(0,0),new s(0,0),new s(0,0)]}return r}function B(e,t){var r,n,o,i,s,a,u,c=[];for(r=t[0],n=t[1],o=t[2],i=t[3],s=t[4],u=0;80>u;u+=1)c[u]=16>u?e[u]:p(c[u-3]^c[u-8]^c[u-14]^c[u-16],1),a=20>u?A(p(r,5),n&o^~n&i,s,1518500249,c[u]):40>u?A(p(r,5),n^o^i,s,1859775393,c[u]):60>u?A(p(r,5),_(n,o,i),s,2400959708,c[u]):A(p(r,5),n^o^i,s,3395469782,c[u]),s=i,i=o,o=p(n,30),n=r,r=a;return t[0]=T(r,t[0]),t[1]=T(n,t[1]),t[2]=T(o,t[2]),t[3]=T(i,t[3]),t[4]=T(s,t[4]),t}function U(e,t,r,n){var o;for(o=15+(t+65>>>9<<4);e.length<=o;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=r,e[o]=4294967295&t,e[o-1]=t/4294967296|0,t=e.length,o=0;o<t;o+=16)n=B(e.slice(o,o+16),n);return n}function D(e,t,r){var n,o,i,a,u,c,l,f,h,p,d,b,y,g,q,M,B,U,D,W,J,H,Z,Y=[];if("SHA-224"===r||"SHA-256"===r)p=64,b=1,H=Number,y=T,g=C,q=A,M=O,B=P,U=k,D=E,J=_,W=m,Z=F;else{if("SHA-384"!==r&&"SHA-512"!==r)throw Error("Unexpected error in SHA-2 implementation");p=80,b=2,H=s,y=N,g=I,q=L,M=x,B=j,U=R,D=S,J=w,W=v,Z=z}for(r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],u=t[5],c=t[6],l=t[7],d=0;d<p;d+=1)16>d?(h=d*b,f=e.length<=h?0:e[h],h=e.length<=h+1?0:e[h+1],Y[d]=new H(f,h)):Y[d]=g(B(Y[d-2]),Y[d-7],M(Y[d-15]),Y[d-16]),f=q(l,D(a),W(a,u,c),Z[d],Y[d]),h=y(U(r),J(r,n,o)),l=c,c=u,u=a,a=y(i,f),i=o,o=n,n=r,r=y(f,h);return t[0]=y(r,t[0]),t[1]=y(n,t[1]),t[2]=y(o,t[2]),t[3]=y(i,t[3]),t[4]=y(a,t[4]),t[5]=y(u,t[5]),t[6]=y(c,t[6]),t[7]=y(l,t[7]),t}function W(e,t){var r,n,o,i,a=[],u=[];if(null!==e)for(n=0;n<e.length;n+=2)t[(n>>>1)%5][(n>>>1)/5|0]=q(t[(n>>>1)%5][(n>>>1)/5|0],new s(e[n+1],e[n]));for(r=0;24>r;r+=1){for(i=M("SHA3-"),n=0;5>n;n+=1){o=t[n][0];var c=t[n][1],l=t[n][2],f=t[n][3],h=t[n][4];a[n]=new s(o.a^c.a^l.a^f.a^h.a,o.b^c.b^l.b^f.b^h.b)}for(n=0;5>n;n+=1)u[n]=q(a[(n+4)%5],d(a[(n+1)%5],1));for(n=0;5>n;n+=1)for(o=0;5>o;o+=1)t[n][o]=q(t[n][o],u[n]);for(n=0;5>n;n+=1)for(o=0;5>o;o+=1)i[o][(2*n+3*o)%5]=d(t[n][o],J[n][o]);for(n=0;5>n;n+=1)for(o=0;5>o;o+=1)t[n][o]=q(i[n][o],new s(~i[(n+1)%5][o].a&i[(n+2)%5][o].a,~i[(n+1)%5][o].b&i[(n+2)%5][o].b));t[0][0]=q(t[0][0],H[r])}return t}var F,z,J,H;F=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],z=[new s(F[0],3609767458),new s(F[1],602891725),new s(F[2],3964484399),new s(F[3],2173295548),new s(F[4],4081628472),new s(F[5],3053834265),new s(F[6],2937671579),new s(F[7],3664609560),new s(F[8],2734883394),new s(F[9],1164996542),new s(F[10],1323610764),new s(F[11],3590304994),new s(F[12],4068182383),new s(F[13],991336113),new s(F[14],633803317),new s(F[15],3479774868),new s(F[16],2666613458),new s(F[17],944711139),new s(F[18],2341262773),new s(F[19],2007800933),new s(F[20],1495990901),new s(F[21],1856431235),new s(F[22],3175218132),new s(F[23],2198950837),new s(F[24],3999719339),new s(F[25],766784016),new s(F[26],2566594879),new s(F[27],3203337956),new s(F[28],1034457026),new s(F[29],2466948901),new s(F[30],3758326383),new s(F[31],168717936),new s(F[32],1188179964),new s(F[33],1546045734),new s(F[34],1522805485),new s(F[35],2643833823),new s(F[36],2343527390),new s(F[37],1014477480),new s(F[38],1206759142),new s(F[39],344077627),new s(F[40],1290863460),new s(F[41],3158454273),new s(F[42],3505952657),new s(F[43],106217008),new s(F[44],3606008344),new s(F[45],1432725776),new s(F[46],1467031594),new s(F[47],851169720),new s(F[48],3100823752),new s(F[49],1363258195),new s(F[50],3750685593),new s(F[51],3785050280),new s(F[52],3318307427),new s(F[53],3812723403),new s(F[54],2003034995),new s(F[55],3602036899),new s(F[56],1575990012),new s(F[57],1125592928),new s(F[58],2716904306),new s(F[59],442776044),new s(F[60],593698344),new s(F[61],3733110249),new s(F[62],2999351573),new s(F[63],3815920427),new s(3391569614,3928383900),new s(3515267271,566280711),new s(3940187606,3454069534),new s(4118630271,4000239992),new s(116418474,1914138554),new s(174292421,2731055270),new s(289380356,3203993006),new s(460393269,320620315),new s(685471733,587496836),new s(852142971,1086792851),new s(1017036298,365543100),new s(1126000580,2618297676),new s(1288033470,3409855158),new s(1501505948,4234509866),new s(1607167915,987167468),new s(1816402316,1246189591)],H=[new s(0,1),new s(0,32898),new s(2147483648,32906),new s(2147483648,2147516416),new s(0,32907),new s(0,2147483649),new s(2147483648,2147516545),new s(2147483648,32777),new s(0,138),new s(0,136),new s(0,2147516425),new s(0,2147483658),new s(0,2147516555),new s(2147483648,139),new s(2147483648,32905),new s(2147483648,32771),new s(2147483648,32770),new s(2147483648,128),new s(0,32778),new s(2147483648,2147483658),new s(2147483648,2147516545),new s(2147483648,32896),new s(0,2147483649),new s(2147483648,2147516424)],J=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],void 0!==(n=function(){return i}.call(t,r,t,e))&&(e.exports=n)}()},function(e,t,r){(function(e,n){var o;!function(i){function s(e){throw new RangeError(A[e])}function a(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function u(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(C,"."),n+a(e.split("."),t).join(".")}function c(e){for(var t,r,n=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function l(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=L(e>>>10&1023|55296),e=56320|1023&e),t+=L(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:w}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,r){var n=0;for(e=r?I(e/S):e>>1,e+=I(e/t);e>N*R>>1;n+=w)e=I(e/N);return I(n+(N+1)*e/(e+E))}function d(e){var t,r,n,o,i,a,u,c,h,d,b=[],y=e.length,g=0,m=x,v=O;for(r=e.lastIndexOf(P),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&s("not-basic"),b.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<y;){for(i=g,a=1,u=w;o>=y&&s("invalid-input"),c=f(e.charCodeAt(o++)),(c>=w||c>I((_-g)/a))&&s("overflow"),g+=c*a,h=u<=v?k:u>=v+R?R:u-v,!(c<h);u+=w)d=w-h,a>I(_/d)&&s("overflow"),a*=d;t=b.length+1,v=p(g-i,t,0==i),I(g/t)>_-m&&s("overflow"),m+=I(g/t),g%=t,b.splice(g++,0,m)}return l(b)}function b(e){var t,r,n,o,i,a,u,l,f,d,b,y,g,m,v,E=[];for(e=c(e),y=e.length,t=x,r=0,i=O,a=0;a<y;++a)(b=e[a])<128&&E.push(L(b));for(n=o=E.length,o&&E.push(P);n<y;){for(u=_,a=0;a<y;++a)(b=e[a])>=t&&b<u&&(u=b);for(g=n+1,u-t>I((_-r)/g)&&s("overflow"),r+=(u-t)*g,t=u,a=0;a<y;++a)if(b=e[a],b<t&&++r>_&&s("overflow"),b==t){for(l=r,f=w;d=f<=i?k:f>=i+R?R:f-i,!(l<d);f+=w)v=l-d,m=w-d,E.push(L(h(d+v%m,0))),l=I(v/m);E.push(L(h(l,0))),i=p(r,g,n==o),r=0,++n}++r,++t}return E.join("")}function y(e){return u(e,function(e){return j.test(e)?d(e.slice(4).toLowerCase()):e})}function g(e){return u(e,function(e){return T.test(e)?"xn--"+b(e):e})}var m=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof n&&n);var v,_=2147483647,w=36,k=1,R=26,E=38,S=700,O=72,x=128,P="-",j=/^xn--/,T=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=w-k,I=Math.floor,L=String.fromCharCode;v={version:"1.4.1",ucs2:{decode:c,encode:l},decode:d,encode:b,toASCII:g,toUnicode:y},void 0!==(o=function(){return v}.call(t,r,t,e))&&(e.exports=o)}()}).call(t,r(89)(e),r(7))},function(e,t,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,r){"use strict";function n(e,t){return e.msg=I[t],t}function o(e){return(e<<1)-(e>4?9:0)}function i(e){for(var t=e.length;--t>=0;)e[t]=0}function s(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(T.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function a(e,t){C._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,s(e.strm)}function u(e,t){e.pending_buf[e.pending++]=t}function c(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function l(e,t,r,n){var o=e.avail_in;return o>n&&(o=n),0===o?0:(e.avail_in-=o,T.arraySet(t,e.input,e.next_in,o,r),1===e.state.wrap?e.adler=A(e.adler,t,o,r):2===e.state.wrap&&(e.adler=N(e.adler,t,o,r)),e.next_in+=o,e.total_in+=o,o)}function f(e,t){var r,n,o=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-ce?e.strstart-(e.w_size-ce):0,c=e.window,l=e.w_mask,f=e.prev,h=e.strstart+ue,p=c[i+s-1],d=c[i+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(r=t,c[r+s]===d&&c[r+s-1]===p&&c[r]===c[i]&&c[++r]===c[i+1]){i+=2,r++;do{}while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<h);if(n=ue-(h-i),i=h-ue,n>s){if(e.match_start=t,s=n,n>=a)break;p=c[i+s-1],d=c[i+s]}}}while((t=f[t&l])>u&&0!=--o);return s<=e.lookahead?s:e.lookahead}function h(e){var t,r,n,o,i,s=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-ce)){T.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,r=e.hash_size,t=r;do{n=e.head[--t],e.head[t]=n>=s?n-s:0}while(--r);r=s,t=r;do{n=e.prev[--t],e.prev[t]=n>=s?n-s:0}while(--r);o+=s}if(0===e.strm.avail_in)break;if(r=l(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=r,e.lookahead+e.insert>=ae)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+ae-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<ae)););}while(e.lookahead<ce&&0!==e.strm.avail_in)}function p(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===L)return me;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,a(e,!1),0===e.strm.avail_out))return me;if(e.strstart-e.block_start>=e.w_size-ce&&(a(e,!1),0===e.strm.avail_out))return me}return e.insert=0,t===B?(a(e,!0),0===e.strm.avail_out?_e:we):(e.strstart>e.block_start&&(a(e,!1),e.strm.avail_out),me)}function d(e,t){for(var r,n;;){if(e.lookahead<ce){if(h(e),e.lookahead<ce&&t===L)return me;if(0===e.lookahead)break}if(r=0,e.lookahead>=ae&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-ce&&(e.match_length=f(e,r)),e.match_length>=ae)if(n=C._tr_tally(e,e.strstart-e.match_start,e.match_length-ae),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ae){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(a(e,!1),0===e.strm.avail_out))return me}return e.insert=e.strstart<ae-1?e.strstart:ae-1,t===B?(a(e,!0),0===e.strm.avail_out?_e:we):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?me:ve}function b(e,t){for(var r,n,o;;){if(e.lookahead<ce){if(h(e),e.lookahead<ce&&t===L)return me;if(0===e.lookahead)break}if(r=0,e.lookahead>=ae&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ae-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-ce&&(e.match_length=f(e,r),e.match_length<=5&&(e.strategy===Z||e.match_length===ae&&e.strstart-e.match_start>4096)&&(e.match_length=ae-1)),e.prev_length>=ae&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-ae,n=C._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ae),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=ae-1,e.strstart++,n&&(a(e,!1),0===e.strm.avail_out))return me}else if(e.match_available){if(n=C._tr_tally(e,0,e.window[e.strstart-1]),n&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return me}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=C._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ae-1?e.strstart:ae-1,t===B?(a(e,!0),0===e.strm.avail_out?_e:we):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?me:ve}function y(e,t){for(var r,n,o,i,s=e.window;;){if(e.lookahead<=ue){if(h(e),e.lookahead<=ue&&t===L)return me;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ae&&e.strstart>0&&(o=e.strstart-1,(n=s[o])===s[++o]&&n===s[++o]&&n===s[++o])){i=e.strstart+ue;do{}while(n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&o<i);e.match_length=ue-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ae?(r=C._tr_tally(e,1,e.match_length-ae),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(a(e,!1),0===e.strm.avail_out))return me}return e.insert=0,t===B?(a(e,!0),0===e.strm.avail_out?_e:we):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?me:ve}function g(e,t){for(var r;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===L)return me;break}if(e.match_length=0,r=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(a(e,!1),0===e.strm.avail_out))return me}return e.insert=0,t===B?(a(e,!0),0===e.strm.avail_out?_e:we):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?me:ve}function m(e,t,r,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=o}function v(e){e.window_size=2*e.w_size,i(e.head),e.max_lazy_match=j[e.level].max_lazy,e.good_match=j[e.level].good_length,e.nice_match=j[e.level].nice_length,e.max_chain_length=j[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ae-1,e.match_available=0,e.ins_h=0}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new T.Buf16(2*ie),this.dyn_dtree=new T.Buf16(2*(2*ne+1)),this.bl_tree=new T.Buf16(2*(2*oe+1)),i(this.dyn_ltree),i(this.dyn_dtree),i(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new T.Buf16(se+1),this.heap=new T.Buf16(2*re+1),i(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new T.Buf16(2*re+1),i(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=G,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?fe:ye,e.adler=2===t.wrap?0:1,t.last_flush=L,C._tr_init(t),D):n(e,F)}function k(e){var t=w(e);return t===D&&v(e.state),t}function R(e,t){return e&&e.state?2!==e.state.wrap?F:(e.state.gzhead=t,D):F}function E(e,t,r,o,i,s){if(!e)return F;var a=1;if(t===H&&(t=6),o<0?(a=0,o=-o):o>15&&(a=2,o-=16),i<1||i>$||r!==Q||o<8||o>15||t<0||t>9||s<0||s>X)return n(e,F);8===o&&(o=9);var u=new _;return e.state=u,u.strm=e,u.wrap=a,u.gzhead=null,u.w_bits=o,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=i+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+ae-1)/ae),u.window=new T.Buf8(2*u.w_size),u.head=new T.Buf16(u.hash_size),u.prev=new T.Buf16(u.w_size),u.lit_bufsize=1<<i+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new T.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=r,k(e)}function S(e,t){return E(e,t,Q,ee,te,V)}function O(e,t){var r,a,l,f;if(!e||!e.state||t>U||t<0)return e?n(e,F):F;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===ge&&t!==B)return n(e,0===e.avail_out?J:F);if(a.strm=e,r=a.last_flush,a.last_flush=t,a.status===fe)if(2===a.wrap)e.adler=0,u(a,31),u(a,139),u(a,8),a.gzhead?(u(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),u(a,255&a.gzhead.time),u(a,a.gzhead.time>>8&255),u(a,a.gzhead.time>>16&255),u(a,a.gzhead.time>>24&255),u(a,9===a.level?2:a.strategy>=Y||a.level<2?4:0),u(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(u(a,255&a.gzhead.extra.length),u(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=N(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=he):(u(a,0),u(a,0),u(a,0),u(a,0),u(a,0),u(a,9===a.level?2:a.strategy>=Y||a.level<2?4:0),u(a,ke),a.status=ye);else{var h=Q+(a.w_bits-8<<4)<<8,p=-1;p=a.strategy>=Y||a.level<2?0:a.level<6?1:6===a.level?2:3,h|=p<<6,0!==a.strstart&&(h|=le),h+=31-h%31,a.status=ye,c(a,h),0!==a.strstart&&(c(a,e.adler>>>16),c(a,65535&e.adler)),e.adler=1}if(a.status===he)if(a.gzhead.extra){for(l=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>l&&(e.adler=N(e.adler,a.pending_buf,a.pending-l,l)),s(e),l=a.pending,a.pending!==a.pending_buf_size));)u(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>l&&(e.adler=N(e.adler,a.pending_buf,a.pending-l,l)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=pe)}else a.status=pe;if(a.status===pe)if(a.gzhead.name){l=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>l&&(e.adler=N(e.adler,a.pending_buf,a.pending-l,l)),s(e),l=a.pending,a.pending===a.pending_buf_size)){f=1;break}f=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,u(a,f)}while(0!==f);a.gzhead.hcrc&&a.pending>l&&(e.adler=N(e.adler,a.pending_buf,a.pending-l,l)),0===f&&(a.gzindex=0,a.status=de)}else a.status=de;if(a.status===de)if(a.gzhead.comment){l=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>l&&(e.adler=N(e.adler,a.pending_buf,a.pending-l,l)),s(e),l=a.pending,a.pending===a.pending_buf_size)){f=1;break}f=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,u(a,f)}while(0!==f);a.gzhead.hcrc&&a.pending>l&&(e.adler=N(e.adler,a.pending_buf,a.pending-l,l)),0===f&&(a.status=be)}else a.status=be;if(a.status===be&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(e),a.pending+2<=a.pending_buf_size&&(u(a,255&e.adler),u(a,e.adler>>8&255),e.adler=0,a.status=ye)):a.status=ye),0!==a.pending){if(s(e),0===e.avail_out)return a.last_flush=-1,D}else if(0===e.avail_in&&o(t)<=o(r)&&t!==B)return n(e,J);if(a.status===ge&&0!==e.avail_in)return n(e,J);if(0!==e.avail_in||0!==a.lookahead||t!==L&&a.status!==ge){var d=a.strategy===Y?g(a,t):a.strategy===K?y(a,t):j[a.level].func(a,t);if(d!==_e&&d!==we||(a.status=ge),d===me||d===_e)return 0===e.avail_out&&(a.last_flush=-1),D;if(d===ve&&(t===q?C._tr_align(a):t!==U&&(C._tr_stored_block(a,0,0,!1),t===M&&(i(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(e),0===e.avail_out))return a.last_flush=-1,D}return t!==B?D:a.wrap<=0?W:(2===a.wrap?(u(a,255&e.adler),u(a,e.adler>>8&255),u(a,e.adler>>16&255),u(a,e.adler>>24&255),u(a,255&e.total_in),u(a,e.total_in>>8&255),u(a,e.total_in>>16&255),u(a,e.total_in>>24&255)):(c(a,e.adler>>>16),c(a,65535&e.adler)),s(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?D:W)}function x(e){var t;return e&&e.state?(t=e.state.status)!==fe&&t!==he&&t!==pe&&t!==de&&t!==be&&t!==ye&&t!==ge?n(e,F):(e.state=null,t===ye?n(e,z):D):F}function P(e,t){var r,n,o,s,a,u,c,l,f=t.length;if(!e||!e.state)return F;if(r=e.state,2===(s=r.wrap)||1===s&&r.status!==fe||r.lookahead)return F;for(1===s&&(e.adler=A(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===s&&(i(r.head),r.strstart=0,r.block_start=0,r.insert=0),l=new T.Buf8(r.w_size),T.arraySet(l,t,f-r.w_size,r.w_size,0),t=l,f=r.w_size),a=e.avail_in,u=e.next_in,c=e.input,e.avail_in=f,e.next_in=0,e.input=t,h(r);r.lookahead>=ae;){n=r.strstart,o=r.lookahead-(ae-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+ae-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=ae-1,h(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=ae-1,r.match_available=0,e.next_in=u,e.input=c,e.avail_in=a,r.wrap=s,D}var j,T=r(18),C=r(72),A=r(27),N=r(28),I=r(71),L=0,q=1,M=3,B=4,U=5,D=0,W=1,F=-2,z=-3,J=-5,H=-1,Z=1,Y=2,K=3,X=4,V=0,G=2,Q=8,$=9,ee=15,te=8,re=286,ne=30,oe=19,ie=2*re+1,se=15,ae=3,ue=258,ce=ue+ae+1,le=32,fe=42,he=69,pe=73,de=91,be=103,ye=113,ge=666,me=1,ve=2,_e=3,we=4,ke=3;j=[new m(0,0,0,0,p),new m(4,4,8,4,d),new m(4,5,16,8,d),new m(4,6,32,32,d),new m(4,4,16,16,b),new m(8,16,32,32,b),new m(8,16,128,128,b),new m(8,32,128,256,b),new m(32,128,258,1024,b),new m(32,258,258,4096,b)],t.deflateInit=S,t.deflateInit2=E,t.deflateReset=k,t.deflateResetKeep=w,t.deflateSetHeader=R,t.deflate=O,t.deflateEnd=x,t.deflateSetDictionary=P,t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,r){"use strict";e.exports=function(e,t){var r,n,o,i,s,a,u,c,l,f,h,p,d,b,y,g,m,v,_,w,k,R,E,S,O;r=e.state,n=e.next_in,S=e.input,o=n+(e.avail_in-5),i=e.next_out,O=e.output,s=i-(t-e.avail_out),a=i+(e.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,f=r.wnext,h=r.window,p=r.hold,d=r.bits,b=r.lencode,y=r.distcode,g=(1<<r.lenbits)-1,m=(1<<r.distbits)-1;e:do{d<15&&(p+=S[n++]<<d,d+=8,p+=S[n++]<<d,d+=8),v=b[p&g];t:for(;;){if(_=v>>>24,p>>>=_,d-=_,0===(_=v>>>16&255))O[i++]=65535&v;else{if(!(16&_)){if(0==(64&_)){v=b[(65535&v)+(p&(1<<_)-1)];continue t}if(32&_){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=65535&v,_&=15,_&&(d<_&&(p+=S[n++]<<d,d+=8),w+=p&(1<<_)-1,p>>>=_,d-=_),d<15&&(p+=S[n++]<<d,d+=8,p+=S[n++]<<d,d+=8),v=y[p&m];r:for(;;){if(_=v>>>24,p>>>=_,d-=_,!(16&(_=v>>>16&255))){if(0==(64&_)){v=y[(65535&v)+(p&(1<<_)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(k=65535&v,_&=15,d<_&&(p+=S[n++]<<d,(d+=8)<_&&(p+=S[n++]<<d,d+=8)),(k+=p&(1<<_)-1)>u){e.msg="invalid distance too far back",r.mode=30;break e}if(p>>>=_,d-=_,_=i-s,k>_){if((_=k-_)>l&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(R=0,E=h,0===f){if(R+=c-_,_<w){w-=_;do{O[i++]=h[R++]}while(--_);R=i-k,E=O}}else if(f<_){if(R+=c+f-_,(_-=f)<w){w-=_;do{O[i++]=h[R++]}while(--_);if(R=0,f<w){_=f,w-=_;do{O[i++]=h[R++]}while(--_);R=i-k,E=O}}}else if(R+=f-_,_<w){w-=_;do{O[i++]=h[R++]}while(--_);R=i-k,E=O}for(;w>2;)O[i++]=E[R++],O[i++]=E[R++],O[i++]=E[R++],w-=3;w&&(O[i++]=E[R++],w>1&&(O[i++]=E[R++]))}else{R=i-k;do{O[i++]=O[R++],O[i++]=O[R++],O[i++]=O[R++],w-=3}while(w>2);w&&(O[i++]=O[R++],w>1&&(O[i++]=O[R++]))}break}}break}}while(n<o&&i<a);w=d>>3,n-=w,d-=w<<3,p&=(1<<d)-1,e.next_in=n,e.next_out=i,e.avail_in=n<o?o-n+5:5-(n-o),e.avail_out=i<a?a-i+257:257-(i-a),r.hold=p,r.bits=d}},function(e,t,r){"use strict";function n(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function i(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=M,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new m.Buf32(be),t.distcode=t.distdyn=new m.Buf32(ye),t.sane=1,t.back=-1,j):A}function s(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,i(e)):A}function a(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?A:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,s(e))):A}function u(e,t){var r,n;return e?(n=new o,e.state=n,n.window=null,r=a(e,t),r!==j&&(e.state=null),r):A}function c(e){return u(e,ge)}function l(e){if(me){var t;for(y=new m.Buf32(512),g=new m.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(k(E,e.lens,0,288,y,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;k(S,e.lens,0,32,g,0,e.work,{bits:5}),me=!1}e.lencode=y,e.lenbits=9,e.distcode=g,e.distbits=5}function f(e,t,r,n){var o,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new m.Buf8(i.wsize)),n>=i.wsize?(m.arraySet(i.window,t,r-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>n&&(o=n),m.arraySet(i.window,t,r-n,o,i.wnext),n-=o,n?(m.arraySet(i.window,t,r-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}function h(e,t){var r,o,i,s,a,u,c,h,p,d,b,y,g,be,ye,ge,me,ve,_e,we,ke,Re,Ee,Se,Oe=0,xe=new m.Buf8(4),Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return A;r=e.state,r.mode===K&&(r.mode=X),a=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,o=e.input,u=e.avail_in,h=r.hold,p=r.bits,d=u,b=c,Re=j;e:for(;;)switch(r.mode){case M:if(0===r.wrap){r.mode=X;break}for(;p<16;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}if(2&r.wrap&&35615===h){r.check=0,xe[0]=255&h,xe[1]=h>>>8&255,r.check=_(r.check,xe,2,0),h=0,p=0,r.mode=B;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",r.mode=he;break}if((15&h)!==q){e.msg="unknown compression method",r.mode=he;break}if(h>>>=4,p-=4,ke=8+(15&h),0===r.wbits)r.wbits=ke;else if(ke>r.wbits){e.msg="invalid window size",r.mode=he;break}r.dmax=1<<ke,e.adler=r.check=1,r.mode=512&h?Z:K,h=0,p=0;break;case B:for(;p<16;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}if(r.flags=h,(255&r.flags)!==q){e.msg="unknown compression method",r.mode=he;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=he;break}r.head&&(r.head.text=h>>8&1),512&r.flags&&(xe[0]=255&h,xe[1]=h>>>8&255,r.check=_(r.check,xe,2,0)),h=0,p=0,r.mode=U;case U:for(;p<32;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}r.head&&(r.head.time=h),512&r.flags&&(xe[0]=255&h,xe[1]=h>>>8&255,xe[2]=h>>>16&255,xe[3]=h>>>24&255,r.check=_(r.check,xe,4,0)),h=0,p=0,r.mode=D;case D:for(;p<16;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}r.head&&(r.head.xflags=255&h,r.head.os=h>>8),512&r.flags&&(xe[0]=255&h,xe[1]=h>>>8&255,r.check=_(r.check,xe,2,0)),h=0,p=0,r.mode=W;case W:if(1024&r.flags){for(;p<16;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}r.length=h,r.head&&(r.head.extra_len=h),512&r.flags&&(xe[0]=255&h,xe[1]=h>>>8&255,r.check=_(r.check,xe,2,0)),h=0,p=0}else r.head&&(r.head.extra=null);r.mode=F;case F:if(1024&r.flags&&(y=r.length,y>u&&(y=u),y&&(r.head&&(ke=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),m.arraySet(r.head.extra,o,s,y,ke)),512&r.flags&&(r.check=_(r.check,o,y,s)),u-=y,s+=y,r.length-=y),r.length))break e;r.length=0,r.mode=z;case z:if(2048&r.flags){if(0===u)break e;y=0;do{ke=o[s+y++],r.head&&ke&&r.length<65536&&(r.head.name+=String.fromCharCode(ke))}while(ke&&y<u);if(512&r.flags&&(r.check=_(r.check,o,y,s)),u-=y,s+=y,ke)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=J;case J:if(4096&r.flags){if(0===u)break e;y=0;do{ke=o[s+y++],r.head&&ke&&r.length<65536&&(r.head.comment+=String.fromCharCode(ke))}while(ke&&y<u);if(512&r.flags&&(r.check=_(r.check,o,y,s)),u-=y,s+=y,ke)break e}else r.head&&(r.head.comment=null);r.mode=H;case H:if(512&r.flags){for(;p<16;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}if(h!==(65535&r.check)){e.msg="header crc mismatch",r.mode=he;break}h=0,p=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=K;break;case Z:for(;p<32;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}e.adler=r.check=n(h),h=0,p=0,r.mode=Y;case Y:if(0===r.havedict)return e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=u,r.hold=h,r.bits=p,C;e.adler=r.check=1,r.mode=K;case K:if(t===x||t===P)break e;case X:if(r.last){h>>>=7&p,p-=7&p,r.mode=ce;break}for(;p<3;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}switch(r.last=1&h,h>>>=1,p-=1,3&h){case 0:r.mode=V;break;case 1:if(l(r),r.mode=re,t===P){h>>>=2,p-=2;break e}break;case 2:r.mode=$;break;case 3:e.msg="invalid block type",r.mode=he}h>>>=2,p-=2;break;case V:for(h>>>=7&p,p-=7&p;p<32;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",r.mode=he;break}if(r.length=65535&h,h=0,p=0,r.mode=G,t===P)break e;case G:r.mode=Q;case Q:if(y=r.length){if(y>u&&(y=u),y>c&&(y=c),0===y)break e;m.arraySet(i,o,s,y,a),u-=y,s+=y,c-=y,a+=y,r.length-=y;break}r.mode=K;break;case $:for(;p<14;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}if(r.nlen=257+(31&h),h>>>=5,p-=5,r.ndist=1+(31&h),h>>>=5,p-=5,r.ncode=4+(15&h),h>>>=4,p-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=he;break}r.have=0,r.mode=ee;case ee:for(;r.have<r.ncode;){for(;p<3;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}r.lens[Pe[r.have++]]=7&h,h>>>=3,p-=3}for(;r.have<19;)r.lens[Pe[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Ee={bits:r.lenbits},Re=k(R,r.lens,0,19,r.lencode,0,r.work,Ee),r.lenbits=Ee.bits,Re){e.msg="invalid code lengths set",r.mode=he;break}r.have=0,r.mode=te;case te:for(;r.have<r.nlen+r.ndist;){for(;Oe=r.lencode[h&(1<<r.lenbits)-1],ye=Oe>>>24,ge=Oe>>>16&255,me=65535&Oe,!(ye<=p);){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}if(me<16)h>>>=ye,p-=ye,r.lens[r.have++]=me;else{if(16===me){for(Se=ye+2;p<Se;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}if(h>>>=ye,p-=ye,0===r.have){e.msg="invalid bit length repeat",r.mode=he;break}ke=r.lens[r.have-1],y=3+(3&h),h>>>=2,p-=2}else if(17===me){for(Se=ye+3;p<Se;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}h>>>=ye,p-=ye,ke=0,y=3+(7&h),h>>>=3,p-=3}else{for(Se=ye+7;p<Se;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}h>>>=ye,p-=ye,ke=0,y=11+(127&h),h>>>=7,p-=7}if(r.have+y>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=he;break}for(;y--;)r.lens[r.have++]=ke}}if(r.mode===he)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=he;break}if(r.lenbits=9,Ee={bits:r.lenbits},Re=k(E,r.lens,0,r.nlen,r.lencode,0,r.work,Ee),r.lenbits=Ee.bits,Re){e.msg="invalid literal/lengths set",r.mode=he;break}if(r.distbits=6,r.distcode=r.distdyn,Ee={bits:r.distbits},Re=k(S,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Ee),r.distbits=Ee.bits,Re){e.msg="invalid distances set",r.mode=he;break}if(r.mode=re,t===P)break e;case re:r.mode=ne;case ne:if(u>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=u,r.hold=h,r.bits=p,w(e,b),a=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,o=e.input,u=e.avail_in,h=r.hold,p=r.bits,r.mode===K&&(r.back=-1);break}for(r.back=0;Oe=r.lencode[h&(1<<r.lenbits)-1],ye=Oe>>>24,ge=Oe>>>16&255,me=65535&Oe,!(ye<=p);){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}if(ge&&0==(240&ge)){for(ve=ye,_e=ge,we=me;Oe=r.lencode[we+((h&(1<<ve+_e)-1)>>ve)],ye=Oe>>>24,ge=Oe>>>16&255,me=65535&Oe,!(ve+ye<=p);){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}h>>>=ve,p-=ve,r.back+=ve}if(h>>>=ye,p-=ye,r.back+=ye,r.length=me,0===ge){r.mode=ue;break}if(32&ge){r.back=-1,r.mode=K;break}if(64&ge){e.msg="invalid literal/length code",r.mode=he;break}r.extra=15&ge,r.mode=oe;case oe:if(r.extra){for(Se=r.extra;p<Se;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,p-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ie;case ie:for(;Oe=r.distcode[h&(1<<r.distbits)-1],ye=Oe>>>24,ge=Oe>>>16&255,me=65535&Oe,!(ye<=p);){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}if(0==(240&ge)){for(ve=ye,_e=ge,we=me;Oe=r.distcode[we+((h&(1<<ve+_e)-1)>>ve)],ye=Oe>>>24,ge=Oe>>>16&255,me=65535&Oe,!(ve+ye<=p);){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}h>>>=ve,p-=ve,r.back+=ve}if(h>>>=ye,p-=ye,r.back+=ye,64&ge){e.msg="invalid distance code",r.mode=he;break}r.offset=me,r.extra=15&ge,r.mode=se;case se:if(r.extra){for(Se=r.extra;p<Se;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,p-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=he;break}r.mode=ae;case ae:if(0===c)break e;if(y=b-c,r.offset>y){if((y=r.offset-y)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=he;break}y>r.wnext?(y-=r.wnext,g=r.wsize-y):g=r.wnext-y,y>r.length&&(y=r.length),be=r.window}else be=i,g=a-r.offset,y=r.length;y>c&&(y=c),c-=y,r.length-=y;do{i[a++]=be[g++]}while(--y);0===r.length&&(r.mode=ne);break;case ue:if(0===c)break e;i[a++]=r.length,c--,r.mode=ne;break;case ce:if(r.wrap){for(;p<32;){if(0===u)break e;u--,h|=o[s++]<<p,p+=8}if(b-=c,e.total_out+=b,r.total+=b,b&&(e.adler=r.check=r.flags?_(r.check,i,b,a-b):v(r.check,i,b,a-b)),b=c,(r.flags?h:n(h))!==r.check){e.msg="incorrect data check",r.mode=he;break}h=0,p=0}r.mode=le;case le:if(r.wrap&&r.flags){for(;p<32;){if(0===u)break e;u--,h+=o[s++]<<p,p+=8}if(h!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=he;break}h=0,p=0}r.mode=fe;case fe:Re=T;break e;case he:Re=N;break e;case pe:return I;case de:default:return A}return e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=u,r.hold=h,r.bits=p,(r.wsize||b!==e.avail_out&&r.mode<he&&(r.mode<ce||t!==O))&&f(e,e.output,e.next_out,b-e.avail_out)?(r.mode=pe,I):(d-=e.avail_in,b-=e.avail_out,e.total_in+=d,e.total_out+=b,r.total+=b,r.wrap&&b&&(e.adler=r.check=r.flags?_(r.check,i,b,e.next_out-b):v(r.check,i,b,e.next_out-b)),e.data_type=r.bits+(r.last?64:0)+(r.mode===K?128:0)+(r.mode===re||r.mode===G?256:0),(0===d&&0===b||t===O)&&Re===j&&(Re=L),Re)}function p(e){if(!e||!e.state)return A;var t=e.state;return t.window&&(t.window=null),e.state=null,j}function d(e,t){var r;return e&&e.state?(r=e.state,0==(2&r.wrap)?A:(r.head=t,t.done=!1,j)):A}function b(e,t){var r,n,o=t.length;return e&&e.state?(r=e.state,0!==r.wrap&&r.mode!==Y?A:r.mode===Y&&(n=1,(n=v(n,t,o,0))!==r.check)?N:f(e,t,o,o)?(r.mode=pe,I):(r.havedict=1,j)):A}var y,g,m=r(18),v=r(27),_=r(28),w=r(68),k=r(70),R=0,E=1,S=2,O=4,x=5,P=6,j=0,T=1,C=2,A=-2,N=-3,I=-4,L=-5,q=8,M=1,B=2,U=3,D=4,W=5,F=6,z=7,J=8,H=9,Z=10,Y=11,K=12,X=13,V=14,G=15,Q=16,$=17,ee=18,te=19,re=20,ne=21,oe=22,ie=23,se=24,ae=25,ue=26,ce=27,le=28,fe=29,he=30,pe=31,de=32,be=852,ye=592,ge=15,me=!0;t.inflateReset=s,t.inflateReset2=a,t.inflateResetKeep=i,t.inflateInit=c,t.inflateInit2=u,t.inflate=h,t.inflateEnd=p,t.inflateGetHeader=d,t.inflateSetDictionary=b,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,r){"use strict";var n=r(18),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,u,c,l,f,h){var p,d,b,y,g,m,v,_,w,k=h.bits,R=0,E=0,S=0,O=0,x=0,P=0,j=0,T=0,C=0,A=0,N=null,I=0,L=new n.Buf16(16),q=new n.Buf16(16),M=null,B=0;for(R=0;R<=15;R++)L[R]=0;for(E=0;E<u;E++)L[t[r+E]]++;for(x=k,O=15;O>=1&&0===L[O];O--);if(x>O&&(x=O),0===O)return c[l++]=20971520,c[l++]=20971520,h.bits=1,0;for(S=1;S<O&&0===L[S];S++);for(x<S&&(x=S),T=1,R=1;R<=15;R++)if(T<<=1,(T-=L[R])<0)return-1;if(T>0&&(0===e||1!==O))return-1;for(q[1]=0,R=1;R<15;R++)q[R+1]=q[R]+L[R];for(E=0;E<u;E++)0!==t[r+E]&&(f[q[t[r+E]]++]=E);if(0===e?(N=M=f,m=19):1===e?(N=o,I-=257,M=i,B-=257,m=256):(N=s,M=a,m=-1),A=0,E=0,R=S,g=l,P=x,j=0,b=-1,C=1<<x,y=C-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){v=R-j,f[E]<m?(_=0,w=f[E]):f[E]>m?(_=M[B+f[E]],w=N[I+f[E]]):(_=96,w=0),p=1<<R-j,d=1<<P,S=d;do{d-=p,c[g+(A>>j)+d]=v<<24|_<<16|w|0}while(0!==d);for(p=1<<R-1;A&p;)p>>=1;if(0!==p?(A&=p-1,A+=p):A=0,E++,0==--L[R]){if(R===O)break;R=t[r+f[E]]}if(R>x&&(A&y)!==b){for(0===j&&(j=x),g+=S,P=R-j,T=1<<P;P+j<O&&!((T-=L[P+j])<=0);)P++,T<<=1;if(C+=1<<P,1===e&&C>852||2===e&&C>592)return 1;b=A&y,c[b]=x<<24|P<<16|g-l|0}}return 0!==A&&(c[g+A]=R-j<<24|64<<16|0),h.bits=x,0}},function(e,t,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,r){"use strict";function n(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e,t,r,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}function i(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function s(e){return e<256?ie[e]:ie[256+(e>>>7)]}function a(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function u(e,t,r){e.bi_valid>Y-r?(e.bi_buf|=t<<e.bi_valid&65535,a(e,e.bi_buf),e.bi_buf=t>>Y-e.bi_valid,e.bi_valid+=r-Y):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function c(e,t,r){u(e,r[2*t],r[2*t+1])}function l(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function f(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function h(e,t){var r,n,o,i,s,a,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,d=t.stat_desc.max_length,b=0;for(i=0;i<=Z;i++)e.bl_count[i]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<H;r++)n=e.heap[r],i=u[2*u[2*n+1]+1]+1,i>d&&(i=d,b++),u[2*n+1]=i,n>c||(e.bl_count[i]++,s=0,n>=p&&(s=h[n-p]),a=u[2*n],e.opt_len+=a*(i+s),f&&(e.static_len+=a*(l[2*n+1]+s)));if(0!==b){do{for(i=d-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[d]--,b-=2}while(b>0);for(i=d;0!==i;i--)for(n=e.bl_count[i];0!==n;)(o=e.heap[--r])>c||(u[2*o+1]!==i&&(e.opt_len+=(i-u[2*o+1])*u[2*o],u[2*o+1]=i),n--)}}function p(e,t,r){var n,o,i=new Array(Z+1),s=0;for(n=1;n<=Z;n++)i[n]=s=s+r[n-1]<<1;for(o=0;o<=t;o++){var a=e[2*o+1];0!==a&&(e[2*o]=l(i[a]++,a))}}function d(){var e,t,r,n,i,s=new Array(Z+1);for(r=0,n=0;n<D-1;n++)for(ae[n]=r,e=0;e<1<<$[n];e++)se[r++]=n;for(se[r-1]=n,i=0,n=0;n<16;n++)for(ue[n]=i,e=0;e<1<<ee[n];e++)ie[i++]=n;for(i>>=7;n<z;n++)for(ue[n]=i<<7,e=0;e<1<<ee[n]-7;e++)ie[256+i++]=n;for(t=0;t<=Z;t++)s[t]=0;for(e=0;e<=143;)ne[2*e+1]=8,e++,s[8]++;for(;e<=255;)ne[2*e+1]=9,e++,s[9]++;for(;e<=279;)ne[2*e+1]=7,e++,s[7]++;for(;e<=287;)ne[2*e+1]=8,e++,s[8]++;for(p(ne,F+1,s),e=0;e<z;e++)oe[2*e+1]=5,oe[2*e]=l(e,5);ce=new o(ne,$,W+1,F,Z),le=new o(oe,ee,0,z,Z),fe=new o(new Array(0),te,0,J,K)}function b(e){var t;for(t=0;t<F;t++)e.dyn_ltree[2*t]=0;for(t=0;t<z;t++)e.dyn_dtree[2*t]=0;for(t=0;t<J;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*X]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function y(e){e.bi_valid>8?a(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function g(e,t,r,n){y(e),n&&(a(e,r),a(e,~r)),A.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function m(e,t,r,n){var o=2*t,i=2*r;return e[o]<e[i]||e[o]===e[i]&&n[t]<=n[r]}function v(e,t,r){for(var n=e.heap[r],o=r<<1;o<=e.heap_len&&(o<e.heap_len&&m(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!m(t,n,e.heap[o],e.depth));)e.heap[r]=e.heap[o],r=o,o<<=1;e.heap[r]=n}function _(e,t,r){var n,o,i,a,l=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],o=e.pending_buf[e.l_buf+l],l++,0===n?c(e,o,t):(i=se[o],c(e,i+W+1,t),a=$[i],0!==a&&(o-=ae[i],u(e,o,a)),n--,i=s(n),c(e,i,r),0!==(a=ee[i])&&(n-=ue[i],u(e,n,a)))}while(l<e.last_lit);c(e,X,t)}function w(e,t){var r,n,o,i=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=H,r=0;r<u;r++)0!==i[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)o=e.heap[++e.heap_len]=c<2?++c:0,i[2*o]=1,e.depth[o]=0,e.opt_len--,a&&(e.static_len-=s[2*o+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)v(e,i,r);o=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],v(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,i[2*o]=i[2*r]+i[2*n],e.depth[o]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,i[2*r+1]=i[2*n+1]=o,e.heap[1]=o++,v(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],h(e,t),p(i,c,e.bl_count)}function k(e,t,r){var n,o,i=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)o=s,s=t[2*(n+1)+1],++a<u&&o===s||(a<c?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[2*V]++):a<=10?e.bl_tree[2*G]++:e.bl_tree[2*Q]++,a=0,i=o,0===s?(u=138,c=3):o===s?(u=6,c=3):(u=7,c=4))}function R(e,t,r){var n,o,i=-1,s=t[1],a=0,l=7,f=4;for(0===s&&(l=138,f=3),n=0;n<=r;n++)if(o=s,s=t[2*(n+1)+1],!(++a<l&&o===s)){if(a<f)do{c(e,o,e.bl_tree)}while(0!=--a);else 0!==o?(o!==i&&(c(e,o,e.bl_tree),a--),c(e,V,e.bl_tree),u(e,a-3,2)):a<=10?(c(e,G,e.bl_tree),u(e,a-3,3)):(c(e,Q,e.bl_tree),u(e,a-11,7));a=0,i=o,0===s?(l=138,f=3):o===s?(l=6,f=3):(l=7,f=4)}}function E(e){var t;for(k(e,e.dyn_ltree,e.l_desc.max_code),k(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=J-1;t>=3&&0===e.bl_tree[2*re[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function S(e,t,r,n){var o;for(u(e,t-257,5),u(e,r-1,5),u(e,n-4,4),o=0;o<n;o++)u(e,e.bl_tree[2*re[o]+1],3);R(e,e.dyn_ltree,t-1),R(e,e.dyn_dtree,r-1)}function O(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return I;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return L;for(t=32;t<W;t++)if(0!==e.dyn_ltree[2*t])return L;return I}function x(e){he||(d(),he=!0),e.l_desc=new i(e.dyn_ltree,ce),e.d_desc=new i(e.dyn_dtree,le),e.bl_desc=new i(e.bl_tree,fe),e.bi_buf=0,e.bi_valid=0,b(e)}function P(e,t,r,n){u(e,(M<<1)+(n?1:0),3),g(e,t,r,!0)}function j(e){u(e,B<<1,3),c(e,X,ne),f(e)}function T(e,t,r,n){var o,i,s=0;e.level>0?(e.strm.data_type===q&&(e.strm.data_type=O(e)),w(e,e.l_desc),w(e,e.d_desc),s=E(e),o=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=o&&(o=i)):o=i=r+5,r+4<=o&&-1!==t?P(e,t,r,n):e.strategy===N||i===o?(u(e,(B<<1)+(n?1:0),3),_(e,ne,oe)):(u(e,(U<<1)+(n?1:0),3),S(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),_(e,e.dyn_ltree,e.dyn_dtree)),b(e),n&&y(e)}function C(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(se[r]+W+1)]++,e.dyn_dtree[2*s(t)]++),e.last_lit===e.lit_bufsize-1}var A=r(18),N=4,I=0,L=1,q=2,M=0,B=1,U=2,D=29,W=256,F=W+1+D,z=30,J=19,H=2*F+1,Z=15,Y=16,K=7,X=256,V=16,G=17,Q=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=new Array(2*(F+2));n(ne);var oe=new Array(2*z);n(oe);var ie=new Array(512);n(ie);var se=new Array(256);n(se);var ae=new Array(D);n(ae);var ue=new Array(z);n(ue);var ce,le,fe,he=!1;t._tr_init=x,t._tr_stored_block=P,t._tr_flush_block=T,t._tr_tally=C,t._tr_align=j},function(e,t,r){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,p,d,b=e[l].replace(a,"%20"),y=b.indexOf(r);y>=0?(f=b.substr(0,y),h=b.substr(y+1)):(f=b,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),n(s,p)?o(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(s){var a=encodeURIComponent(o(s))+r;return i(e[s])?n(e[s],function(e){return a+encodeURIComponent(o(e))}).join(t):a+encodeURIComponent(o(e[s]))}).join(t):a?encodeURIComponent(o(a))+r+encodeURIComponent(o(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){(function(e,t){!function(e,r){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return c[u]=n,a(u),u++}function o(e){delete c[e]}function i(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function s(e){if(l)setTimeout(s,0,e);else{var t=c[e];if(t){l=!0;try{i(t)}finally{o(e),l=!1}}}}if(!e.setImmediate){var a,u=1,c={},l=!1,f=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?function(){a=function(e){t.nextTick(function(){s(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&s(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),a=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){s(e.data)},a=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;a=function(t){var r=f.createElement("script");r.onreadystatechange=function(){s(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():function(){a=function(e){setTimeout(s,0,e)}}(),h.setImmediate=n,h.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(7),r(0))},function(e,t,r){function n(){o.call(this)}e.exports=n;var o=r(6).EventEmitter;r(9)(n,o),n.Readable=r(25),n.Writable=r(84),n.Duplex=r(79),n.Transform=r(83),n.PassThrough=r(82),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function i(){l||(l=!0,e.end())}function s(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(u(),0===o.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",r),e.removeListener("drain",n),c.removeListener("end",i),c.removeListener("close",s),c.removeListener("error",a),e.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",r),e.on("drain",n),e._isStdio||t&&!1===t.end||(c.on("end",i),c.on("close",s));var l=!1;return c.on("error",a),e.on("error",a),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){e.exports=r(10)},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);o.call(this,e)}e.exports=n;var o=r(30),i=r(16);i.inherits=r(9),i.inherits(n,o),n.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,r){e.copy(t,r)}var i=r(20).Buffer,s=r(94);e.exports=function(){function e(){n(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),r=this.head,n=0;r;)o(r.data,t,n),n+=r.data.length,r=r.next;return t},e}(),s&&s.inspect&&s.inspect.custom&&(e.exports.prototype[s.inspect.custom]=function(){var e=s.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t,r){e.exports=r(25).PassThrough},function(e,t,r){e.exports=r(25).Transform},function(e,t,r){e.exports=r(24)},function(e,t,r){(function(e){function n(e,t){this._id=e,this._clearFn=t}var o=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;t.setTimeout=function(){return new n(i.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new n(i.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(76),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,r(7))},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){(function(t){function r(e,t){function r(){if(!o){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),o=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var o=!1;return r}function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=r}).call(t,r(7))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){},function(e,t){},function(e,t){},function(e,t,r){e.exports=r(35)}])});
//# sourceMappingURL=jsonrpc.min.js.map